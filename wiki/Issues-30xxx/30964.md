# Issue 30964: partial flake8 cleanup for repl/

archive/issues_030727.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nas a general cleaning procedure.\n\nCC:  @tscrim @slel\n\nComponent: **refactoring**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`da3885d`](https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572)**\n\nReviewer: **Samuel Leli\u00e8vre**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30964_\n\n",
    "closed_at": "2020-12-27T00:22:37Z",
    "created_at": "2020-11-25T18:28:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/refactoring",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "partial flake8 cleanup for repl/",
    "type": "issue",
    "updated_at": "2020-12-27T00:22:37Z",
    "url": "https://github.com/sagemath/sage/issues/30964",
    "user": "https://github.com/fchapoton"
}
```
<div id="comment:0"></div>

as a general cleaning procedure.

CC:  @tscrim @slel

Component: **refactoring**

Author: **Frédéric Chapoton**

Branch/Commit: **[`da3885d`](https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572)**

Reviewer: **Samuel Lelièvre**

_Issue created by migration from https://trac.sagemath.org/ticket/30964_





---

archive/issue_events_424575.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T18:28:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424575"
}
```



---

archive/issue_events_424576.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T18:28:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/refactoring",
    "label_color": "696969",
    "label_name": "refactoring",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424576"
}
```



---

archive/issue_events_424577.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T18:28:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424577"
}
```



---

archive/issue_events_424578.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T18:28:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424578"
}
```



---

archive/issue_comments_496214.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64efc98152ca15ea6ec4e6cc7abd1636ff9504cc\"><code>64efc98</code></a></td><td><code>some flake8 for repl</code></td></tr></table>\n",
    "created_at": "2020-11-25T18:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496214",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64efc98152ca15ea6ec4e6cc7abd1636ff9504cc"><code>64efc98</code></a></td><td><code>some flake8 for repl</code></td></tr></table>




---

archive/issue_comments_496215.json:
```json
{
    "body": "Commit: **[`64efc98`](https://github.com/sagemath/sagetrac-mirror/commit/64efc98152ca15ea6ec4e6cc7abd1636ff9504cc)**",
    "created_at": "2020-11-25T18:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496215",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`64efc98`](https://github.com/sagemath/sagetrac-mirror/commit/64efc98152ca15ea6ec4e6cc7abd1636ff9504cc)**



---

archive/issue_comments_496216.json:
```json
{
    "body": "Branch: **[u/chapoton/30964](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30964)**",
    "created_at": "2020-11-25T18:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496216",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/30964](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30964)**



---

archive/issue_events_424579.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T18:29:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424579"
}
```



---

archive/issue_comments_496217.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nok, bot is morally green, please review",
    "created_at": "2020-11-27T17:21:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496217",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">comment:2</div>

ok, bot is morally green, please review



---

archive/issue_comments_496218.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nBelow some \"since-we-are-editing-these-lines\" optional changes.\n\nClearly out of scope for this reformatting ticket,\nso feel free to make them or not.\n\nWith all or some or none of these in,\nyou can set to `positive_review` on my behalf.\n\nOptionally fix these comments:\n\n```diff\n-# TODO: This global variable do_preparse should be associated with an\n+# TODO: This global variable _do_preparse should be associated with an\n # IPython InteractiveShell as opposed to a global variable in this\n # module.\n _do_preparse = True\n```\n\n```diff\n-    If the file is not a Cython, Python, or a Sage file, a ``ValueError``\n+    If the file is not a Cython, Python, or Sage file, a ``ValueError``\n```\n\n```diff\n-    # Note: On Python 3 b64encode only accepts bytes, and returns bytes (yet\n-    # b64decode does accept str, but always returns bytes)\n+    # Note: In Python 3, b64encode only accepts bytes, and returns bytes.\n     b64 = base64.b64encode(str_to_bytes(filename, FS_ENCODING,\n                                         \"surrogateescape\"))\n     return 'sage.repl.load.load(sage.repl.load.base64.b64decode(\"{}\"),globals(),{})'.format(bytes_to_str(b64, 'ascii'), attach)\n```\n\nOptionally split a long line and pep8 its output:\n\n```diff\n-    return 'sage.repl.load.load(sage.repl.load.base64.b64decode(\"{}\"),globals(),{})'.format(bytes_to_str(b64, 'ascii'), attach)\n+    return ('sage.repl.load.load(sage.repl.load.base64.b64decode'\n+            '(\"{}\"), globals(), {})'.format(bytes_to_str(b64, 'ascii'), attach))\n```\n\nOptionally shrink two lines into one\n(unless it decreases readability):\n\n```diff\n-        i = s.find('\\n')\n-        s = s[i + 1:]\n+        s = s[s.find('\\n') + 1:]\n```",
    "created_at": "2020-11-28T09:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496218",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

Below some "since-we-are-editing-these-lines" optional changes.

Clearly out of scope for this reformatting ticket,
so feel free to make them or not.

With all or some or none of these in,
you can set to `positive_review` on my behalf.

Optionally fix these comments:

```diff
-# TODO: This global variable do_preparse should be associated with an
+# TODO: This global variable _do_preparse should be associated with an
 # IPython InteractiveShell as opposed to a global variable in this
 # module.
 _do_preparse = True
```

```diff
-    If the file is not a Cython, Python, or a Sage file, a ``ValueError``
+    If the file is not a Cython, Python, or Sage file, a ``ValueError``
```

```diff
-    # Note: On Python 3 b64encode only accepts bytes, and returns bytes (yet
-    # b64decode does accept str, but always returns bytes)
+    # Note: In Python 3, b64encode only accepts bytes, and returns bytes.
     b64 = base64.b64encode(str_to_bytes(filename, FS_ENCODING,
                                         "surrogateescape"))
     return 'sage.repl.load.load(sage.repl.load.base64.b64decode("{}"),globals(),{})'.format(bytes_to_str(b64, 'ascii'), attach)
```

Optionally split a long line and pep8 its output:

```diff
-    return 'sage.repl.load.load(sage.repl.load.base64.b64decode("{}"),globals(),{})'.format(bytes_to_str(b64, 'ascii'), attach)
+    return ('sage.repl.load.load(sage.repl.load.base64.b64decode'
+            '("{}"), globals(), {})'.format(bytes_to_str(b64, 'ascii'), attach))
```

Optionally shrink two lines into one
(unless it decreases readability):

```diff
-        i = s.find('\n')
-        s = s[i + 1:]
+        s = s[s.find('\n') + 1:]
```



---

archive/issue_comments_496219.json:
```json
{
    "body": "Changed commit from **[`64efc98`](https://github.com/sagemath/sagetrac-mirror/commit/64efc98152ca15ea6ec4e6cc7abd1636ff9504cc)** to **[`e17445f`](https://github.com/sagemath/sagetrac-mirror/commit/e17445f61f4e411e3309b91987bc60c387c13140)**",
    "created_at": "2020-11-28T10:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496219",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`64efc98`](https://github.com/sagemath/sagetrac-mirror/commit/64efc98152ca15ea6ec4e6cc7abd1636ff9504cc)** to **[`e17445f`](https://github.com/sagemath/sagetrac-mirror/commit/e17445f61f4e411e3309b91987bc60c387c13140)**



---

archive/issue_comments_496220.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e17445f61f4e411e3309b91987bc60c387c13140\"><code>e17445f</code></a></td><td><code>minor details</code></td></tr></table>\n",
    "created_at": "2020-11-28T10:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496220",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e17445f61f4e411e3309b91987bc60c387c13140"><code>e17445f</code></a></td><td><code>minor details</code></td></tr></table>




---

archive/issue_comments_496221.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2020-11-28T12:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496221",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre**



---

archive/issue_events_424580.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-11-28T12:55:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424580"
}
```



---

archive/issue_events_424581.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-11-28T12:55:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424581"
}
```



---

archive/issue_comments_496222.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nRegarding the two flake8 complaints of patchbots.\n\nOne says\n\n```\nsrc/sage/repl/interface_magic.py:127:21 undefined name 'get_ipython'\n```\nbut that seems unrelated to the changes here.\n\nOne says\n\n```\nsrc/sage/repl/interpreter.py:788:13 'line_profiler' imported but unused\n```\nbut that is as intended: it is imported\nin a try-except-else, only to ascertain\nand record whether it is available:\n\n```\n        # Load the %lprun extension if available\n        try:\n            import line_profiler\n        except ImportError:\n            pass\n        else:\n            self.extensions.append('line_profiler')\n```",
    "created_at": "2020-11-28T13:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496222",
    "user": "https://github.com/slel"
}
```

<div id="comment:6" align="right">comment:6</div>

Regarding the two flake8 complaints of patchbots.

One says

```
src/sage/repl/interface_magic.py:127:21 undefined name 'get_ipython'
```
but that seems unrelated to the changes here.

One says

```
src/sage/repl/interpreter.py:788:13 'line_profiler' imported but unused
```
but that is as intended: it is imported
in a try-except-else, only to ascertain
and record whether it is available:

```
        # Load the %lprun extension if available
        try:
            import line_profiler
        except ImportError:
            pass
        else:
            self.extensions.append('line_profiler')
```



---

archive/issue_events_424582.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-06T21:02:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424582"
}
```



---

archive/issue_events_424583.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-06T21:02:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424583"
}
```



---

archive/issue_comments_496223.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe0908e7312480aefdaead03fc7f2af877c114eb\"><code>fe0908e</code></a></td><td><code>Merge branch 'u/chapoton/30964' in 9.3.b3</code></td></tr></table>\n",
    "created_at": "2020-12-06T21:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496223",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe0908e7312480aefdaead03fc7f2af877c114eb"><code>fe0908e</code></a></td><td><code>Merge branch 'u/chapoton/30964' in 9.3.b3</code></td></tr></table>




---

archive/issue_comments_496224.json:
```json
{
    "body": "Changed commit from **[`e17445f`](https://github.com/sagemath/sagetrac-mirror/commit/e17445f61f4e411e3309b91987bc60c387c13140)** to **[`fe0908e`](https://github.com/sagemath/sagetrac-mirror/commit/fe0908e7312480aefdaead03fc7f2af877c114eb)**",
    "created_at": "2020-12-06T21:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496224",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e17445f`](https://github.com/sagemath/sagetrac-mirror/commit/e17445f61f4e411e3309b91987bc60c387c13140)** to **[`fe0908e`](https://github.com/sagemath/sagetrac-mirror/commit/fe0908e7312480aefdaead03fc7f2af877c114eb)**



---

archive/issue_comments_496225.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nafter trivial rebase, setting back to positive",
    "created_at": "2020-12-06T21:04:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496225",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

after trivial rebase, setting back to positive



---

archive/issue_events_424584.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-06T21:04:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424584"
}
```



---

archive/issue_events_424585.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-06T21:04:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424585"
}
```



---

archive/issue_comments_496226.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOuch that hurts\n\n```\n * python3_8: running distutils-r1_run_phase python_compile_all\nTraceback (most recent call last):\n  File \"sage_setup/docbuild/__main__.py\", line 1, in <module>\n    from sage_setup.docbuild import main\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py\", line 57, in <module>\n    import sage.all\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/all.py\", line 131, in <module>\n    from sage.misc.all       import *         # takes a while\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/all.py\", line 30, in <module>\n    from .html import html\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/html.py\", line 19, in <module>\n    from sage.misc.latex import latex\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/latex.py\", line 28, in <module>\n    from sage.misc import sage_eval\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/sage_eval.py\", line 14, in <module>\n    import sage.repl.preparse as preparser\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/repl/preparse.py\", line 1924\n    <<<<<<< HEAD\n```\nSomeone left out git stuff from a merge in `sage/repl/preparse.py`.",
    "created_at": "2020-12-07T01:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496226",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

Ouch that hurts

```
 * python3_8: running distutils-r1_run_phase python_compile_all
Traceback (most recent call last):
  File "sage_setup/docbuild/__main__.py", line 1, in <module>
    from sage_setup.docbuild import main
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 57, in <module>
    import sage.all
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/all.py", line 131, in <module>
    from sage.misc.all       import *         # takes a while
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/all.py", line 30, in <module>
    from .html import html
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/html.py", line 19, in <module>
    from sage.misc.latex import latex
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/latex.py", line 28, in <module>
    from sage.misc import sage_eval
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/misc/sage_eval.py", line 14, in <module>
    import sage.repl.preparse as preparser
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/build/lib/sage/repl/preparse.py", line 1924
    <<<<<<< HEAD
```
Someone left out git stuff from a merge in `sage/repl/preparse.py`.



---

archive/issue_events_424586.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-12-07T01:35:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424586"
}
```



---

archive/issue_events_424587.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-12-07T01:35:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424587"
}
```



---

archive/issue_comments_496227.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHere\nhttps://github.com/vbraun/sage/commit/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f#diff-cc58fbd2c68d139a07abf71362b887c37b055a649591e523ecb1bdff1b894cdeR1924\nand quite possibly there too\nhttps://github.com/vbraun/sage/commit/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f#diff-cc58fbd2c68d139a07abf71362b887c37b055a649591e523ecb1bdff1b894cdeR1924",
    "created_at": "2020-12-07T01:37:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496227",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:10" align="right">comment:10</div>

Here
https://github.com/vbraun/sage/commit/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f#diff-cc58fbd2c68d139a07abf71362b887c37b055a649591e523ecb1bdff1b894cdeR1924
and quite possibly there too
https://github.com/vbraun/sage/commit/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f#diff-cc58fbd2c68d139a07abf71362b887c37b055a649591e523ecb1bdff1b894cdeR1924



---

archive/issue_comments_496228.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nDidn't work like I was expecting. Ignore the last comment. So we have one thing at\nhttps://github.com/vbraun/sage/blob/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f/src/sage/repl/preparse.py#L1924\n\nand it looks like another at\nhttps://github.com/vbraun/sage/blob/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f/src/sage/repl/preparse.py#L1963",
    "created_at": "2020-12-07T01:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496228",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Didn't work like I was expecting. Ignore the last comment. So we have one thing at
https://github.com/vbraun/sage/blob/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f/src/sage/repl/preparse.py#L1924

and it looks like another at
https://github.com/vbraun/sage/blob/b48b1f9d61ea2c774cb11a38c53a5b707e8ec00f/src/sage/repl/preparse.py#L1963



---

archive/issue_comments_496229.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThere are some merge conflict markers checked in %-)",
    "created_at": "2020-12-07T23:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496229",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

There are some merge conflict markers checked in %-)



---

archive/issue_comments_496230.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd7416d707d8c4e09c40b61d1a7d0dda9a770005\"><code>fd7416d</code></a></td><td><code>some flake8 for repl</code></td></tr></table>\n",
    "created_at": "2020-12-08T08:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496230",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd7416d707d8c4e09c40b61d1a7d0dda9a770005"><code>fd7416d</code></a></td><td><code>some flake8 for repl</code></td></tr></table>




---

archive/issue_comments_496231.json:
```json
{
    "body": "Changed commit from **[`fe0908e`](https://github.com/sagemath/sagetrac-mirror/commit/fe0908e7312480aefdaead03fc7f2af877c114eb)** to **[`fd7416d`](https://github.com/sagemath/sagetrac-mirror/commit/fd7416d707d8c4e09c40b61d1a7d0dda9a770005)**",
    "created_at": "2020-12-08T08:07:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496231",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fe0908e`](https://github.com/sagemath/sagetrac-mirror/commit/fe0908e7312480aefdaead03fc7f2af877c114eb)** to **[`fd7416d`](https://github.com/sagemath/sagetrac-mirror/commit/fd7416d707d8c4e09c40b61d1a7d0dda9a770005)**



---

archive/issue_comments_496232.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nok, sorry. Here is a clean new branch",
    "created_at": "2020-12-08T08:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496232",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

ok, sorry. Here is a clean new branch



---

archive/issue_events_424588.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-08T08:07:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424588"
}
```



---

archive/issue_events_424589.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-08T08:07:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424589"
}
```



---

archive/issue_comments_496233.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nplease review",
    "created_at": "2020-12-11T08:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496233",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

please review



---

archive/issue_comments_496234.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nLooks clean. Back to positive.",
    "created_at": "2020-12-11T08:41:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496234",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Looks clean. Back to positive.



---

archive/issue_events_424590.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-12-11T08:41:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424590"
}
```



---

archive/issue_events_424591.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-12-11T08:41:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424591"
}
```



---

archive/issue_comments_496235.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nmerge conflict",
    "created_at": "2020-12-13T20:41:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496235",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>

merge conflict



---

archive/issue_events_424592.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-13T20:41:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424592"
}
```



---

archive/issue_events_424593.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-13T20:41:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424593"
}
```



---

archive/issue_comments_496236.json:
```json
{
    "body": "Changed commit from **[`fd7416d`](https://github.com/sagemath/sagetrac-mirror/commit/fd7416d707d8c4e09c40b61d1a7d0dda9a770005)** to **[`da3885d`](https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572)**",
    "created_at": "2020-12-15T10:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496236",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fd7416d`](https://github.com/sagemath/sagetrac-mirror/commit/fd7416d707d8c4e09c40b61d1a7d0dda9a770005)** to **[`da3885d`](https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572)**



---

archive/issue_comments_496237.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572\"><code>da3885d</code></a></td><td><code>Merge branch 'u/chapoton/30964' in 9.3.b4</code></td></tr></table>\n",
    "created_at": "2020-12-15T10:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496237",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572"><code>da3885d</code></a></td><td><code>Merge branch 'u/chapoton/30964' in 9.3.b4</code></td></tr></table>




---

archive/issue_events_424594.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-15T10:10:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424594"
}
```



---

archive/issue_events_424595.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-15T10:10:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424595"
}
```



---

archive/issue_comments_496238.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nafter trivial rebase, setting back to positive",
    "created_at": "2020-12-15T10:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496238",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:19" align="right">comment:19</div>

after trivial rebase, setting back to positive



---

archive/issue_comments_496239.json:
```json
{
    "body": "Changed branch from **[u/chapoton/30964](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30964)** to **[`da3885d`](https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572)**",
    "created_at": "2020-12-27T00:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30964#issuecomment-496239",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/30964](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30964)** to **[`da3885d`](https://github.com/sagemath/sagetrac-mirror/commit/da3885d686dd4ae1478bf7d0fe0fa85124c2d572)**



---

archive/issue_events_424596.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-27T00:22:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424596"
}
```



---

archive/issue_events_424597.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "93e2f098715b9f5b74978075481c208afbf4950b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-27T00:22:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30964",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30964#event-424597"
}
```

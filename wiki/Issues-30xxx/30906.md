# Issue 30906: let pari's spkg-configure accept pari 2.13

archive/issues_030669.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nsome formats have changed, so tests fail, see \n[#30801 comment:6](https://github.com/sagemath/sage/issues/30801#comment:6)\n\nDepends on #30801\n\nCC:  @tobihan @thierry-FreeBSD @orlitzky @mkoeppe @antonio-rojas @videlec @dkwo\n\nComponent: **build: configure**\n\nBranch/Commit: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix) @ [`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30906_\n\n",
    "closed_at": "2021-06-13T06:40:58Z",
    "created_at": "2020-11-13T11:37:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "let pari's spkg-configure accept pari 2.13",
    "type": "issue",
    "updated_at": "2021-06-13T06:40:58Z",
    "url": "https://github.com/sagemath/sage/issues/30906",
    "user": "https://github.com/dimpase"
}
```
<div id="comment:0"></div>

some formats have changed, so tests fail, see 
[#30801 comment:6](https://github.com/sagemath/sage/issues/30801#comment:6)

Depends on #30801

CC:  @tobihan @thierry-FreeBSD @orlitzky @mkoeppe @antonio-rojas @videlec @dkwo

Component: **build: configure**

Branch/Commit: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix) @ [`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/30906_





---

archive/issue_events_423797.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423797"
}
```



---

archive/issue_events_423798.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423798"
}
```



---

archive/issue_events_423799.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423799"
}
```



---

archive/issue_events_423800.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423800"
}
```



---

archive/issue_events_423801.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T12:48:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423801"
}
```



---

archive/issue_comments_495064.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b\"><code>ad702bf</code></a></td><td><code>do the bnfisunit check in Pari, not rely on output</code></td></tr></table>\n",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495064",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b"><code>ad702bf</code></a></td><td><code>do the bnfisunit check in Pari, not rely on output</code></td></tr></table>




---

archive/issue_comments_495065.json:
```json
{
    "body": "Commit: **[`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495065",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**



---

archive/issue_comments_495066.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495066",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_495067.json:
```json
{
    "body": "Branch: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)**",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495067",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)**



---

archive/issue_comments_495068.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nping",
    "created_at": "2020-12-03T09:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495068",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

ping



---

archive/issue_comments_495069.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\non Gentoo this blocks using system pari",
    "created_at": "2020-12-03T09:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495069",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

on Gentoo this blocks using system pari



---

archive/issue_events_423802.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-03T09:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423802"
}
```



---

archive/issue_events_423803.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-03T09:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423803"
}
```



---

archive/issue_events_423804.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T17:47:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423804"
}
```



---

archive/issue_events_423805.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T17:47:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423805"
}
```



---

archive/issue_comments_495070.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe pari upgrade to the same version in #30801 seems to require nontrivial changes to Sage code and tests and also involves an upgrade of cypari2. How come we should just be able to be accepting system pari 2.13?",
    "created_at": "2020-12-03T17:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495070",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

The pari upgrade to the same version in #30801 seems to require nontrivial changes to Sage code and tests and also involves an upgrade of cypari2. How come we should just be able to be accepting system pari 2.13?



---

archive/issue_comments_495071.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nmade it conditional on pari update to 2.13",
    "created_at": "2020-12-31T00:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495071",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

made it conditional on pari update to 2.13



---

archive/issue_events_423806.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-31T00:15:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423806"
}
```



---

archive/issue_events_423807.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-31T00:15:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423807"
}
```



---

archive/issue_comments_495072.json:
```json
{
    "body": "Dependencies: **#30801**",
    "created_at": "2020-12-31T00:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495072",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#30801**



---

archive/issue_comments_495073.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOn my Void linux machine, what works is\n\n```\n$ echo \"bnf = bnfinit(y^4-y-1); bnfisunit(bnf,-y^3+2*y^2-1)==[0,2,0]~\" | gp -qf\n1\n```\nwith only one square parenthesis, not two.",
    "created_at": "2021-02-09T17:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495073",
    "user": "https://github.com/dkwo"
}
```

<div id="comment:10" align="right">comment:10</div>

On my Void linux machine, what works is

```
$ echo "bnf = bnfinit(y^4-y-1); bnfisunit(bnf,-y^3+2*y^2-1)==[0,2,0]~" | gp -qf
1
```
with only one square parenthesis, not two.



---

archive/issue_comments_495074.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nthe two brackets are m4 syntax",
    "created_at": "2021-02-09T19:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495074",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

the two brackets are m4 syntax



---

archive/issue_comments_495075.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI see, thanks.\nHowever, even if I edit the file as per the commit, the bnfisunit test still fails for me with pari 2.13.0 using ./config, even though from a shell I get as above.\n\nWhat am I missing?",
    "created_at": "2021-02-09T20:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495075",
    "user": "https://github.com/dkwo"
}
```

<div id="comment:13" align="right">comment:13</div>

I see, thanks.
However, even if I edit the file as per the commit, the bnfisunit test still fails for me with pari 2.13.0 using ./config, even though from a shell I get as above.

What am I missing?



---

archive/issue_comments_495076.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDid you run `./bootstrap`?",
    "created_at": "2021-02-09T20:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495076",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Did you run `./bootstrap`?



---

archive/issue_comments_495077.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThat fixes it, thanks.",
    "created_at": "2021-02-09T20:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495077",
    "user": "https://github.com/dkwo"
}
```

<div id="comment:15" align="right">comment:15</div>

That fixes it, thanks.



---

archive/issue_events_423808.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T21:43:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423808"
}
```



---

archive/issue_events_423809.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T21:43:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423809"
}
```



---

archive/issue_comments_495078.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLooks like #30801 is taking care of this",
    "created_at": "2021-03-17T20:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495078",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Looks like #30801 is taking care of this



---

archive/issue_events_423810.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423810"
}
```



---

archive/issue_events_423811.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423811"
}
```



---

archive/issue_comments_495079.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to none",
    "created_at": "2021-03-17T20:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495079",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Dima Pasechnik** to none



---

archive/issue_events_423812.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423812"
}
```



---

archive/issue_comments_495080.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nyep. looks like the fix here was copied there.",
    "created_at": "2021-03-18T11:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495080",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

yep. looks like the fix here was copied there.



---

archive/issue_events_423813.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-18T11:26:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423813"
}
```



---

archive/issue_events_423814.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-18T11:26:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423814"
}
```



---

archive/issue_comments_495081.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2021-03-18T11:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-495081",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_423815.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-13T06:40:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423815"
}
```



---

archive/issue_events_423816.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-13T06:40:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423816"
}
```

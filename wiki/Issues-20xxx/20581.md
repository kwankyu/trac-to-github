# Issue 20581: Upgrade PARI to latest master

archive/issues_020344.json:
```json
{
    "body": "Some recent fixes needed to correctly count points on hyperelliptic curves.\n\n**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz\n\n**CC:**  @jdemeyer @kedlaya @kiwifb\n\n**Keywords:** days74\n\n**Branch/Commit:** [bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)\n\n**Reviewer:** Jean-Pierre Flori, Peter Bruin\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/20581\n\n",
    "closed_at": "2016-06-23T17:14:00Z",
    "created_at": "2016-05-09T22:45:28Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.3",
    "title": "Upgrade PARI to latest master",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/20581",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
Some recent fixes needed to correctly count points on hyperelliptic curves.

**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz

**CC:**  @jdemeyer @kedlaya @kiwifb

**Keywords:** days74

**Branch/Commit:** [bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)

**Reviewer:** Jean-Pierre Flori, Peter Bruin

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/20581





---

archive/issue_comments_300065.json:
```json
{
    "body": "<a id='comment:1'></a>\n`@`Jeroen: you already did the upgrade a bunch of time IIRC.\nI could try to review the ticket (which should be trivial) while I have some time this week.\n(Later than that I can not promise anything.)",
    "created_at": "2016-05-09T22:47:22Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300065",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:1'></a>
`@`Jeroen: you already did the upgrade a bunch of time IIRC.
I could try to review the ticket (which should be trivial) while I have some time this week.
(Later than that I can not promise anything.)



---

archive/issue_comments_300066.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2016-05-10T07:48:28Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300066",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_300067.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Some recent fixes needed to correctly count points on hyperelliptic curves.\n+\n+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz\n``````\n",
    "created_at": "2016-05-10T08:24:48Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300067",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Some recent fixes needed to correctly count points on hyperelliptic curves.
+
+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz
``````




---

archive/issue_comments_300068.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)",
    "created_at": "2016-05-10T16:13:14Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300068",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)



---

archive/issue_comments_300069.json:
```json
{
    "body": "<a id='comment:6'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7\">1f90f95</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>\n",
    "created_at": "2016-05-10T16:13:37Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300069",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7">1f90f95</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>




---

archive/issue_events_186059.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-10T16:13:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186059"
}
```



---

archive/issue_comments_300070.json:
```json
{
    "body": "**Commit:** [1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)",
    "created_at": "2016-05-10T16:13:37Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300070",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)



---

archive/issue_comments_300071.json:
```json
{
    "body": "<a id='comment:7'></a>\nI see a lot of functions' signatures changed because of the addition of the const modifier.\nWas it on purpose? (IIRC Cython does not care about constness anyway.)",
    "created_at": "2016-05-11T15:23:13Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300071",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
I see a lot of functions' signatures changed because of the addition of the const modifier.
Was it on purpose? (IIRC Cython does not care about constness anyway.)



---

archive/issue_comments_300072.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jpflori](#comment%3A7):\n> Was it on purpose? (IIRC Cython does not care about constness anyway.)\n\nWell, I just took the declarations from PARI and they have `const` in them. And it's true that it probably does not matter for Cython anyway.",
    "created_at": "2016-05-11T15:42:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300072",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [jpflori](#comment%3A7):
> Was it on purpose? (IIRC Cython does not care about constness anyway.)

Well, I just took the declarations from PARI and they have `const` in them. And it's true that it probably does not matter for Cython anyway.



---

archive/issue_events_186060.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-05-11T22:34:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186060"
}
```



---

archive/issue_events_186061.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-05-11T22:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186061"
}
```



---

archive/issue_comments_300073.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2016-05-11T22:34:09Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300073",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_300074.json:
```json
{
    "body": "<a id='comment:10'></a>\nI'm getting failures on OSX\n\n```\nIn file included from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:324:0:\n/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:16:48: error: unknown type name 'ulong'\n hashtable *hashstr_import_static(hashentry *e, ulong size);\n                                                ^\nIn file included from /Users/buildslave-sage/slave/sage_git/build/local/include/pari/pari.h:39:0,\n                 from /Users/buildslave-sage/slave/sage_git/build/src/sage/libs/pari/parisage.h:3,\n                 from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:320:\n/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h: In function 'clone_lock':\n/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:36:25: error: 'ulong' undeclared (first use in this function)\n clone_lock(GEN C) { if (isclone(C)) ++bl_refc(C); }\n\n```",
    "created_at": "2016-05-19T17:27:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300074",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
I'm getting failures on OSX

```
In file included from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:324:0:
/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:16:48: error: unknown type name 'ulong'
 hashtable *hashstr_import_static(hashentry *e, ulong size);
                                                ^
In file included from /Users/buildslave-sage/slave/sage_git/build/local/include/pari/pari.h:39:0,
                 from /Users/buildslave-sage/slave/sage_git/build/src/sage/libs/pari/parisage.h:3,
                 from /Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/libs/pari/handle_error.c:320:
/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h: In function 'clone_lock':
/Users/buildslave-sage/slave/sage_git/build/local/include/pari/paripriv.h:36:25: error: 'ulong' undeclared (first use in this function)
 clone_lock(GEN C) { if (isclone(C)) ++bl_refc(C); }

```



---

archive/issue_events_186062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-19T17:27:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186062"
}
```



---

archive/issue_events_186063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-05-19T17:27:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186063"
}
```



---

archive/issue_comments_300075.json:
```json
{
    "body": "<a id='comment:11'></a>\nFLINT and PARI `ulong` mess...\nI guess that `handle_error.pxd` pulls the PARI headers and `parisage.h` which undefs `ulong` and when `handle_error.pyx` is treated and pulls in `paripriv.h` which wants `ulong` we lose...\nNot sure what the cleanest solution would be.\nMaybe `#define pari_ulong` in `parisage.h` and define/undefine `ulong` in a custom `pariprivsage.h` which pulls `paripriv.h` in (just as `parisage.h` does for `pari.h`).",
    "created_at": "2016-05-23T08:13:03Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300075",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>
FLINT and PARI `ulong` mess...
I guess that `handle_error.pxd` pulls the PARI headers and `parisage.h` which undefs `ulong` and when `handle_error.pyx` is treated and pulls in `paripriv.h` which wants `ulong` we lose...
Not sure what the cleanest solution would be.
Maybe `#define pari_ulong` in `parisage.h` and define/undefine `ulong` in a custom `pariprivsage.h` which pulls `paripriv.h` in (just as `parisage.h` does for `pari.h`).



---

archive/issue_comments_300076.json:
```json
{
    "body": "<a id='comment:12'></a>\nI don't understand why anything would change on OS X...\n\nI do plan to investigate this, but maybe not this week.",
    "created_at": "2016-05-23T08:38:59Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300076",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
I don't understand why anything would change on OS X...

I do plan to investigate this, but maybe not this week.



---

archive/issue_comments_300077.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@jdemeyer](#comment%3A12):\n> I don't understand why anything would change on OS X...\n\nYes that's a mystery as well.",
    "created_at": "2016-05-23T08:50:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300077",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
Replying to [@jdemeyer](#comment%3A12):
> I don't understand why anything would change on OS X...

Yes that's a mystery as well.



---

archive/issue_comments_300078.json:
```json
{
    "body": "<a id='comment:14'></a>\n`@`Volker: can you post the generated C file (`handle_error.c`)?",
    "created_at": "2016-05-23T08:56:57Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300078",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
`@`Volker: can you post the generated C file (`handle_error.c`)?



---

archive/issue_comments_300079.json:
```json
{
    "body": "<a id='comment:15'></a>\nYou have an account on the OSX buildbot, right?",
    "created_at": "2016-05-23T09:40:01Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300079",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
You have an account on the OSX buildbot, right?



---

archive/issue_comments_300080.json:
```json
{
    "body": "<a id='comment:16'></a>\nCannot remember if I have one, nor it's name...",
    "created_at": "2016-05-23T09:51:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300080",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>
Cannot remember if I have one, nor it's name...



---

archive/issue_comments_300081.json:
```json
{
    "body": "<a id='comment:17'></a>\nOk apparently not... if you send me privately your desired account name and Apple ID (for login) then I can make one.",
    "created_at": "2016-05-23T11:47:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300081",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Ok apparently not... if you send me privately your desired account name and Apple ID (for login) then I can make one.



---

archive/issue_comments_300082.json:
```json
{
    "body": "<a id='comment:18'></a>\nThis works by accident on Linux due to this bit in `/usr/include/sys/types.h`:\n\n```\n#ifdef __USE_MISC\n/* Old compatibility names for C types.  */\ntypedef unsigned long int ulong;\ntypedef unsigned short int ushort;\ntypedef unsigned int uint;\n#endif\n```",
    "created_at": "2016-05-30T15:11:20Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300082",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
This works by accident on Linux due to this bit in `/usr/include/sys/types.h`:

```
#ifdef __USE_MISC
/* Old compatibility names for C types.  */
typedef unsigned long int ulong;
typedef unsigned short int ushort;
typedef unsigned int uint;
#endif
```



---

archive/issue_comments_300083.json:
```json
{
    "body": "**Changing commit** from \"[1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)\" to \"[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)\".",
    "created_at": "2016-05-30T15:25:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1f90f95e7c12901dba8078c84a588d9b3cd231a7](https://github.com/sagemath/sagetrac-mirror/commit/1f90f95e7c12901dba8078c84a588d9b3cd231a7)" to "[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)".



---

archive/issue_comments_300084.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1a28882be7edf2d938a5abc22cf2f1e3e6b8398\">b1a2888</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b\">7690e7c</a></td><td><code>Safely include paripriv.h</code></td></tr></table>\n",
    "created_at": "2016-05-30T15:25:15Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1a28882be7edf2d938a5abc22cf2f1e3e6b8398">b1a2888</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b">7690e7c</a></td><td><code>Safely include paripriv.h</code></td></tr></table>




---

archive/issue_comments_300085.json:
```json
{
    "body": "**Changing commit** from \"[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)\" to \"[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)\".",
    "created_at": "2016-05-31T08:30:57Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7690e7cfc166d6026e8be2c09c24ee80ef73426b](https://github.com/sagemath/sagetrac-mirror/commit/7690e7cfc166d6026e8be2c09c24ee80ef73426b)" to "[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)".



---

archive/issue_comments_300086.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87\">3b7c890</a></td><td><code>Undefining ulong does not work</code></td></tr></table>\n",
    "created_at": "2016-05-31T08:30:57Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87">3b7c890</a></td><td><code>Undefining ulong does not work</code></td></tr></table>




---

archive/issue_comments_300087.json:
```json
{
    "body": "<a id='comment:21'></a>\nIs that because of typedef?",
    "created_at": "2016-05-31T08:56:28Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300087",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
Is that because of typedef?



---

archive/issue_comments_300088.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jpflori](#comment%3A21):\n> Is that because of typedef?\n\nNo, the problem is that `ulong` appears also indirectly in macros. For example, the `typ()` macro in PARI uses `ulong`.",
    "created_at": "2016-05-31T09:06:27Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300088",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
Replying to [jpflori](#comment%3A21):
> Is that because of typedef?

No, the problem is that `ulong` appears also indirectly in macros. For example, the `typ()` macro in PARI uses `ulong`.



---

archive/issue_events_186064.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-31T09:10:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186064"
}
```



---

archive/issue_events_186065.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-05-31T09:10:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186065"
}
```



---

archive/issue_comments_300089.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days74\".",
    "created_at": "2016-06-01T05:46:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300089",
    "user": "https://github.com/tscrim"
}
```

**Changing keywords** from "" to "days74".



---

archive/issue_comments_300090.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a3a3e7c3dd7e4071b7a4285321080b2f09f6c9\">e9a3a3e</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91\">5a46139</a></td><td><code>Undefining ulong does not work</code></td></tr></table>\n",
    "created_at": "2016-06-15T13:17:01Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a3a3e7c3dd7e4071b7a4285321080b2f09f6c9">e9a3a3e</a></td><td><code>Upgrade PARI to latest master</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91">5a46139</a></td><td><code>Undefining ulong does not work</code></td></tr></table>




---

archive/issue_comments_300091.json:
```json
{
    "body": "**Changing commit** from \"[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)\" to \"[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)\".",
    "created_at": "2016-06-15T13:17:01Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3b7c89077f2319c88fc92297685e47ced319aa87](https://github.com/sagemath/sagetrac-mirror/commit/3b7c89077f2319c88fc92297685e47ced319aa87)" to "[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)".



---

archive/issue_comments_300092.json:
```json
{
    "body": "<a id='comment:26'></a>\nRebased on latest develop.",
    "created_at": "2016-06-15T13:17:26Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300092",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Rebased on latest develop.



---

archive/issue_comments_300093.json:
```json
{
    "body": "<a id='comment:27'></a>\nNote in case you intend to update this ticket to the very latest PARI version: if you do so, you can remove `build/pkgs/pari/patches/do_QXQ_eval.patch` (added in #20749, corresponding to upstream commit 6db8fba).",
    "created_at": "2016-06-15T13:31:47Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300093",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:27'></a>
Note in case you intend to update this ticket to the very latest PARI version: if you do so, you can remove `build/pkgs/pari/patches/do_QXQ_eval.patch` (added in #20749, corresponding to upstream commit 6db8fba).



---

archive/issue_comments_300094.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Some recent fixes needed to correctly count points on hyperelliptic curves.\n \n-**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz\n+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz\n``````\n",
    "created_at": "2016-06-15T15:04:39Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300094",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Some recent fixes needed to correctly count points on hyperelliptic curves.
 
-**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2670-g9b4a64c.tar.gz
+**Tarball**: http://sage.ugent.be/www/jdemeyer/sage/pari-2.8-2771-gb70b447.tar.gz
``````




---

archive/issue_events_186066.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T15:04:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186066"
}
```



---

archive/issue_events_186067.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T15:04:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186067"
}
```



---

archive/issue_comments_300095.json:
```json
{
    "body": "**Changing commit** from \"[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)\" to \"[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)\".",
    "created_at": "2016-06-15T16:43:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5a461395244933a16e9b578eeca63b586f861e91](https://github.com/sagemath/sagetrac-mirror/commit/5a461395244933a16e9b578eeca63b586f861e91)" to "[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)".



---

archive/issue_comments_300096.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c\">e796224</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>\n",
    "created_at": "2016-06-15T16:43:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c">e796224</a></td><td><code>Upgrade PARI to latest master</code></td></tr></table>




---

archive/issue_events_186068.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T16:44:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186068"
}
```



---

archive/issue_events_186069.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-15T16:44:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186069"
}
```



---

archive/issue_comments_300097.json:
```json
{
    "body": "<a id='comment:30'></a>\nUpgraded to really latest master.",
    "created_at": "2016-06-15T16:44:40Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300097",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Upgraded to really latest master.



---

archive/issue_comments_300098.json:
```json
{
    "body": "**Changing reviewer** from \"Jean-Pierre Flori\" to \"Jean-Pierre Flori, Peter Bruin\".",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300098",
    "user": "https://github.com/pjbruin"
}
```

**Changing reviewer** from "Jean-Pierre Flori" to "Jean-Pierre Flori, Peter Bruin".



---

archive/issue_comments_300099.json:
```json
{
    "body": "**Changing commit** from \"[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)\" to \"[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)\".",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300099",
    "user": "https://github.com/pjbruin"
}
```

**Changing commit** from "[e796224eafee210bc2711d67afc9ffc59779208c](https://github.com/sagemath/sagetrac-mirror/commit/e796224eafee210bc2711d67afc9ffc59779208c)" to "[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)".



---

archive/issue_comments_300100.json:
```json
{
    "body": "<a id='comment:31'></a>\nTwo small patches; the second one mirrors the changes to `paridecl.h` made in upstream commit 0d28865 (split FpXQX_factor.c from FpX_factor.c).",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300100",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:31'></a>
Two small patches; the second one mirrors the changes to `paridecl.h` made in upstream commit 0d28865 (split FpXQX_factor.c from FpX_factor.c).



---

archive/issue_comments_300101.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)\" to \"[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)\".",
    "created_at": "2016-06-20T09:06:54Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300101",
    "user": "https://github.com/pjbruin"
}
```

**Changing branch** from "[u/jdemeyer/upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/upgrade_pari_to_latest_master)" to "[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)".



---

archive/issue_comments_300102.json:
```json
{
    "body": "<a id='comment:32'></a>\nLooks good to me, and doctests pass on GNU/Linux x86_64.  If you are happy with the above patches and the `ulong` problem on OSX has been resolved, this can get a positive review as far as I'm concerned.",
    "created_at": "2016-06-20T09:59:21Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300102",
    "user": "https://github.com/pjbruin"
}
```

<a id='comment:32'></a>
Looks good to me, and doctests pass on GNU/Linux x86_64.  If you are happy with the above patches and the `ulong` problem on OSX has been resolved, this can get a positive review as far as I'm concerned.



---

archive/issue_events_186070.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-20T10:01:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186070"
}
```



---

archive/issue_events_186071.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-06-20T10:01:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186071"
}
```



---

archive/issue_events_186072.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-21T20:37:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186072"
}
```



---

archive/issue_events_186073.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-21T20:37:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186073"
}
```



---

archive/issue_comments_300103.json:
```json
{
    "body": "<a id='comment:34'></a>\n\n```\nsage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed\nsage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed\n```",
    "created_at": "2016-06-21T20:37:34Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300103",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>

```
sage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed
sage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed
```



---

archive/issue_comments_300104.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [@vbraun](#comment%3A34):\n> \n> ```\n> sage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed\n> sage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed\n> ```\n\nI honestly thought those were caused by #15692 rather than this one.",
    "created_at": "2016-06-21T20:55:35Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300104",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:35'></a>
Replying to [@vbraun](#comment%3A34):
> 
> ```
> sage -t --long src/sage/modular/dirichlet.py  # 1 doctest failed
> sage -t --long src/sage/modular/overconvergent/weightspace.py  # 2 doctests failed
> ```

I honestly thought those were caused by #15692 rather than this one.



---

archive/issue_comments_300105.json:
```json
{
    "body": "<a id='comment:36'></a>\nmaybe, let me double check...",
    "created_at": "2016-06-21T20:56:32Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300105",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>
maybe, let me double check...



---

archive/issue_events_186074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-21T21:44:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186074"
}
```



---

archive/issue_events_186075.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-21T21:44:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186075"
}
```



---

archive/issue_comments_300106.json:
```json
{
    "body": "**Changing branch** from \"[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)\" to \"[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)\".",
    "created_at": "2016-06-23T17:14:00Z",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/20581#issuecomment-300106",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/pbruin/20581-upgrade_pari_to_latest_master](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/20581-upgrade_pari_to_latest_master)" to "[bedff7be09d52fc7eba721074eaab6ad5607876b](https://github.com/sagemath/sagetrac-mirror/commit/bedff7be09d52fc7eba721074eaab6ad5607876b)".



---

archive/issue_events_186076.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-06-23T17:14:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186076"
}
```



---

archive/issue_events_186077.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f867df32d4c5971e2e4cdfa93f619fc087bb9e41",
    "created_at": "2016-06-23T17:14:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/20581",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/20581#event-186077"
}
```

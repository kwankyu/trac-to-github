# Issue 28114: Back tableaux by Numpy arrays where possible

archive/issues_027877.json:
```json
{
    "body": "As #28106 demonstrates, although it is perhaps a somewhat extreme case, constructing large classes of tableaux can be very memory-hungry, as the `StandardTableaux(50)` case demonstrates (it chews up nearly a gigabyte of RAM).\n\nIn many cases, most individual tableaux can be represented as a single flat numpy array of small ints (8-bit unsigned for example) containing their shape data, which would save significant space.  Having tableaux stored as Numpy arrays may also help speed up some algorithms, but I'm not sure about any specific cases.\n\n**CC:**  @nthiery zerline @hivert @tscrim\n\nIssue created by migration from https://trac.sagemath.org/ticket/28114\n\n",
    "created_at": "2019-07-04T12:32:36Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "title": "Back tableaux by Numpy arrays where possible",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/28114",
    "user": "https://github.com/embray"
}
```
As #28106 demonstrates, although it is perhaps a somewhat extreme case, constructing large classes of tableaux can be very memory-hungry, as the `StandardTableaux(50)` case demonstrates (it chews up nearly a gigabyte of RAM).

In many cases, most individual tableaux can be represented as a single flat numpy array of small ints (8-bit unsigned for example) containing their shape data, which would save significant space.  Having tableaux stored as Numpy arrays may also help speed up some algorithms, but I'm not sure about any specific cases.

**CC:**  @nthiery zerline @hivert @tscrim

Issue created by migration from https://trac.sagemath.org/ticket/28114





---

archive/issue_comments_440251.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks for the update. The plan was to use ClonableArray's / IntArrays. Numpy arrays could be an alternative indeed.",
    "created_at": "2019-07-04T12:39:11Z",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28114#issuecomment-440251",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:1'></a>
Thanks for the update. The plan was to use ClonableArray's / IntArrays. Numpy arrays could be an alternative indeed.



---

archive/issue_comments_440252.json:
```json
{
    "body": "<a id='comment:2'></a>\nI wondered if maybe that was a possibility as well, but 8-bit numpy arrays would still probably be the most efficient.\n\nI figured it was probably considered before but I didn't see a ticket for it.",
    "created_at": "2019-07-04T12:41:40Z",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28114#issuecomment-440252",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
I wondered if maybe that was a possibility as well, but 8-bit numpy arrays would still probably be the most efficient.

I figured it was probably considered before but I didn't see a ticket for it.



---

archive/issue_comments_440253.json:
```json
{
    "body": "<a id='comment:3'></a>\nAlso doctesting `sage -t --long src/sage/combinat/tableau.py` uses over a gigabyte of ram (RSS), what are you testing that you can't test in, say, half a gig of ram? This is probably the most memory-hungry file in the testsuite.",
    "created_at": "2019-07-13T09:41:35Z",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28114#issuecomment-440253",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
Also doctesting `sage -t --long src/sage/combinat/tableau.py` uses over a gigabyte of ram (RSS), what are you testing that you can't test in, say, half a gig of ram? This is probably the most memory-hungry file in the testsuite.



---

archive/issue_events_250568.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250568"
}
```



---

archive/issue_events_250569.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250569"
}
```



---

archive/issue_comments_440254.json:
```json
{
    "body": "<a id='comment:4'></a>\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28114#issuecomment-440254",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
Ticket retargeted after milestone closed



---

archive/issue_events_250570.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250570"
}
```



---

archive/issue_events_250571.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250571"
}
```



---

archive/issue_comments_440255.json:
```json
{
    "body": "<a id='comment:5'></a>\nBatch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28114#issuecomment-440255",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_250572.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250572"
}
```



---

archive/issue_events_250573.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250573"
}
```



---

archive/issue_comments_440256.json:
```json
{
    "body": "<a id='comment:7'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/28114#issuecomment-440256",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_250574.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250574"
}
```



---

archive/issue_events_250575.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250575"
}
```



---

archive/issue_events_250576.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250576"
}
```



---

archive/issue_events_250577.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250577"
}
```



---

archive/issue_events_250578.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250578"
}
```



---

archive/issue_events_250579.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250579"
}
```



---

archive/issue_events_250580.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T04:32:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250580"
}
```



---

archive/issue_events_250581.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T04:32:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250581"
}
```



---

archive/issue_events_250582.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250582"
}
```



---

archive/issue_events_250583.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/28114",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/28114#event-250583"
}
```

# Issue 25677: py3: normalize repr of bound methods in doctest results

archive/issues_025440.json:
```json
{
    "body": "Another fixer-upper for another very common (mostly) trivial doctest failure on Python 3.\n\nOn Python 2 bound methods are represented using the class name of the object the method was bound to, whereas on Python 3 they are represented\nwith the fully-qualified name of the function that implements the method.\n\nIn the context of a doctest it's almost impossible to convert accurately from the latter to the former or vice-versa, so we simplify the reprs of bound methods to just the bare method name.\n\nThis is slightly regressive since it means one can't use the repr of a bound method to test whether some element is getting a method from the correct class (imporant sometimes in the cases of dynamic classes).\nHowever, such tests could be written could be written more explicitly to emphasize that they are testing such behavior, and will fail on Python 3 anyways.\n\n\n**Keywords:** doctests\n\n**Branch/Commit:** [4c3e188c2b91108d615019fe869d9d9e66e2fe43](https://github.com/sagemath/sagetrac-mirror/commit/4c3e188c2b91108d615019fe869d9d9e66e2fe43)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/25677\n\n",
    "closed_at": "2018-07-08T13:05:03Z",
    "created_at": "2018-06-27T17:41:03Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "title": "py3: normalize repr of bound methods in doctest results",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/25677",
    "user": "https://github.com/embray"
}
```
Another fixer-upper for another very common (mostly) trivial doctest failure on Python 3.

On Python 2 bound methods are represented using the class name of the object the method was bound to, whereas on Python 3 they are represented
with the fully-qualified name of the function that implements the method.

In the context of a doctest it's almost impossible to convert accurately from the latter to the former or vice-versa, so we simplify the reprs of bound methods to just the bare method name.

This is slightly regressive since it means one can't use the repr of a bound method to test whether some element is getting a method from the correct class (imporant sometimes in the cases of dynamic classes).
However, such tests could be written could be written more explicitly to emphasize that they are testing such behavior, and will fail on Python 3 anyways.


**Keywords:** doctests

**Branch/Commit:** [4c3e188c2b91108d615019fe869d9d9e66e2fe43](https://github.com/sagemath/sagetrac-mirror/commit/4c3e188c2b91108d615019fe869d9d9e66e2fe43)

**Reviewer:** Frédéric Chapoton

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/25677





---

archive/issue_comments_397051.json:
```json
{
    "body": "<a id='comment:1'></a>\nIs this ready for review ?",
    "created_at": "2018-07-04T12:37:56Z",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25677#issuecomment-397051",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
Is this ready for review ?



---

archive/issue_comments_397052.json:
```json
{
    "body": "<a id='comment:2'></a>\nI think so.  I wanted to make sure there weren't any other problems with it or that there weren't some corner cases it wasn't catching.  The latter is still a possibility (hard to know until more of the tests are fixed) but this does fix a lot of tests as is.",
    "created_at": "2018-07-04T16:33:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25677#issuecomment-397052",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
I think so.  I wanted to make sure there weren't any other problems with it or that there weren't some corner cases it wasn't catching.  The latter is still a possibility (hard to know until more of the tests are fixed) but this does fix a lot of tests as is.



---

archive/issue_events_230133.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-07-04T16:33:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25677#event-230133"
}
```



---

archive/issue_comments_397053.json:
```json
{
    "body": "<a id='comment:3'></a>\nthen let us move on",
    "created_at": "2018-07-04T18:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25677#issuecomment-397053",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
then let us move on



---

archive/issue_events_230134.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-04T18:51:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25677#event-230134"
}
```



---

archive/issue_events_230135.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-04T18:51:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25677#event-230135"
}
```



---

archive/issue_comments_397054.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2018-07-04T18:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25677#issuecomment-397054",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_397055.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/python3/doctest/normalize-bound-method-repr](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/doctest/normalize-bound-method-repr)\" to \"[4c3e188c2b91108d615019fe869d9d9e66e2fe43](https://github.com/sagemath/sagetrac-mirror/commit/4c3e188c2b91108d615019fe869d9d9e66e2fe43)\".",
    "created_at": "2018-07-08T13:05:03Z",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25677#issuecomment-397055",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/python3/doctest/normalize-bound-method-repr](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/python3/doctest/normalize-bound-method-repr)" to "[4c3e188c2b91108d615019fe869d9d9e66e2fe43](https://github.com/sagemath/sagetrac-mirror/commit/4c3e188c2b91108d615019fe869d9d9e66e2fe43)".



---

archive/issue_events_230136.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-08T13:05:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25677#event-230136"
}
```



---

archive/issue_events_230137.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "20cfa9e680265e60dec0fe1c85953484c9cdfc0a",
    "created_at": "2018-07-08T13:05:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25677",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25677#event-230137"
}
```

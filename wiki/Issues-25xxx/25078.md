# Issue 25078: ./sage -f sagelib no longer works

archive/issues_024841.json:
```json
{
    "body": "This used to be a convenient way to force-rebuild the whole Sage library:\n\n```\n$ ./sage -f sagelib\n...\nError: package 'sagelib' not found\nNote: if it is an old-style package, use -p instead of -i to install it\n```\n\nSimilar for `./sage -f doc`.\n\n**CC:**  @embray\n\n**Branch/Commit:** [2ad88aefbdf0b048768bb9554cd064d29d231aa0](https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/25078\n\n",
    "closed_at": "2018-04-17T20:29:53Z",
    "created_at": "2018-04-02T09:53:36Z",
    "labels": [
        "component: build",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "title": "./sage -f sagelib no longer works",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/25078",
    "user": "https://github.com/jdemeyer"
}
```
This used to be a convenient way to force-rebuild the whole Sage library:

```
$ ./sage -f sagelib
...
Error: package 'sagelib' not found
Note: if it is an old-style package, use -p instead of -i to install it
```

Similar for `./sage -f doc`.

**CC:**  @embray

**Branch/Commit:** [2ad88aefbdf0b048768bb9554cd064d29d231aa0](https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0)

**Reviewer:** Jeroen Demeyer

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/25078





---

archive/issue_comments_384805.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,3 +6,5 @@\n Error: package 'sagelib' not found\n Note: if it is an old-style package, use -p instead of -i to install it\n ```\n+\n+Similar for `./sage -f doc`.\n``````\n",
    "created_at": "2018-04-02T09:54:42Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384805",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,3 +6,5 @@
 Error: package 'sagelib' not found
 Note: if it is an old-style package, use -p instead of -i to install it
 ```
+
+Similar for `./sage -f doc`.
``````




---

archive/issue_comments_384806.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis reminds me, it's been on my TODO list to just make \"sagelib\" another spkg (with some special disposition that allows its \"source\" to be found and built in a local directory rather than downloaded as a tarball and extracted to a temp dir).  I'm not sure why this would be broken now though.",
    "created_at": "2018-04-03T10:26:53Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384806",
    "user": "https://github.com/embray"
}
```

<a id='comment:2'></a>
This reminds me, it's been on my TODO list to just make "sagelib" another spkg (with some special disposition that allows its "source" to be found and built in a local directory rather than downloaded as a tarball and extracted to a temp dir).  I'm not sure why this would be broken now though.



---

archive/issue_comments_384807.json:
```json
{
    "body": "<a id='comment:3'></a>\nIn `src/bin/sage` there's a kind of hackish \"grep\" of `build/make/Makefile` to ensure that the argument to `./sage -f` (mostly assumed to be name of an SPKG) is actually a make target.  But it seems from the usage you describe here, really `./sage -f` should work for almost any make target, not just SPKGs. \n\nI guess either the check could be made more generic or just removed entirely.\n\nAlso is this actually documented behavior?  If not I wouldn't consider it a \"blocker\".  The `--help` just says of `-f` \"force build of the given Sage packages\".  It's not clear to me whether \"sagelib\" and \"doc\" are considered \"Sage packages\" (per my above comment maybe the should be...)",
    "created_at": "2018-04-03T10:35:21Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384807",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>
In `src/bin/sage` there's a kind of hackish "grep" of `build/make/Makefile` to ensure that the argument to `./sage -f` (mostly assumed to be name of an SPKG) is actually a make target.  But it seems from the usage you describe here, really `./sage -f` should work for almost any make target, not just SPKGs. 

I guess either the check could be made more generic or just removed entirely.

Also is this actually documented behavior?  If not I wouldn't consider it a "blocker".  The `--help` just says of `-f` "force build of the given Sage packages".  It's not clear to me whether "sagelib" and "doc" are considered "Sage packages" (per my above comment maybe the should be...)



---

archive/issue_comments_384808.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [@embray](#comment%3A3):\n> Also is this actually documented behavior?\n\nI don't think so, but it should be. I have certainly recommended running `./sage -f sagelib` to people.",
    "created_at": "2018-04-03T20:32:52Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384808",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [@embray](#comment%3A3):
> Also is this actually documented behavior?

I don't think so, but it should be. I have certainly recommended running `./sage -f sagelib` to people.



---

archive/issue_comments_384809.json:
```json
{
    "body": "<a id='comment:5'></a>\nWell how would you suggest handling it?  IMO the actual behavior you desire should be documented before moving forward on fixing it.  What targets should it work for?  Just \"sagelib\" and \"doc\"?  Or others as well?  Previously, it technically worked for any target in the Makefile.",
    "created_at": "2018-04-04T09:09:35Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384809",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
Well how would you suggest handling it?  IMO the actual behavior you desire should be documented before moving forward on fixing it.  What targets should it work for?  Just "sagelib" and "doc"?  Or others as well?  Previously, it technically worked for any target in the Makefile.



---

archive/issue_comments_384810.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [@embray](#comment%3A5):\n> Previously, it technically worked for any target in the Makefile.\n\nIt is actually by design that `./sage -i` works that way. So maybe the easiest fix is removing this check:\n\n```\n        # First check that $PKG is actually a Makefile target\n        # Since https://trac.sagemath.org/ticket/21524 there is not explicitly\n        # a target for the package, but if it has a vers_<pkgname> variable\n        # there will also be a generated rule for it\n        if ! grep \"^vers_$PKG = \" build/make/Makefile >/dev/null; then\n            echo >&2 \"Error: package '$PKG' not found\"\n            echo >&2 \"Note: if it is an old-style package, use -p instead of -i to install it\"\n            exit 1\n        fi\n```",
    "created_at": "2018-04-04T13:29:35Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384810",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [@embray](#comment%3A5):
> Previously, it technically worked for any target in the Makefile.

It is actually by design that `./sage -i` works that way. So maybe the easiest fix is removing this check:

```
        # First check that $PKG is actually a Makefile target
        # Since https://trac.sagemath.org/ticket/21524 there is not explicitly
        # a target for the package, but if it has a vers_<pkgname> variable
        # there will also be a generated rule for it
        if ! grep "^vers_$PKG = " build/make/Makefile >/dev/null; then
            echo >&2 "Error: package '$PKG' not found"
            echo >&2 "Note: if it is an old-style package, use -p instead of -i to install it"
            exit 1
        fi
```



---

archive/issue_comments_384811.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)",
    "created_at": "2018-04-05T08:38:54Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384811",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)



---

archive/issue_comments_384812.json:
```json
{
    "body": "**Commit:** [98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)",
    "created_at": "2018-04-05T08:40:01Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384812",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)



---

archive/issue_comments_384813.json:
```json
{
    "body": "<a id='comment:8'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559\">98db16e</a></td><td><code>Remove Makefile target check</code></td></tr></table>\n",
    "created_at": "2018-04-05T08:40:01Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384813",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559">98db16e</a></td><td><code>Remove Makefile target check</code></td></tr></table>




---

archive/issue_events_224392.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-05T08:40:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224392"
}
```



---

archive/issue_comments_384814.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2018-04-05T08:40:01Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384814",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_384815.json:
```json
{
    "body": "**Reviewer:** Erik Bray",
    "created_at": "2018-04-05T09:25:11Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384815",
    "user": "https://github.com/embray"
}
```

**Reviewer:** Erik Bray



---

archive/issue_comments_384816.json:
```json
{
    "body": "<a id='comment:9'></a>\nFWIW I don't think 'build' commands should be combined into Sage's runtime interface at all.  The sole exception might be `sage -i` (or an equivalent) for installing optional packages, and even that has its problems.",
    "created_at": "2018-04-05T09:25:11Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384816",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
FWIW I don't think 'build' commands should be combined into Sage's runtime interface at all.  The sole exception might be `sage -i` (or an equivalent) for installing optional packages, and even that has its problems.



---

archive/issue_events_224393.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-05T09:25:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224393"
}
```



---

archive/issue_events_224394.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-05T09:25:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224394"
}
```



---

archive/issue_events_224395.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-05T09:29:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224395"
}
```



---

archive/issue_events_224396.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-05T09:29:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224396"
}
```



---

archive/issue_comments_384817.json:
```json
{
    "body": "<a id='comment:10'></a>\nActually, upon testing this I take it back.  This is rather user-hostile because if you run `./sage -i <unknown_or_misspelled_package>` it will still just fire up make, possibly rebuild some other things (as it did for me, since I had to rebuild my toolchain packages due to previous tinkering) and only much later give an error from `make` that the target is not found (and a hard to understand error, at that, if you don't know what you're looking for).",
    "created_at": "2018-04-05T09:29:11Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384817",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
Actually, upon testing this I take it back.  This is rather user-hostile because if you run `./sage -i <unknown_or_misspelled_package>` it will still just fire up make, possibly rebuild some other things (as it did for me, since I had to rebuild my toolchain packages due to previous tinkering) and only much later give an error from `make` that the target is not found (and a hard to understand error, at that, if you don't know what you're looking for).



---

archive/issue_comments_384818.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)\" to \"[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)\".",
    "created_at": "2018-04-05T10:04:58Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384818",
    "user": "https://github.com/embray"
}
```

**Changing branch** from "[u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)" to "[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)".



---

archive/issue_comments_384819.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhat about something like this?  If you run `make list` it simply prints a list of all the packages the makefile knows about, as well as some additional \"packages\" listed in the `SAGE_I_TARGETS` variable.  Ccurrently just \"sagelib\" and \"doc\" but others could be added--though I don't think *every* makefile target is necessarily useful or valid in this context.",
    "created_at": "2018-04-05T10:04:58Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384819",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
What about something like this?  If you run `make list` it simply prints a list of all the packages the makefile knows about, as well as some additional "packages" listed in the `SAGE_I_TARGETS` variable.  Ccurrently just "sagelib" and "doc" but others could be added--though I don't think *every* makefile target is necessarily useful or valid in this context.



---

archive/issue_comments_384820.json:
```json
{
    "body": "**Changing commit** from \"[98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)\" to \"\".",
    "created_at": "2018-04-05T10:04:58Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384820",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)" to "".



---

archive/issue_comments_384821.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396\">a72231b</a></td><td><code>Have the makefile itself provide a list of the valid targets that can be used with sage -i, for example.</code></td></tr></table>\n",
    "created_at": "2018-04-05T10:05:20Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384821",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396">a72231b</a></td><td><code>Have the makefile itself provide a list of the valid targets that can be used with sage -i, for example.</code></td></tr></table>




---

archive/issue_comments_384822.json:
```json
{
    "body": "**Commit:** [a72231b28c624845f886381ceb8e001f640ed396](https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396)",
    "created_at": "2018-04-05T10:05:20Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384822",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [a72231b28c624845f886381ceb8e001f640ed396](https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396)



---

archive/issue_comments_384823.json:
```json
{
    "body": "**Changing commit** from \"[a72231b28c624845f886381ceb8e001f640ed396](https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396)\" to \"[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)\".",
    "created_at": "2018-04-05T10:16:10Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a72231b28c624845f886381ceb8e001f640ed396](https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396)" to "[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)".



---

archive/issue_comments_384824.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223\">5a0e558</a></td><td><code>Some minor tweaks--in particular package names must be spelled exactly</code></td></tr></table>\n",
    "created_at": "2018-04-05T10:16:10Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223">5a0e558</a></td><td><code>Some minor tweaks--in particular package names must be spelled exactly</code></td></tr></table>




---

archive/issue_comments_384825.json:
```json
{
    "body": "<a id='comment:14'></a>\nI agree with Erik that the misspelt package names are a nuisance, resulting in misleading logs.",
    "created_at": "2018-04-05T10:20:14Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384825",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
I agree with Erik that the misspelt package names are a nuisance, resulting in misleading logs.



---

archive/issue_comments_384826.json:
```json
{
    "body": "**Changing commit** from \"[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)\" to \"[98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)\".",
    "created_at": "2018-04-05T10:20:14Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384826",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)" to "[98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)".



---

archive/issue_comments_384827.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)\" to \"[u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)\".",
    "created_at": "2018-04-05T10:20:14Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384827",
    "user": "https://github.com/dimpase"
}
```

**Changing branch** from "[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)" to "[u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)".



---

archive/issue_comments_384828.json:
```json
{
    "body": "**Changing commit** from \"[98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)\" to \"[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)\".",
    "created_at": "2018-04-05T12:04:50Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384828",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[98db16e5ef2bde43c5b6b2eb9dad030a18640559](https://github.com/sagemath/sagetrac-mirror/commit/98db16e5ef2bde43c5b6b2eb9dad030a18640559)" to "[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)".



---

archive/issue_comments_384829.json:
```json
{
    "body": "<a id='comment:15'></a>\nI don't think Dima intended to change the branch...\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396\">a72231b</a></td><td><code>Have the makefile itself provide a list of the valid targets that can be used with sage -i, for example.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223\">5a0e558</a></td><td><code>Some minor tweaks--in particular package names must be spelled exactly</code></td></tr></table>\n",
    "created_at": "2018-04-05T12:04:50Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384829",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
I don't think Dima intended to change the branch...

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a72231b28c624845f886381ceb8e001f640ed396">a72231b</a></td><td><code>Have the makefile itself provide a list of the valid targets that can be used with sage -i, for example.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223">5a0e558</a></td><td><code>Some minor tweaks--in particular package names must be spelled exactly</code></td></tr></table>




---

archive/issue_comments_384830.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)\" to \"[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)\".",
    "created_at": "2018-04-05T12:04:50Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384830",
    "user": "https://github.com/embray"
}
```

**Changing branch** from "[u/jdemeyer/__sage__f_sagelib_no_longer_works](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__sage__f_sagelib_no_longer_works)" to "[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)".



---

archive/issue_comments_384831.json:
```json
{
    "body": "<a id='comment:16'></a>\napologies for messing up the branch.\nI forgot that this happens if the ticket was changed in the meantime, and I didn't click somthing (I am hopeless with GUIs in general :-))",
    "created_at": "2018-04-05T12:14:24Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384831",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
apologies for messing up the branch.
I forgot that this happens if the ticket was changed in the meantime, and I didn't click somthing (I am hopeless with GUIs in general :-))



---

archive/issue_comments_384832.json:
```json
{
    "body": "<a id='comment:17'></a>\nNo problem I've done that too.",
    "created_at": "2018-04-05T14:48:38Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384832",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
No problem I've done that too.



---

archive/issue_comments_384833.json:
```json
{
    "body": "<a id='comment:18'></a>\nneeds review?",
    "created_at": "2018-04-11T09:57:48Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384833",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
needs review?



---

archive/issue_events_224397.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-11T13:13:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224397"
}
```



---

archive/issue_events_224398.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-11T13:13:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224398"
}
```



---

archive/issue_comments_384834.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [@jdemeyer](#comment%3A18):\n> needs review?\n\nI guess, if you agree with my general analysis of the situation.  I posted my branch as an offer for an alternative solution, but it only \"needs review\" if you agree with my previous comments.",
    "created_at": "2018-04-11T13:13:22Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384834",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Replying to [@jdemeyer](#comment%3A18):
> needs review?

I guess, if you agree with my general analysis of the situation.  I posted my branch as an offer for an alternative solution, but it only "needs review" if you agree with my previous comments.



---

archive/issue_events_224399.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-12T11:36:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224399"
}
```



---

archive/issue_events_224400.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-12T11:36:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224400"
}
```



---

archive/issue_comments_384835.json:
```json
{
    "body": "**Changing reviewer** from \"Erik Bray\" to \"Jeroen Demeyer\".",
    "created_at": "2018-04-12T11:36:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384835",
    "user": "https://github.com/jdemeyer"
}
```

**Changing reviewer** from "Erik Bray" to "Jeroen Demeyer".



---

archive/issue_comments_384836.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer\" to \"Erik Bray\".",
    "created_at": "2018-04-12T11:36:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384836",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Jeroen Demeyer" to "Erik Bray".



---

archive/issue_comments_384837.json:
```json
{
    "body": "<a id='comment:20'></a>\nWhat's the point of\n\n```\n@$(MAKE) -q build/make/Makefile >&2\n```\nWouldn't it make more sense to actually build `build/make/Makefile`?",
    "created_at": "2018-04-12T11:36:15Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384837",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
What's the point of

```
@$(MAKE) -q build/make/Makefile >&2
```
Wouldn't it make more sense to actually build `build/make/Makefile`?



---

archive/issue_comments_384838.json:
```json
{
    "body": "<a id='comment:21'></a>\nApart from that, this works fine.",
    "created_at": "2018-04-12T11:38:36Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384838",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Apart from that, this works fine.



---

archive/issue_comments_384839.json:
```json
{
    "body": "<a id='comment:22'></a>\nI think you misread that line.  That's exactly what it's doing.",
    "created_at": "2018-04-12T11:48:13Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384839",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
I think you misread that line.  That's exactly what it's doing.



---

archive/issue_events_224401.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-12T11:48:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224401"
}
```



---

archive/issue_events_224402.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-12T11:48:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224402"
}
```



---

archive/issue_comments_384840.json:
```json
{
    "body": "<a id='comment:23'></a>\nI think you either misread the `make` manpage or you have a different version of `make` than me.\n\n```\n       -q, --question\n            ``Question mode''.  Do not run any commands, or print anything; just return an exit status that  is  zero  if  the  specified  targets  are\n            already up to date, nonzero otherwise.\n```",
    "created_at": "2018-04-12T18:12:18Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384840",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
I think you either misread the `make` manpage or you have a different version of `make` than me.

```
       -q, --question
            ``Question mode''.  Do not run any commands, or print anything; just return an exit status that  is  zero  if  the  specified  targets  are
            already up to date, nonzero otherwise.
```



---

archive/issue_events_224403.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-13T07:24:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224403"
}
```



---

archive/issue_events_224404.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-13T07:24:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224404"
}
```



---

archive/issue_comments_384841.json:
```json
{
    "body": "<a id='comment:25'></a>\nOops, sorry, you're right.  I had it confused with `-s` for `--silent` (which confusingly can also be spelled `--quiet`, but *not* `-q`).",
    "created_at": "2018-04-13T13:45:20Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384841",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'></a>
Oops, sorry, you're right.  I had it confused with `-s` for `--silent` (which confusingly can also be spelled `--quiet`, but *not* `-q`).



---

archive/issue_comments_384842.json:
```json
{
    "body": "**Changing commit** from \"[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)\" to \"[2ad88aefbdf0b048768bb9554cd064d29d231aa0](https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0)\".",
    "created_at": "2018-04-13T13:47:27Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5a0e5585f6287608b8d2f5246fa340f0cdd06223](https://github.com/sagemath/sagetrac-mirror/commit/5a0e5585f6287608b8d2f5246fa340f0cdd06223)" to "[2ad88aefbdf0b048768bb9554cd064d29d231aa0](https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0)".



---

archive/issue_comments_384843.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0\">2ad88ae</a></td><td><code>this was supposed to be -s, not -q; let's use long names instead so we don't confuse ourselves again</code></td></tr></table>\n",
    "created_at": "2018-04-13T13:47:27Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0">2ad88ae</a></td><td><code>this was supposed to be -s, not -q; let's use long names instead so we don't confuse ourselves again</code></td></tr></table>




---

archive/issue_comments_384844.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe overall intent was so that in the (unusual) case that `build/make/Makefile` has to be generated in order to produce the list, the only output to stdout would still be the list itself.",
    "created_at": "2018-04-13T13:50:37Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384844",
    "user": "https://github.com/embray"
}
```

<a id='comment:27'></a>
The overall intent was so that in the (unusual) case that `build/make/Makefile` has to be generated in order to produce the list, the only output to stdout would still be the list itself.



---

archive/issue_events_224405.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-13T13:50:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224405"
}
```



---

archive/issue_events_224406.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-04-13T13:50:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224406"
}
```



---

archive/issue_events_224407.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-16T08:21:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224407"
}
```



---

archive/issue_events_224408.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-16T08:21:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224408"
}
```



---

archive/issue_events_224409.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-04-17T20:29:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224409"
}
```



---

archive/issue_events_224410.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b47963fb844994cd031bf82f467aa989666307b3",
    "created_at": "2018-04-17T20:29:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/25078#event-224410"
}
```



---

archive/issue_comments_384845.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)\" to \"[2ad88aefbdf0b048768bb9554cd064d29d231aa0](https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0)\".",
    "created_at": "2018-04-17T20:29:53Z",
    "issue": "https://github.com/sagemath/sage/issues/25078",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/25078#issuecomment-384845",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/build/sage-i-valid-targets](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/sage-i-valid-targets)" to "[2ad88aefbdf0b048768bb9554cd064d29d231aa0](https://github.com/sagemath/sagetrac-mirror/commit/2ad88aefbdf0b048768bb9554cd064d29d231aa0)".

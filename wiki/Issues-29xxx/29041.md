# Issue 29041: sage_bootstrap: Add command "sage -package list --output={install-requires,requirements,pipfile,debian,....}"

archive/issues_028804.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nWe extend the `sage_bootstrap` package to add the commands:\n- `sage -package list --output=install-requires PACKAGES...` (for #30913)\n- `sage -package list --output=requirements PACKAGES...`\n- `sage -package list --output=pipfile PACKAGES...`\n- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)\n\nThey generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages \n\n`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n\n---\n\nReferences: \n\n- https://pip.pypa.io/en/stable/user_guide/#requirements-files\n- https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n- https://packaging.python.org/discussions/install-requires-vs-requirements/\n- https://pypi.org/project/install-requires/\n\nCC:  @seblabbe @dimpase @embray @vbraun @kiwifb @tobihan @tobiasdiez\n\nComponent: **build**\n\nKeywords: **sd111**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/29041_\n\n",
    "created_at": "2020-01-18T21:43:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\"",
    "type": "issue",
    "updated_at": "2023-01-29T23:06:23Z",
    "url": "https://github.com/sagemath/sage/issues/29041",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

We extend the `sage_bootstrap` package to add the commands:
- `sage -package list --output=install-requires PACKAGES...` (for #30913)
- `sage -package list --output=requirements PACKAGES...`
- `sage -package list --output=pipfile PACKAGES...`
- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)

They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages 

`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.

---

References: 

- https://pip.pypa.io/en/stable/user_guide/#requirements-files
- https://pipenv-fork.readthedocs.io/en/latest/advanced.html
- https://packaging.python.org/discussions/install-requires-vs-requirements/
- https://pypi.org/project/install-requires/

CC:  @seblabbe @dimpase @embray @vbraun @kiwifb @tobihan @tobiasdiez

Component: **build**

Keywords: **sd111**

_Issue created by migration from https://trac.sagemath.org/ticket/29041_





---

archive/issue_events_396512.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-18T21:43:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396512"
}
```



---

archive/issue_events_396513.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-18T21:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396513"
}
```



---

archive/issue_events_396514.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-18T21:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396514"
}
```



---

archive/issue_events_396515.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-18T21:43:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396515"
}
```



---

archive/issue_comments_454268.json:
```json
{
    "body": "Branch: **[u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)**",
    "created_at": "2020-01-19T01:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454268",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)**



---

archive/issue_comments_454269.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis is what it could look like - just for a small handful of packages for now\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac\"><code>cfcc9fd</code></a></td><td><code>bootstrap: generate src/requirements.txt, src/constraints.txt, src/setup.cfg [install_requires] from build/pkgs</code></td></tr></table>\n",
    "created_at": "2020-01-19T01:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454269",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

This is what it could look like - just for a small handful of packages for now

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac"><code>cfcc9fd</code></a></td><td><code>bootstrap: generate src/requirements.txt, src/constraints.txt, src/setup.cfg [install_requires] from build/pkgs</code></td></tr></table>




---

archive/issue_comments_454270.json:
```json
{
    "body": "Commit: **[`cfcc9fd`](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)**",
    "created_at": "2020-01-19T01:07:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454270",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`cfcc9fd`](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)**



---

archive/issue_events_396516.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-01-19T01:07:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396516"
}
```



---

archive/issue_comments_454271.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe `apt-get` line in the install manual could be generated in the same way.",
    "created_at": "2020-01-19T01:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454271",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

The `apt-get` line in the install manual could be generated in the same way.



---

archive/issue_comments_454272.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-01-19T01:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454272",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_454273.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@mkoeppe](#comment%3A3):\n> The `apt-get` line in the install manual could be generated in the same way.\n\nThis is #29053.",
    "created_at": "2020-01-20T15:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454273",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@mkoeppe](#comment%3A3):
> The `apt-get` line in the install manual could be generated in the same way.

This is #29053.



---

archive/issue_comments_454274.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI see that only few packages, e.g. pillow, are mentioned in the branch. Are they there as an example?",
    "created_at": "2020-01-21T23:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454274",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

I see that only few packages, e.g. pillow, are mentioned in the branch. Are they there as an example?



---

archive/issue_comments_454275.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, it's an initial example. More can be added on this ticket and/or on follow up tickets.\n\nIt may be the most efficient to first put this infrastructure (and the one for Debian) in place and then do invidual packages one by one to determine useful version bounds.",
    "created_at": "2020-01-21T23:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454275",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, it's an initial example. More can be added on this ticket and/or on follow up tickets.

It may be the most efficient to first put this infrastructure (and the one for Debian) in place and then do invidual packages one by one to determine useful version bounds.



---

archive/issue_comments_454276.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nhow is it going to play out with version constraints in spkg-configure.m4 files?",
    "created_at": "2020-01-21T23:51:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454276",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

how is it going to play out with version constraints in spkg-configure.m4 files?



---

archive/issue_comments_454277.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSo far there are no `spkg-configure.m4` files for any Python packages, and I would hope there will be no need for them.",
    "created_at": "2020-01-21T23:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454277",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

So far there are no `spkg-configure.m4` files for any Python packages, and I would hope there will be no need for them.



---

archive/issue_comments_454278.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nBasically `sagelib-install-requires.txt` will play the same role for Python packages as `spkg-configure.m4` does for non-Python packages, \nand likewise `sagelib-requirements.txt` : `package-version.txt`.",
    "created_at": "2020-01-21T23:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454278",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Basically `sagelib-install-requires.txt` will play the same role for Python packages as `spkg-configure.m4` does for non-Python packages, 
and likewise `sagelib-requirements.txt` : `package-version.txt`.



---

archive/issue_comments_454279.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n@embray If you have time - this ticket is waiting for review.",
    "created_at": "2020-01-31T14:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454279",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

@embray If you have time - this ticket is waiting for review.



---

archive/issue_comments_454280.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSimilar to what I wrote on #26964, I don't think this should be done in the `bootstrap` script.  I don't want this script growing too far beyond its core purpose, which is simply to bootstrap the `configure` script.\n\nThis could be done by `configure` instead, using say a `requirements.txt.in`.",
    "created_at": "2020-02-05T11:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454280",
    "user": "https://github.com/embray"
}
```

<div id="comment:12" align="right">comment:12</div>

Similar to what I wrote on #26964, I don't think this should be done in the `bootstrap` script.  I don't want this script growing too far beyond its core purpose, which is simply to bootstrap the `configure` script.

This could be done by `configure` instead, using say a `requirements.txt.in`.



---

archive/issue_events_396517.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-02-05T11:50:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396517"
}
```



---

archive/issue_events_396518.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-02-05T11:50:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396518"
}
```



---

archive/issue_comments_454281.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSee my comments on #26964.",
    "created_at": "2020-02-05T13:50:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454281",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

See my comments on #26964.



---

archive/issue_events_396519.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-05T18:45:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396519"
}
```



---

archive/issue_events_396520.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-05T18:45:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396520"
}
```



---

archive/issue_comments_454282.json:
```json
{
    "body": "Dependencies: **#29233**",
    "created_at": "2020-02-22T23:14:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454282",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29233**



---

archive/issue_comments_454283.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc97dbb12fcde2981cc0a4ef4bbd4938b5e74dc\"><code>0dc97db</code></a></td><td><code>Clean src/doc/en/installation/*.txt in bootstrap-clean, not misc-clean</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bae1a82e79d7130f228d2da377bf5328710fd1b0\"><code>bae1a82</code></a></td><td><code>Merge branch 't/29233/bootstrap____make_distclean_broken' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6\"><code>4fb30a6</code></a></td><td><code>bootstrap: Add src/constraints.txt etc. to configure tarball</code></td></tr></table>\n",
    "created_at": "2020-02-22T23:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454283",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc97dbb12fcde2981cc0a4ef4bbd4938b5e74dc"><code>0dc97db</code></a></td><td><code>Clean src/doc/en/installation/*.txt in bootstrap-clean, not misc-clean</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bae1a82e79d7130f228d2da377bf5328710fd1b0"><code>bae1a82</code></a></td><td><code>Merge branch 't/29233/bootstrap____make_distclean_broken' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6"><code>4fb30a6</code></a></td><td><code>bootstrap: Add src/constraints.txt etc. to configure tarball</code></td></tr></table>




---

archive/issue_comments_454284.json:
```json
{
    "body": "Changed commit from **[`cfcc9fd`](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)** to **[`4fb30a6`](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)**",
    "created_at": "2020-02-22T23:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cfcc9fd`](https://github.com/sagemath/sagetrac-mirror/commit/cfcc9fd4719a1bbba4bd763371fc6048c34d30ac)** to **[`4fb30a6`](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)**



---

archive/issue_comments_454285.json:
```json
{
    "body": "Changed commit from **[`4fb30a6`](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)** to **[`f147962`](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)**",
    "created_at": "2020-02-22T23:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454285",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4fb30a6`](https://github.com/sagemath/sagetrac-mirror/commit/4fb30a608cd8b54be4fb0cc1a5b397b85480e5c6)** to **[`f147962`](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)**



---

archive/issue_comments_454286.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea\"><code>f147962</code></a></td><td><code>src/bootstrap: Make executable</code></td></tr></table>\n",
    "created_at": "2020-02-22T23:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea"><code>f147962</code></a></td><td><code>src/bootstrap: Make executable</code></td></tr></table>




---

archive/issue_comments_454287.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,5 @@\n \n This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI\n \n+Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.\n+\n``````\n",
    "created_at": "2020-02-22T23:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454287",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,5 @@
 
 This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI
 
+Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.
+
``````




---

archive/issue_comments_454288.json:
```json
{
    "body": "Changed commit from **[`f147962`](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)** to **[`13088e3`](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)**",
    "created_at": "2020-03-02T01:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f147962`](https://github.com/sagemath/sagetrac-mirror/commit/f147962f260f4ecf6872f3555111c9e8e300acea)** to **[`13088e3`](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)**



---

archive/issue_comments_454289.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d\"><code>13088e3</code></a></td><td><code>Merge tag '9.1.beta6' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr></table>\n",
    "created_at": "2020-03-02T01:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454289",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d"><code>13088e3</code></a></td><td><code>Merge tag '9.1.beta6' into t/29041/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs</code></td></tr></table>




---

archive/issue_comments_454290.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nNeeds review",
    "created_at": "2020-03-06T16:54:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454290",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Needs review



---

archive/issue_events_396521.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T17:10:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396521"
}
```



---

archive/issue_events_396522.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-03-15T17:10:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396522"
}
```



---

archive/issue_events_396523.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:03:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396523"
}
```



---

archive/issue_events_396524.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-09T23:03:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396524"
}
```



---

archive/issue_comments_454291.json:
```json
{
    "body": "Changed dependencies from **#29233** to **#29233, #28925**",
    "created_at": "2020-06-10T21:42:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454291",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29233** to **#29233, #28925**



---

archive/issue_events_396525.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-14T19:57:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396525"
}
```



---

archive/issue_events_396526.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-14T19:57:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396526"
}
```



---

archive/issue_events_396527.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-27T19:04:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "title_is": "at ./bootstrap time, generate build/pkgs/sagelib/src/requirements.txt, constraints.txt, setup.cfg [install_requires] from build/pkgs",
    "title_was": "at ./bootstrap time, generate src/requirements.txt, src/constraints.txt, src/setup.cfg [install_requires] from build/pkgs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396527"
}
```



---

archive/issue_comments_454292.json:
```json
{
    "body": "Work Issues: **redo on top of #29950**",
    "created_at": "2020-06-27T19:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454292",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **redo on top of #29950**



---

archive/issue_comments_454293.json:
```json
{
    "body": "Changed dependencies from **#29233, #28925** to **#29950**",
    "created_at": "2020-06-27T19:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454293",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29233, #28925** to **#29950**



---

archive/issue_comments_454294.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,12 @@\n \n Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.\n \n+The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.\n+\n+---\n+\n+References: \n+\n+https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n+\n+\n``````\n",
    "created_at": "2020-09-07T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454294",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,12 @@
 
 Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.
 
+The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.
+
+---
+
+References: 
+
+https://pipenv-fork.readthedocs.io/en/latest/advanced.html
+
+
``````




---

archive/issue_events_396528.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-07T18:17:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "title_is": "at ./bootstrap time, generate requirements.txt, constraints.txt, setup.cfg [install_requires], Pipfile from build/pkgs",
    "title_was": "at ./bootstrap time, generate build/pkgs/sagelib/src/requirements.txt, constraints.txt, setup.cfg [install_requires] from build/pkgs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396528"
}
```



---

archive/issue_comments_454295.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAnother approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.\n\nReason: I feel like sage-lib should be independent of sage-distribution as much as possible.\n\nMore practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development. But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.)",
    "created_at": "2020-09-16T08:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454295",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:30" align="right">comment:30</div>

Another approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.

Reason: I feel like sage-lib should be independent of sage-distribution as much as possible.

More practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development. But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.)



---

archive/issue_comments_454296.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@tobiasdiez](#comment%3A30):\n> Another approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.\n> \n> Reason: I feel like sage-lib should be independent of sage-distribution as much as possible.\n\nI think the versions given by sage-the-distribution (`build/pkgs/*/package-version.txt`) should be considered as pinned versions, and information such as `requirements.txt` or `Pipfile`/`Pipfile.lock` should come from there in some way.\n\nThe allowed version ranges are currently not encoded anywhere. For non-Python packages have `spkg-configure.m4` (#27330), but this is obviously the wrong mechanism for Python packages.  setuptools has them in `setup.cfg [install_requires]`. \n\nI think I agree with you that this information does not necessarily have to be generated from (new) files in `build/pkgs/` but could be put directly into `src/`, such as `src/setup.cfg`. \n\n\n> More practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development.\n\nI think some steps are missing here - we don't have a native Windows build of many packages that Sage depends on. But I agree, after modularization (#29705) we should aim for getting a native Windows build of a Sage core at least.\n\n> But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.) \n\nNote that we have the `bootstrap -d` mechanism, which downloads a tarball of the files created by `bootstrap`.  This is how most users and developers get these files. We could look into creating a powershell version of `bootstrap -d`.",
    "created_at": "2020-09-16T17:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454296",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@tobiasdiez](#comment%3A30):
> Another approach would be to maintain an independent pipfile/requirements.txt in src/ and have automatic checks to make sure that the sage packages provide the required packages with a suitable version.
> 
> Reason: I feel like sage-lib should be independent of sage-distribution as much as possible.

I think the versions given by sage-the-distribution (`build/pkgs/*/package-version.txt`) should be considered as pinned versions, and information such as `requirements.txt` or `Pipfile`/`Pipfile.lock` should come from there in some way.

The allowed version ranges are currently not encoded anywhere. For non-Python packages have `spkg-configure.m4` (#27330), but this is obviously the wrong mechanism for Python packages.  setuptools has them in `setup.cfg [install_requires]`. 

I think I agree with you that this information does not necessarily have to be generated from (new) files in `build/pkgs/` but could be put directly into `src/`, such as `src/setup.cfg`. 


> More practical reason: pipenv works very nicely on Windows, and my hope is to use it without having to use `sage make` beforehand. So one simply clones the code, starts the virtual env with pipenv and gets an editiable install of sage for easy development.

I think some steps are missing here - we don't have a native Windows build of many packages that Sage depends on. But I agree, after modularization (#29705) we should aim for getting a native Windows build of a Sage core at least.

> But for this the pipfile needs to be there without running the bootstrap command. (The alternative would be to rewrite the bootstrap cmd in a OS-independent way, say using powershell.) 

Note that we have the `bootstrap -d` mechanism, which downloads a tarball of the files created by `bootstrap`.  This is how most users and developers get these files. We could look into creating a powershell version of `bootstrap -d`.



---

archive/issue_comments_454297.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,6 +10,6 @@\n \n References: \n \n-https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n+- https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n+- https://packaging.python.org/discussions/install-requires-vs-requirements/\n \n-\n``````\n",
    "created_at": "2020-09-16T17:24:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454297",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,6 +10,6 @@
 
 References: 
 
-https://pipenv-fork.readthedocs.io/en/latest/advanced.html
+- https://pipenv-fork.readthedocs.io/en/latest/advanced.html
+- https://packaging.python.org/discussions/install-requires-vs-requirements/
 
-
``````




---

archive/issue_comments_454298.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThere is also https://pypi.org/project/pipenv-to-requirements/ to generate the requirements file from a pipfile.",
    "created_at": "2020-09-28T10:38:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454298",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:33" align="right">comment:33</div>

There is also https://pypi.org/project/pipenv-to-requirements/ to generate the requirements file from a pipfile.



---

archive/issue_comments_454299.json:
```json
{
    "body": "Changed dependencies from **#29950** to **#30719**",
    "created_at": "2020-10-04T22:00:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454299",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29950** to **#30719**



---

archive/issue_comments_454300.json:
```json
{
    "body": "Changed commit from **[`13088e3`](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)** to none",
    "created_at": "2020-11-19T23:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454300",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`13088e3`](https://github.com/sagemath/sagetrac-mirror/commit/13088e302e305761994c04dca1d7b7d9d4b2f06d)** to none



---

archive/issue_comments_454301.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)** to none",
    "created_at": "2020-11-19T23:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454301",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/at___bootstrap_time__generate_src_requirements_txt__src_constraints_txt__src_setup_cfg__install_requires__from_build_pkgs)** to none



---

archive/issue_events_396529.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-19T23:14:35Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "title_is": "sage_bootstrap: Add command \"sage -package get-system-packages\", supporting systems \"install-requires\", \"requirements\", \"pipfile\"",
    "title_was": "at ./bootstrap time, generate requirements.txt, constraints.txt, setup.cfg [install_requires], Pipfile from build/pkgs",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396529"
}
```



---

archive/issue_comments_454302.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to none",
    "created_at": "2020-11-19T23:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454302",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to none



---

archive/issue_comments_454303.json:
```json
{
    "body": "Changed dependencies from **#30719** to **#30719, #30865**",
    "created_at": "2020-11-19T23:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454303",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30719** to **#30719, #30865**



---

archive/issue_comments_454304.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,18 @@\n-https://pip.pypa.io/en/stable/user_guide/#requirements-files\n+We extend the `sage_bootstrap` package to add the commands:\n+- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)\n+- `sage -package get-system-packages requirements PACKAGES...`\n+- `sage -package get-system-packages pipfile PACKAGES...`\n+(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)\n \n-This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI\n+They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n \n-Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.\n-\n-The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.\n+`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n \n ---\n \n References: \n \n+- https://pip.pypa.io/en/stable/user_guide/#requirements-files\n - https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n - https://packaging.python.org/discussions/install-requires-vs-requirements/\n \n``````\n",
    "created_at": "2020-11-19T23:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454304",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,18 @@
-https://pip.pypa.io/en/stable/user_guide/#requirements-files
+We extend the `sage_bootstrap` package to add the commands:
+- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)
+- `sage -package get-system-packages requirements PACKAGES...`
+- `sage -package get-system-packages pipfile PACKAGES...`
+(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)
 
-This is another step toward #21507 - Task ticket: Make sagelib a pip-installable Python source package, listed on PyPI
+They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
 
-Like the files generated in #26964, they are generated at `bootstrap` time so that they are available when a source distribution is packaged. They are deleted by `make bootstrap-clean`.
-
-The files would be generated either in `build/pkgs/sagelib/src/` or in `src`.
+`bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.
 
 ---
 
 References: 
 
+- https://pip.pypa.io/en/stable/user_guide/#requirements-files
 - https://pipenv-fork.readthedocs.io/en/latest/advanced.html
 - https://packaging.python.org/discussions/install-requires-vs-requirements/
 
``````




---

archive/issue_comments_454305.json:
```json
{
    "body": "Changed work issues from **redo on top of #29950** to none",
    "created_at": "2020-11-19T23:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454305",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **redo on top of #29950** to none



---

archive/issue_comments_454306.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n - `sage -package get-system-packages pipfile PACKAGES...`\n (The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)\n \n-They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n \n `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n \n``````\n",
    "created_at": "2020-11-19T23:14:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454306",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 - `sage -package get-system-packages pipfile PACKAGES...`
 (The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)
 
-They generate text files in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
 
 `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.
 
``````




---

archive/issue_comments_454307.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454307",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_comments_454308.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454308",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_454309.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n We extend the `sage_bootstrap` package to add the commands:\n-- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)\n-- `sage -package get-system-packages requirements PACKAGES...`\n-- `sage -package get-system-packages pipfile PACKAGES...`\n-(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)\n+- `sage -package list --output=install-requires PACKAGES...` (for #30913)\n+- `sage -package list --output=requirements PACKAGES...`\n+- `sage -package list --output=pipfile PACKAGES...`\n+- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)\n \n-They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.\n+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages \n \n `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.\n \n``````\n",
    "created_at": "2020-12-12T06:25:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454309",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
 We extend the `sage_bootstrap` package to add the commands:
-- `sage -package get-system-packages install-requires PACKAGES...` (for #30913)
-- `sage -package get-system-packages requirements PACKAGES...`
-- `sage -package get-system-packages pipfile PACKAGES...`
-(The functionality of the shell script `build/bin/sage-get-system-packages` can be merged into this command as well.)
+- `sage -package list --output=install-requires PACKAGES...` (for #30913)
+- `sage -package list --output=requirements PACKAGES...`
+- `sage -package list --output=pipfile PACKAGES...`
+- `sage -package list --output=debian PACKAGE...` etc. (taking over the functionality of the shell script `build/bin/sage-get-system-packages`.)
 
-They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`.
+They generate text output in the format of `setup.cfg [options] install_requires=`, `requirements.txt`, and `Pipfile`; or a list of system packages 
 
 `bootstrap` can use these commands to generate these files for  `build/pkgs/sagelib/src/` or `src`.  They are deleted by `make bootstrap-clean`.
 
``````




---

archive/issue_events_396530.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-12T06:25:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "title_is": "sage_bootstrap: Add command \"sage -package list --output={install-requires,requirements,pipfile,debian,....}\"",
    "title_was": "sage_bootstrap: Add command \"sage -package get-system-packages\", supporting systems \"install-requires\", \"requirements\", \"pipfile\"",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396530"
}
```



---

archive/issue_comments_454310.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nRewriting tools used in the bootstrap phase in Python would also be useful for developing on Windows",
    "created_at": "2020-12-12T21:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454310",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

Rewriting tools used in the bootstrap phase in Python would also be useful for developing on Windows



---

archive/issue_comments_454311.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nhmm, what is so problematic about Windows here? Even if one talks about native, non-cygwin, it is still perfectly possible to run bash etc.",
    "created_at": "2020-12-12T22:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454311",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">comment:40</div>

hmm, what is so problematic about Windows here? Even if one talks about native, non-cygwin, it is still perfectly possible to run bash etc.



---

archive/issue_comments_454312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,4 +15,4 @@\n - https://pip.pypa.io/en/stable/user_guide/#requirements-files\n - https://pipenv-fork.readthedocs.io/en/latest/advanced.html\n - https://packaging.python.org/discussions/install-requires-vs-requirements/\n-\n+- https://pypi.org/project/install-requires/\n``````\n",
    "created_at": "2020-12-28T19:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454312",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,4 +15,4 @@
 - https://pip.pypa.io/en/stable/user_guide/#requirements-files
 - https://pipenv-fork.readthedocs.io/en/latest/advanced.html
 - https://packaging.python.org/discussions/install-requires-vs-requirements/
-
+- https://pypi.org/project/install-requires/
``````




---

archive/issue_comments_454313.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454313",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_396531.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396531"
}
```



---

archive/issue_events_396532.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396532"
}
```



---

archive/issue_comments_454314.json:
```json
{
    "body": "Changed dependencies from **#30719, #30865** to none",
    "created_at": "2021-06-25T20:37:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454314",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30719, #30865** to none



---

archive/issue_events_396533.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396533"
}
```



---

archive/issue_events_396534.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396534"
}
```



---

archive/issue_comments_454315.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29041#issuecomment-454315",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_396535.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396535"
}
```



---

archive/issue_events_396536.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396536"
}
```



---

archive/issue_events_396537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396537"
}
```



---

archive/issue_events_396538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396538"
}
```



---

archive/issue_events_396539.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396539"
}
```



---

archive/issue_events_396540.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396540"
}
```



---

archive/issue_events_396541.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-29T23:06:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/29041",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29041#event-396541"
}
```

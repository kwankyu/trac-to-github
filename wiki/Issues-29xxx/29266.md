# Issue 29266: Bugfix concerning ticket #26421

archive/issues_029029.json:
```json
{
    "body": "In #26421 factorization of polynomials has been extended to previously untreated cases in which the polynomial's base ring is an integral domain.\nThe factorization is done over the field of fraction and excepted if it can be coerced into the base ring itself. Since the method `base_change` of the class `Factorzation` doesn't check if the unit of the factorization is coerced to a unit again, this implementation is too vastly:\n\n```\nsage: R.<t> = LaurentPolynomialRing(ZZ)\nsage: P.<x> = R[]\nsage: f = 2*x + 4\nsage: f.is_irreducible()\nTrue\nsage: F = f.factor(); F\n(2) * (x + 2)\nsage: F.unit()\n2\n```\n\n\n**CC:**  @tscrim\n\n**Keywords:** factorization, integral domain\n\n**Branch/Commit:** [a21db2793711b9bd10127911bc9a2c432dca9947](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Sebastian Oehms\n\nIssue created by migration from https://trac.sagemath.org/ticket/29266\n\n",
    "closed_at": "2020-03-03T23:21:33Z",
    "created_at": "2020-03-01T20:24:57Z",
    "labels": [
        "component: commutative algebra",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "title": "Bugfix concerning ticket #26421",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/29266",
    "user": "https://github.com/soehms"
}
```
In #26421 factorization of polynomials has been extended to previously untreated cases in which the polynomial's base ring is an integral domain.
The factorization is done over the field of fraction and excepted if it can be coerced into the base ring itself. Since the method `base_change` of the class `Factorzation` doesn't check if the unit of the factorization is coerced to a unit again, this implementation is too vastly:

```
sage: R.<t> = LaurentPolynomialRing(ZZ)
sage: P.<x> = R[]
sage: f = 2*x + 4
sage: f.is_irreducible()
True
sage: F = f.factor(); F
(2) * (x + 2)
sage: F.unit()
2
```


**CC:**  @tscrim

**Keywords:** factorization, integral domain

**Branch/Commit:** [a21db2793711b9bd10127911bc9a2c432dca9947](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)

**Reviewer:** Travis Scrimshaw

**Author:** Sebastian Oehms

Issue created by migration from https://trac.sagemath.org/ticket/29266





---

archive/issue_comments_461714.json:
```json
{
    "body": "**Branch:** [u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)",
    "created_at": "2020-03-01T20:28:12Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461714",
    "user": "https://github.com/soehms"
}
```

**Branch:** [u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)



---

archive/issue_comments_461715.json:
```json
{
    "body": "**Commit:** [004c1c4211af86c177b8fd537f6aad01cc593623](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461715",
    "user": "https://github.com/soehms"
}
```

**Commit:** [004c1c4211af86c177b8fd537f6aad01cc593623](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)



---

archive/issue_comments_461716.json:
```json
{
    "body": "<a id='comment:2'></a>\nMaybe a better place for the fix would be the method `base_change` of the class `Factorization`. But since this leads to the failure of previous doctests (in cases `is_unit` is not implemented), I preferred the implementation in method `factor`.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623\">004c1c4</a></td><td><code>29266 initial version</code></td></tr></table>\n",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461716",
    "user": "https://github.com/soehms"
}
```

<a id='comment:2'></a>
Maybe a better place for the fix would be the method `base_change` of the class `Factorization`. But since this leads to the failure of previous doctests (in cases `is_unit` is not implemented), I preferred the implementation in method `factor`.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623">004c1c4</a></td><td><code>29266 initial version</code></td></tr></table>




---

archive/issue_events_262638.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-01T20:31:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-262638"
}
```



---

archive/issue_comments_461717.json:
```json
{
    "body": "**Author:** Sebastian Oehms",
    "created_at": "2020-03-01T20:31:14Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461717",
    "user": "https://github.com/soehms"
}
```

**Author:** Sebastian Oehms



---

archive/issue_comments_461718.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2020-03-02T00:09:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461718",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_461719.json:
```json
{
    "body": "<a id='comment:3'></a>\nOne little change: \"coerce\" to \"convert\". If it was a coercion map, then the fact it was a unit must be preserved (as coercions must be morphisms). Once you change that, you can set a positive review.",
    "created_at": "2020-03-02T00:09:48Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461719",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
One little change: "coerce" to "convert". If it was a coercion map, then the fact it was a unit must be preserved (as coercions must be morphisms). Once you change that, you can set a positive review.



---

archive/issue_comments_461720.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947\">a21db27</a></td><td><code>29266: correction according to review</code></td></tr></table>\n",
    "created_at": "2020-03-02T06:29:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947">a21db27</a></td><td><code>29266: correction according to review</code></td></tr></table>




---

archive/issue_comments_461721.json:
```json
{
    "body": "**Changing commit** from \"[004c1c4211af86c177b8fd537f6aad01cc593623](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)\" to \"[a21db2793711b9bd10127911bc9a2c432dca9947](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)\".",
    "created_at": "2020-03-02T06:29:57Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[004c1c4211af86c177b8fd537f6aad01cc593623](https://github.com/sagemath/sagetrac-mirror/commit/004c1c4211af86c177b8fd537f6aad01cc593623)" to "[a21db2793711b9bd10127911bc9a2c432dca9947](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)".



---

archive/issue_comments_461722.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks!",
    "created_at": "2020-03-02T06:31:18Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461722",
    "user": "https://github.com/soehms"
}
```

<a id='comment:5'></a>
Thanks!



---

archive/issue_events_262639.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-02T06:31:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-262639"
}
```



---

archive/issue_events_262640.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-03-02T06:31:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-262640"
}
```



---

archive/issue_events_262641.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-03-03T23:21:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-262641"
}
```



---

archive/issue_events_262642.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "cdaf307328f72db40fead1e04208afe073daa82a",
    "created_at": "2020-03-03T23:21:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/29266#event-262642"
}
```



---

archive/issue_comments_461723.json:
```json
{
    "body": "**Changing branch** from \"[u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)\" to \"[a21db2793711b9bd10127911bc9a2c432dca9947](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)\".",
    "created_at": "2020-03-03T23:21:33Z",
    "issue": "https://github.com/sagemath/sage/issues/29266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/29266#issuecomment-461723",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/soehms/factorization_integral_domain_29266](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/factorization_integral_domain_29266)" to "[a21db2793711b9bd10127911bc9a2c432dca9947](https://github.com/sagemath/sagetrac-mirror/commit/a21db2793711b9bd10127911bc9a2c432dca9947)".

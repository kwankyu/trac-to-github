# Issue 15420: Borken git doctests.

archive/issues_015183.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nGithub master, at 094712a285895ceac4c1521fb04cc9cc343a4b3a (head)\n\nhttp://patchbot.sagemath.org/log/0/Ubuntu/12.10/x86_64/3.5.0-17-generic/pi/2013-11-14%2002:54:22%20-0800?short\n\nLooks like we just need to sort this list. \n\nCC:  @ohanar\n\nComponent: **misc**\n\nAuthor: **Robert Bradshaw, R. Andrew Ohana**\n\nBranch/Commit: **[u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420) @ [`2e77868`](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)**\n\nReviewer: **R. Andrew Ohana**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/15420_\n\n",
    "closed_at": "2013-12-16T14:07:43Z",
    "created_at": "2013-11-14T18:55:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Borken git doctests.",
    "type": "issue",
    "updated_at": "2013-12-16T14:07:43Z",
    "url": "https://github.com/sagemath/sage/issues/15420",
    "user": "https://github.com/robertwb"
}
```
<div id="comment:0"></div>

Github master, at 094712a285895ceac4c1521fb04cc9cc343a4b3a (head)

http://patchbot.sagemath.org/log/0/Ubuntu/12.10/x86_64/3.5.0-17-generic/pi/2013-11-14%2002:54:22%20-0800?short

Looks like we just need to sort this list. 

CC:  @ohanar

Component: **misc**

Author: **Robert Bradshaw, R. Andrew Ohana**

Branch/Commit: **[u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420) @ [`2e77868`](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)**

Reviewer: **R. Andrew Ohana**

_Issue created by migration from https://trac.sagemath.org/ticket/15420_





---

archive/issue_events_217572.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-14T18:55:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "milestone_number": null,
    "milestone_title": "sage-6.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217572"
}
```



---

archive/issue_events_217573.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-14T18:55:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217573"
}
```



---

archive/issue_events_217574.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-14T18:55:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217574"
}
```



---

archive/issue_comments_191774.json:
```json
{
    "body": "Branch: **[u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)**",
    "created_at": "2013-11-14T18:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191774",
    "user": "https://github.com/robertwb"
}
```

Branch: **[u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)**



---

archive/issue_comments_191775.json:
```json
{
    "body": "Commit: **[`5f2cbc3`](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)**",
    "created_at": "2013-11-14T19:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191775",
    "user": "https://github.com/robertwb"
}
```

Commit: **[`5f2cbc3`](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)**



---

archive/issue_comments_191776.json:
```json
{
    "body": "Author: **Robert Bradshaw**",
    "created_at": "2013-11-14T19:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191776",
    "user": "https://github.com/robertwb"
}
```

Author: **Robert Bradshaw**



---

archive/issue_events_217575.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-14T19:00:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217575"
}
```



---

archive/issue_comments_191777.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><code>[5f2cbc3](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc3)</code></td><td><code>Sort output for doctests.</code></td></tr></table>\n",
    "created_at": "2013-11-14T19:00:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191777",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><code>[5f2cbc3](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc3)</code></td><td><code>Sort output for doctests.</code></td></tr></table>




---

archive/issue_events_217576.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-14T21:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217576"
}
```



---

archive/issue_events_217577.json:
```json
{
    "actor": "https://github.com/ohanar",
    "created_at": "2013-11-14T21:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217577"
}
```



---

archive/issue_comments_191778.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe docstring says it should be sorted by last commit time, and the code looks like it does that, so sorting the output (alphabetically) is wrong. Really we should spoof the commit time using an environment variable (it is something like `GIT_COMMITTER_DATE`), rather than using `time.sleep`.",
    "created_at": "2013-11-14T21:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191778",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:3" align="right">comment:3</div>

The docstring says it should be sorted by last commit time, and the code looks like it does that, so sorting the output (alphabetically) is wrong. Really we should spoof the commit time using an environment variable (it is something like `GIT_COMMITTER_DATE`), rather than using `time.sleep`.



---

archive/issue_comments_191779.json:
```json
{
    "body": "Changed commit from **[`5f2cbc3`](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)** to **[`e977e69`](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)**",
    "created_at": "2013-11-15T07:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191779",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f2cbc3`](https://github.com/sagemath/sagetrac-mirror/commit/5f2cbc31d441cfa8fa2ca091a1b17bab2f457005)** to **[`e977e69`](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)**



---

archive/issue_comments_191780.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:\n|                                                                                                                |                                   |\n|----------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[e977e69](https://github.com/sagemath/sagetrac-mirror/commit/e977e69)|Use explicit date for git doctests.|",
    "created_at": "2013-11-15T07:05:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191780",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Recent commits:
|                                                                                                                |                                   |
|----------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[e977e69](https://github.com/sagemath/sagetrac-mirror/commit/e977e69)|Use explicit date for git doctests.|



---

archive/issue_comments_191781.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAh, yes. Fixed to set the date.",
    "created_at": "2013-11-15T07:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191781",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:5" align="right">comment:5</div>

Ah, yes. Fixed to set the date.



---

archive/issue_events_217578.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T07:06:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217578"
}
```



---

archive/issue_events_217579.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T07:06:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217579"
}
```



---

archive/issue_comments_191782.json:
```json
{
    "body": "Changed branch from **[u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)** to **[u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420)**",
    "created_at": "2013-11-15T21:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191782",
    "user": "https://github.com/ohanar"
}
```

Changed branch from **[u/robertwb/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/robertwb/ticket/15420)** to **[u/ohanar/ticket/15420](https://github.com/sagemath/sagetrac-mirror/tree/u/ohanar/ticket/15420)**



---

archive/issue_comments_191783.json:
```json
{
    "body": "Reviewer: **R. Andrew Ohana**",
    "created_at": "2013-11-15T21:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191783",
    "user": "https://github.com/ohanar"
}
```

Reviewer: **R. Andrew Ohana**



---

archive/issue_comments_191784.json:
```json
{
    "body": "Changed commit from **[`e977e69`](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)** to **[`2e77868`](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)**",
    "created_at": "2013-11-15T21:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191784",
    "user": "https://github.com/ohanar"
}
```

Changed commit from **[`e977e69`](https://github.com/sagemath/sagetrac-mirror/commit/e977e693b256ed48dd79ba62f5b0821697a677fe)** to **[`2e77868`](https://github.com/sagemath/sagetrac-mirror/commit/2e778682424ed6a72c1689f787d144301e7026f2)**



---

archive/issue_comments_191785.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSeems like `os.environ` is ignored (at least on my system). I changed the doctest to explicitly set the environment. Otherwise, positive review.\n\n---\nNew commits:\n<table><tr><td><code>[2e77868](https://github.com/sagemath/sagetrac-mirror/commit/2e77868)</code></td><td><code>specify environment explicitly for doctests</code></td></tr></table>\n",
    "created_at": "2013-11-15T21:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191785",
    "user": "https://github.com/ohanar"
}
```

<div id="comment:6" align="right">comment:6</div>

Seems like `os.environ` is ignored (at least on my system). I changed the doctest to explicitly set the environment. Otherwise, positive review.

---
New commits:
<table><tr><td><code>[2e77868](https://github.com/sagemath/sagetrac-mirror/commit/2e77868)</code></td><td><code>specify environment explicitly for doctests</code></td></tr></table>




---

archive/issue_comments_191786.json:
```json
{
    "body": "Changed author from **Robert Bradshaw** to **Robert Bradshaw, R. Andrew Ohana**",
    "created_at": "2013-11-15T21:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191786",
    "user": "https://github.com/ohanar"
}
```

Changed author from **Robert Bradshaw** to **Robert Bradshaw, R. Andrew Ohana**



---

archive/issue_events_217580.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T22:51:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217580"
}
```



---

archive/issue_events_217581.json:
```json
{
    "actor": "https://github.com/robertwb",
    "created_at": "2013-11-15T22:51:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217581"
}
```



---

archive/issue_comments_191787.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nInteresting. Your change looks good to me.",
    "created_at": "2013-11-15T22:51:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/15420#issuecomment-191787",
    "user": "https://github.com/robertwb"
}
```

<div id="comment:7" align="right">comment:7</div>

Interesting. Your change looks good to me.



---

archive/issue_events_217582.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2013-12-16T14:07:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217582"
}
```



---

archive/issue_events_217583.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3ec5f9ac039bb999f0453c575c52a9452eb65165",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2013-12-16T14:07:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/15420",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/15420#event-217583"
}
```

# Issue 31549: add support for dynamical systems over function field in function  all_rational_preimages

archive/issues_031312.json:
```json
{
    "body": "we modified the if condition so that it doesn't throw an error when working with dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field\n\n**CC:**  @bhutz\n\n**Branch:** [u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages)\n\n**Commit:** [46fc21e63abd13164dbbe4b80f6e53c5516ee1aa](https://github.com/sagemath/sagetrac-mirror/commit/46fc21e63abd13164dbbe4b80f6e53c5516ee1aa)\n\n**Reviewer:** Ben Hutz\n\n**Author:** Saher Amasha,Safa Amasha\n\nIssue created by migration from https://trac.sagemath.org/ticket/31549\n\n",
    "created_at": "2021-03-24T17:27:43Z",
    "labels": [
        "component: dynamics",
        "minor",
        "enhancement",
        "needs work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "title": "add support for dynamical systems over function field in function  all_rational_preimages",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/31549",
    "user": "https://github.com/Saher-Amasha"
}
```
we modified the if condition so that it doesn't throw an error when working with dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field

**CC:**  @bhutz

**Branch:** [u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages)

**Commit:** [46fc21e63abd13164dbbe4b80f6e53c5516ee1aa](https://github.com/sagemath/sagetrac-mirror/commit/46fc21e63abd13164dbbe4b80f6e53c5516ee1aa)

**Reviewer:** Ben Hutz

**Author:** Saher Amasha,Safa Amasha

Issue created by migration from https://trac.sagemath.org/ticket/31549





---

archive/issue_comments_509726.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n we modified the if so that it doesn't throw an error when working with \n- dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field\n+dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field\n``````\n",
    "created_at": "2021-03-26T16:22:23Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509726",
    "user": "https://github.com/Saher-Amasha"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
 we modified the if so that it doesn't throw an error when working with 
- dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field
+dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field
``````




---

archive/issue_comments_509727.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1 @@\n-we modified the if so that it doesn't throw an error when working with \n-dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field\n+we modified the if condition so that it doesn't throw an error when working with dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field\n``````\n",
    "created_at": "2021-03-26T16:24:15Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509727",
    "user": "https://github.com/Saher-Amasha"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1 @@
-we modified the if so that it doesn't throw an error when working with 
-dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field
+we modified the if condition so that it doesn't throw an error when working with dynamical systems over function field the actual code of the function is not changed because it works on  dynamical systems over function field
``````




---

archive/issue_comments_509728.json:
```json
{
    "body": "**Branch:** [u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages)",
    "created_at": "2021-03-26T16:25:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509728",
    "user": "https://github.com/Saher-Amasha"
}
```

**Branch:** [u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Saher-Amasha/add_support_for_dynamical_systems_over_function_field_in_function__all_rational_preimages)



---

archive/issue_events_285375.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-27T02:13:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285375"
}
```



---

archive/issue_events_285376.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-27T02:13:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285376"
}
```



---

archive/issue_comments_509729.json:
```json
{
    "body": "<a id='comment:4'></a>\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-27T02:13:38Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509729",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_285377.json:
```json
{
    "actor": "https://github.com/Saher-Amasha",
    "created_at": "2021-03-27T14:21:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285377"
}
```



---

archive/issue_comments_509730.json:
```json
{
    "body": "<a id='comment:5'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86\">330a6d0</a></td><td><code>we modified the if condition so that it doesn't throw an error when working with dynamical systems over function field the actual code of the function is not changed because it works on dynamical systems over function field</code></td></tr></table>\n",
    "created_at": "2021-03-27T14:21:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509730",
    "user": "https://github.com/Saher-Amasha"
}
```

<a id='comment:5'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86">330a6d0</a></td><td><code>we modified the if condition so that it doesn't throw an error when working with dynamical systems over function field the actual code of the function is not changed because it works on dynamical systems over function field</code></td></tr></table>




---

archive/issue_comments_509731.json:
```json
{
    "body": "**Commit:** [330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86](https://github.com/sagemath/sagetrac-mirror/commit/330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86)",
    "created_at": "2021-03-27T14:21:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509731",
    "user": "https://github.com/Saher-Amasha"
}
```

**Commit:** [330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86](https://github.com/sagemath/sagetrac-mirror/commit/330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86)



---

archive/issue_comments_509732.json:
```json
{
    "body": "<a id='comment:7'></a>\nI can take a look at this change, but it probably won't be until next week.\n\njust a quick comment. The commit message should be short (one line) with the more detailed description in a following paragraph.",
    "created_at": "2021-04-16T15:09:11Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509732",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:7'></a>
I can take a look at this change, but it probably won't be until next week.

just a quick comment. The commit message should be short (one line) with the more detailed description in a following paragraph.



---

archive/issue_comments_509733.json:
```json
{
    "body": "**Reviewer:** Ben Hutz",
    "created_at": "2021-04-21T14:44:52Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509733",
    "user": "https://github.com/bhutz"
}
```

**Reviewer:** Ben Hutz



---

archive/issue_events_285378.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-04-21T14:44:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285378"
}
```



---

archive/issue_events_285379.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-04-21T14:44:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285379"
}
```



---

archive/issue_comments_509734.json:
```json
{
    "body": "<a id='comment:8'></a>\nOn the surface this functionality works, but the details need a little work.\n\nIn the code itself there are a number of white space issues. For example\n\n```\n[(1/t)*x^2 + y^2  ,y^2])\n```\nshould be\n\n```\n[(1/t)*x^2 + y^2, y^2])\n```\n\nIn the new if line as well, you're missing a space after the comma and have an extra space before the closing ).\n\nThe example code should be improved in a number of ways:\n\n- I'd suggest saving a line and removing K and just defining the function field over the finite field directly.\n- The variables base and CF are not used so should not be in the example.\n- D is not needed: P is already the domain of DS.\n- Instead of calling normalize, just define the dynamical system as you want it to be defined as.\n\nWhile adding support for function fields, seems like you should also allow finite fields, since that also requires no other changes.",
    "created_at": "2021-04-21T14:44:52Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509734",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>
On the surface this functionality works, but the details need a little work.

In the code itself there are a number of white space issues. For example

```
[(1/t)*x^2 + y^2  ,y^2])
```
should be

```
[(1/t)*x^2 + y^2, y^2])
```

In the new if line as well, you're missing a space after the comma and have an extra space before the closing ).

The example code should be improved in a number of ways:

- I'd suggest saving a line and removing K and just defining the function field over the finite field directly.
- The variables base and CF are not used so should not be in the example.
- D is not needed: P is already the domain of DS.
- Instead of calling normalize, just define the dynamical system as you want it to be defined as.

While adding support for function fields, seems like you should also allow finite fields, since that also requires no other changes.



---

archive/issue_comments_509735.json:
```json
{
    "body": "**Changing commit** from \"[330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86](https://github.com/sagemath/sagetrac-mirror/commit/330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86)\" to \"[46fc21e63abd13164dbbe4b80f6e53c5516ee1aa](https://github.com/sagemath/sagetrac-mirror/commit/46fc21e63abd13164dbbe4b80f6e53c5516ee1aa)\".",
    "created_at": "2021-05-28T18:56:16Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86](https://github.com/sagemath/sagetrac-mirror/commit/330a6d0f2daaa5493fbc79522d9f07a8dc9c9c86)" to "[46fc21e63abd13164dbbe4b80f6e53c5516ee1aa](https://github.com/sagemath/sagetrac-mirror/commit/46fc21e63abd13164dbbe4b80f6e53c5516ee1aa)".



---

archive/issue_comments_509736.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46fc21e63abd13164dbbe4b80f6e53c5516ee1aa\">46fc21e</a></td><td><code>fixed test</code></td></tr></table>\n",
    "created_at": "2021-05-28T18:56:16Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46fc21e63abd13164dbbe4b80f6e53c5516ee1aa">46fc21e</a></td><td><code>fixed test</code></td></tr></table>




---

archive/issue_events_285380.json:
```json
{
    "actor": "https://github.com/Saher-Amasha",
    "created_at": "2021-05-30T18:01:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285380"
}
```



---

archive/issue_events_285381.json:
```json
{
    "actor": "https://github.com/Saher-Amasha",
    "created_at": "2021-05-30T18:01:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285381"
}
```



---

archive/issue_comments_509737.json:
```json
{
    "body": "<a id='comment:11'></a>\nThere is a doctest failure. Looks like you might need to use \"sorted\" for that doctest.\n\nAlso, why did you not also allow finite fields as requested?\n\nThe whitespace issues were fixed in the example, but the example no longer is a true function field example as the function and all the points are over the base field. The example should use the function field variable 't'.",
    "created_at": "2021-06-08T18:47:16Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509737",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:11'></a>
There is a doctest failure. Looks like you might need to use "sorted" for that doctest.

Also, why did you not also allow finite fields as requested?

The whitespace issues were fixed in the example, but the example no longer is a true function field example as the function and all the points are over the base field. The example should use the function field variable 't'.



---

archive/issue_events_285382.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-08T18:47:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285382"
}
```



---

archive/issue_events_285383.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-08T18:47:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285383"
}
```



---

archive/issue_comments_509738.json:
```json
{
    "body": "<a id='comment:12'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31549#issuecomment-509738",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_285384.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285384"
}
```



---

archive/issue_events_285385.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285385"
}
```



---

archive/issue_events_285386.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-10T21:57:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "component: algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285386"
}
```



---

archive/issue_events_285387.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-08-10T21:57:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "label": "component: dynamics",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285387"
}
```



---

archive/issue_events_285388.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285388"
}
```



---

archive/issue_events_285389.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285389"
}
```



---

archive/issue_events_285390.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285390"
}
```



---

archive/issue_events_285391.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285391"
}
```



---

archive/issue_events_285392.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285392"
}
```



---

archive/issue_events_285393.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31549",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31549#event-285393"
}
```

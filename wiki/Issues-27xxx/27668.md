# Issue 27668: py3: fix some doctests in French book (graph and programming)

archive/issues_027431.json:
```json
{
    "body": "\n\n**CC:**  @dcoudert\n\n**Branch/Commit:** [a4e1bed94546872411509738e272a690cd3b8627](https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627)\n\n**Reviewer:** David Coudert\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/27668\n\n",
    "closed_at": "2019-04-18T19:56:33Z",
    "created_at": "2019-04-15T13:03:25Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "title": "py3: fix some doctests in French book (graph and programming)",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27668",
    "user": "https://github.com/fchapoton"
}
```


**CC:**  @dcoudert

**Branch/Commit:** [a4e1bed94546872411509738e272a690cd3b8627](https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627)

**Reviewer:** David Coudert

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/27668





---

archive/issue_events_246496.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-15T13:03:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246496"
}
```



---

archive/issue_comments_431526.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f24d0bc55ee4a53121b47ff373f1e0522f9c09e\">2f24d0b</a></td><td><code>py3: fix some doctests in French book</code></td></tr></table>\n",
    "created_at": "2019-04-15T13:03:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431526",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f24d0bc55ee4a53121b47ff373f1e0522f9c09e">2f24d0b</a></td><td><code>py3: fix some doctests in French book</code></td></tr></table>




---

archive/issue_comments_431527.json:
```json
{
    "body": "**Commit:** [2f24d0bc55ee4a53121b47ff373f1e0522f9c09e](https://github.com/sagemath/sagetrac-mirror/commit/2f24d0bc55ee4a53121b47ff373f1e0522f9c09e)",
    "created_at": "2019-04-15T13:03:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431527",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [2f24d0bc55ee4a53121b47ff373f1e0522f9c09e](https://github.com/sagemath/sagetrac-mirror/commit/2f24d0bc55ee4a53121b47ff373f1e0522f9c09e)



---

archive/issue_comments_431528.json:
```json
{
    "body": "**Branch:** [u/chapoton/27668](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27668)",
    "created_at": "2019-04-15T13:03:50Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431528",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/27668](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27668)



---

archive/issue_comments_431529.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe proposed patch fixes some doctests, but I also see this error.\n\n```\nFile \"src/sage/tests/books/computational-mathematics-with-sagemath/graphtheory_doctest.py\", line 386, in sage.tests.books.computational-mathematics-with-sagemath.graphtheory_doctest\nFailed example:\n    for i in tasks:\n      print(\"t{} assigned to {}\".format(i,M.neighbors('t'+str(i))[0]))\nExpected:\n    t0 assigned to w2\n    t1 assigned to w3\n    t2 assigned to w5\n    t3 assigned to w8\n    t4 assigned to w1\n    t5 assigned to w7\n    t6 assigned to w9\n    t7 assigned to w0\n    t8 assigned to w4\n    t9 assigned to w6\nGot:\n    t0 assigned to w3\n    t1 assigned to w9\n    t2 assigned to w5\n    t3 assigned to w0\n    t4 assigned to w1\n    t5 assigned to w2\n    t6 assigned to w8\n    t7 assigned to w7\n    t8 assigned to w4\n    t9 assigned to w6\n```\nDo you want to solve it it or to postpone it for another ticket ?",
    "created_at": "2019-04-15T13:51:03Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431529",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:2'></a>
The proposed patch fixes some doctests, but I also see this error.

```
File "src/sage/tests/books/computational-mathematics-with-sagemath/graphtheory_doctest.py", line 386, in sage.tests.books.computational-mathematics-with-sagemath.graphtheory_doctest
Failed example:
    for i in tasks:
      print("t{} assigned to {}".format(i,M.neighbors('t'+str(i))[0]))
Expected:
    t0 assigned to w2
    t1 assigned to w3
    t2 assigned to w5
    t3 assigned to w8
    t4 assigned to w1
    t5 assigned to w7
    t6 assigned to w9
    t7 assigned to w0
    t8 assigned to w4
    t9 assigned to w6
Got:
    t0 assigned to w3
    t1 assigned to w9
    t2 assigned to w5
    t3 assigned to w0
    t4 assigned to w1
    t5 assigned to w2
    t6 assigned to w8
    t7 assigned to w7
    t8 assigned to w4
    t9 assigned to w6
```
Do you want to solve it it or to postpone it for another ticket ?



---

archive/issue_comments_431530.json:
```json
{
    "body": "<a id='comment:3'></a>\npostpone",
    "created_at": "2019-04-15T13:51:24Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431530",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
postpone



---

archive/issue_events_246497.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-15T13:52:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246497"
}
```



---

archive/issue_events_246498.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-15T13:52:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246498"
}
```



---

archive/issue_comments_431531.json:
```json
{
    "body": "<a id='comment:4'></a>\nSo then, LGTM.",
    "created_at": "2019-04-15T13:52:01Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431531",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
So then, LGTM.



---

archive/issue_comments_431532.json:
```json
{
    "body": "**Reviewer:** David Coudert",
    "created_at": "2019-04-15T13:52:01Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431532",
    "user": "https://github.com/dcoudert"
}
```

**Reviewer:** David Coudert



---

archive/issue_events_246499.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-15T15:27:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246499"
}
```



---

archive/issue_events_246500.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-04-15T15:27:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246500"
}
```



---

archive/issue_comments_431533.json:
```json
{
    "body": "<a id='comment:5'></a>\nWhat's up with this?\n\n```diff\n@@ -280,8 +280,11 @@ Sage example in ./graphtheory.tex, line 1736::\n Sage example in ./graphtheory.tex, line 1746::\n \n   sage: P = Permutations(range(g.order()))\n-  sage: n_colors, coloration = min(\n-  ....:    greedy_coloring(g, P.random_element()) for i in range(50))\n+  sage: n_colors = g.order()\n+  sage: for i in range(50):\n+  ....:     n_col, coloration = greedy_coloring(g, P.random_element())\n+  ....:     if n_col < n_colors:\n+  ....:         n_colors = n_col\n   sage: n_colors\n   4\n```\n\nIt's not clear to me why the old code wouldn't work on Python 3.  In any case this is an ugly way to write `min(...)` so I would rather just skip this test if for some reason it doesn't work as a 1-liner.\n\nPlease in the future CC me on changes to these tests.",
    "created_at": "2019-04-15T15:27:05Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431533",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
What's up with this?

```diff
@@ -280,8 +280,11 @@ Sage example in ./graphtheory.tex, line 1736::
 Sage example in ./graphtheory.tex, line 1746::
 
   sage: P = Permutations(range(g.order()))
-  sage: n_colors, coloration = min(
-  ....:    greedy_coloring(g, P.random_element()) for i in range(50))
+  sage: n_colors = g.order()
+  sage: for i in range(50):
+  ....:     n_col, coloration = greedy_coloring(g, P.random_element())
+  ....:     if n_col < n_colors:
+  ....:         n_colors = n_col
   sage: n_colors
   4
```

It's not clear to me why the old code wouldn't work on Python 3.  In any case this is an ugly way to write `min(...)` so I would rather just skip this test if for some reason it doesn't work as a 1-liner.

Please in the future CC me on changes to these tests.



---

archive/issue_comments_431534.json:
```json
{
    "body": "<a id='comment:6'></a>\nthis was comparing also the second argument \"coloration\" with itself, which is a dict..",
    "created_at": "2019-04-15T15:30:13Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431534",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
this was comparing also the second argument "coloration" with itself, which is a dict..



---

archive/issue_comments_431535.json:
```json
{
    "body": "<a id='comment:7'></a>\n[min()](https://docs.python.org/2/library/functions.html#min) takes a `key` argument much like `sorted` so you can take the min while comparing just `n_colors` like `min(..., key=lambda c: c[0])`, for example.",
    "created_at": "2019-04-15T15:44:31Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431535",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
[min()](https://docs.python.org/2/library/functions.html#min) takes a `key` argument much like `sorted` so you can take the min while comparing just `n_colors` like `min(..., key=lambda c: c[0])`, for example.



---

archive/issue_comments_431536.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8a1ab404602555ba05716bba376eb67812328aa\">c8a1ab4</a></td><td><code>py3: fix some doctests in French book</code></td></tr></table>\n",
    "created_at": "2019-04-15T17:18:15Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8a1ab404602555ba05716bba376eb67812328aa">c8a1ab4</a></td><td><code>py3: fix some doctests in French book</code></td></tr></table>




---

archive/issue_comments_431537.json:
```json
{
    "body": "**Changing commit** from \"[2f24d0bc55ee4a53121b47ff373f1e0522f9c09e](https://github.com/sagemath/sagetrac-mirror/commit/2f24d0bc55ee4a53121b47ff373f1e0522f9c09e)\" to \"[c8a1ab404602555ba05716bba376eb67812328aa](https://github.com/sagemath/sagetrac-mirror/commit/c8a1ab404602555ba05716bba376eb67812328aa)\".",
    "created_at": "2019-04-15T17:18:15Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2f24d0bc55ee4a53121b47ff373f1e0522f9c09e](https://github.com/sagemath/sagetrac-mirror/commit/2f24d0bc55ee4a53121b47ff373f1e0522f9c09e)" to "[c8a1ab404602555ba05716bba376eb67812328aa](https://github.com/sagemath/sagetrac-mirror/commit/c8a1ab404602555ba05716bba376eb67812328aa)".



---

archive/issue_events_246501.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-15T17:19:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246501"
}
```



---

archive/issue_events_246502.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-04-15T17:19:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246502"
}
```



---

archive/issue_comments_431538.json:
```json
{
    "body": "<a id='comment:9'></a>\ndone, thx for the suggestion",
    "created_at": "2019-04-15T17:19:05Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431538",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
done, thx for the suggestion



---

archive/issue_comments_431539.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627\">a4e1bed</a></td><td><code>py3: fix some doctests in French book</code></td></tr></table>\n",
    "created_at": "2019-04-16T05:50:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627">a4e1bed</a></td><td><code>py3: fix some doctests in French book</code></td></tr></table>




---

archive/issue_comments_431540.json:
```json
{
    "body": "**Changing commit** from \"[c8a1ab404602555ba05716bba376eb67812328aa](https://github.com/sagemath/sagetrac-mirror/commit/c8a1ab404602555ba05716bba376eb67812328aa)\" to \"[a4e1bed94546872411509738e272a690cd3b8627](https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627)\".",
    "created_at": "2019-04-16T05:50:51Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c8a1ab404602555ba05716bba376eb67812328aa](https://github.com/sagemath/sagetrac-mirror/commit/c8a1ab404602555ba05716bba376eb67812328aa)" to "[a4e1bed94546872411509738e272a690cd3b8627](https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627)".



---

archive/issue_comments_431541.json:
```json
{
    "body": "<a id='comment:11'></a>\nand the bot is now green",
    "created_at": "2019-04-16T06:57:24Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431541",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>
and the bot is now green



---

archive/issue_events_246503.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-16T09:09:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246503"
}
```



---

archive/issue_events_246504.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-04-16T09:09:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246504"
}
```



---

archive/issue_comments_431542.json:
```json
{
    "body": "<a id='comment:12'></a>\nRight, it's much better like that.",
    "created_at": "2019-04-16T09:09:33Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431542",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
Right, it's much better like that.



---

archive/issue_comments_431543.json:
```json
{
    "body": "<a id='comment:13'></a>\n+1 Thank you!",
    "created_at": "2019-04-16T11:20:04Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431543",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
+1 Thank you!



---

archive/issue_comments_431544.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/27668](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27668)\" to \"[a4e1bed94546872411509738e272a690cd3b8627](https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627)\".",
    "created_at": "2019-04-18T19:56:33Z",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27668#issuecomment-431544",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/27668](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/27668)" to "[a4e1bed94546872411509738e272a690cd3b8627](https://github.com/sagemath/sagetrac-mirror/commit/a4e1bed94546872411509738e272a690cd3b8627)".



---

archive/issue_events_246505.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-04-18T19:56:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246505"
}
```



---

archive/issue_events_246506.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a220da457afd6525d9f2dd1398bdc311e4937c68",
    "created_at": "2019-04-18T19:56:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27668",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27668#event-246506"
}
```

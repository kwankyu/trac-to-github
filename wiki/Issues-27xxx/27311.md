# Issue 27311: bug in simple limit

archive/issues_027074.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nI have found the following bug in limit:\n\n```\nsage: version()\n'SageMath version 8.6, Release Date: 2019-01-15'\nsage: f=exp(-2*x^2)-cos(2*x);f\n-cos(2*x) + e^(-2*x^2)\nsage: g=x*(sin(x))^3;g\nx*sin(x)^3\nsage: lim(f/g,x=0) # this is wrong\nund\nsage: lim(f/g,x=0,dir='-'),lim(f/g,x=0,dir='+') # the second result is wrong\n(4/3, +Infinity)\nsage: taylor(f/g,x,0,3) # this is right\n-26/45*x^2 + 4/3\nsage: lim(f/x^4,x=0) # this is right too\n4/3\n```\n\n(I am on OS X El Capitan (10.11.6).)\n\nThis seems to be a very old bug:  The results are the same for\n\n```\nsage: version()\n'SageMath Version 6.10, Release Date: 2015-12-18'\n```\n\n\nComponent: **calculus**\n\nKeywords: **limit**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/27311_\n\n",
    "created_at": "2019-02-17T16:09:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bug in simple limit",
    "type": "issue",
    "updated_at": "2023-01-29T23:06:23Z",
    "url": "https://github.com/sagemath/sage/issues/27311",
    "user": "https://github.com/GMS103"
}
```
<div id="comment:0"></div>

I have found the following bug in limit:

```
sage: version()
'SageMath version 8.6, Release Date: 2019-01-15'
sage: f=exp(-2*x^2)-cos(2*x);f
-cos(2*x) + e^(-2*x^2)
sage: g=x*(sin(x))^3;g
x*sin(x)^3
sage: lim(f/g,x=0) # this is wrong
und
sage: lim(f/g,x=0,dir='-'),lim(f/g,x=0,dir='+') # the second result is wrong
(4/3, +Infinity)
sage: taylor(f/g,x,0,3) # this is right
-26/45*x^2 + 4/3
sage: lim(f/x^4,x=0) # this is right too
4/3
```

(I am on OS X El Capitan (10.11.6).)

This seems to be a very old bug:  The results are the same for

```
sage: version()
'SageMath Version 6.10, Release Date: 2015-12-18'
```


Component: **calculus**

Keywords: **limit**

_Issue created by migration from https://trac.sagemath.org/ticket/27311_





---

archive/issue_events_372598.json:
```json
{
    "actor": "https://github.com/GMS103",
    "created_at": "2019-02-17T16:09:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372598"
}
```



---

archive/issue_events_372599.json:
```json
{
    "actor": "https://github.com/GMS103",
    "created_at": "2019-02-17T16:09:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372599"
}
```



---

archive/issue_events_372600.json:
```json
{
    "actor": "https://github.com/GMS103",
    "created_at": "2019-02-17T16:09:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372600"
}
```



---

archive/issue_events_372601.json:
```json
{
    "actor": "https://github.com/GMS103",
    "created_at": "2019-02-17T16:09:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372601"
}
```



---

archive/issue_comments_422301.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422301",
    "user": "https://github.com/embray"
}
```

<div id="comment:1" align="right">comment:1</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_372602.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372602"
}
```



---

archive/issue_events_372603.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372603"
}
```



---

archive/issue_comments_422302.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422302",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">comment:2</div>

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_372604.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372604"
}
```



---

archive/issue_events_372605.json:
```json
{
    "actor": "https://github.com/GMS103",
    "created_at": "2019-06-14T20:36:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372605"
}
```



---

archive/issue_comments_422303.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422303",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

Ticket retargeted after milestone closed



---

archive/issue_events_372606.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372606"
}
```



---

archive/issue_events_372607.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372607"
}
```



---

archive/issue_events_372608.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372608"
}
```



---

archive/issue_events_372609.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372609"
}
```



---

archive/issue_comments_422304.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422304",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_422305.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nstill the same in 9.2.beta10",
    "created_at": "2020-08-29T18:52:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422305",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

still the same in 9.2.beta10



---

archive/issue_comments_422306.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, you are right.\n\nAnything I could do?  I am only a not very experienced user of [SageMath](../wiki/SageMath).",
    "created_at": "2020-08-29T19:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422306",
    "user": "https://github.com/GMS103"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, you are right.

Anything I could do?  I am only a not very experienced user of [SageMath](../wiki/SageMath).



---

archive/issue_comments_422307.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis problem occurs only with maxima. With fricas it works as expected. But these are some of the other cases where the result is ambiguous.\n\n```\nsage: f = (1+1/x)^x\nsage: lim(f,x=0.5)\nund\nsage: lim(f,x=1/2)\nsqrt(3)\nsage: lim(f,dir='+',x=0.5)\n1.7320508075688774\nsage: lim(f,dir='-',x=0.5)\n1.7320508075688772\nsage: lim(f,dir='-',x=3/2)\n5/9*sqrt(5)*sqrt(3)\nsage: lim(f,x=3/2)\nund\nsage: lim(f,x=1.5)\n```",
    "created_at": "2020-10-11T13:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422307",
    "user": "https://github.com/ninja18"
}
```

<div id="comment:8" align="right">comment:8</div>

This problem occurs only with maxima. With fricas it works as expected. But these are some of the other cases where the result is ambiguous.

```
sage: f = (1+1/x)^x
sage: lim(f,x=0.5)
und
sage: lim(f,x=1/2)
sqrt(3)
sage: lim(f,dir='+',x=0.5)
1.7320508075688774
sage: lim(f,dir='-',x=0.5)
1.7320508075688772
sage: lim(f,dir='-',x=3/2)
5/9*sqrt(5)*sqrt(3)
sage: lim(f,x=3/2)
und
sage: lim(f,x=1.5)
```



---

archive/issue_comments_422308.json:
```json
{
    "body": "Changed keywords from none to **limit**",
    "created_at": "2020-10-13T11:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422308",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **limit**



---

archive/issue_events_372610.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372610"
}
```



---

archive/issue_events_372611.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372611"
}
```



---

archive/issue_comments_422309.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27311#issuecomment-422309",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_372612.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-07T19:29:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372612"
}
```



---

archive/issue_events_372613.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-07T19:29:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372613"
}
```



---

archive/issue_events_372614.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372614"
}
```



---

archive/issue_events_372615.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372615"
}
```



---

archive/issue_events_372616.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372616"
}
```



---

archive/issue_events_372617.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372617"
}
```



---

archive/issue_events_372618.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372618"
}
```



---

archive/issue_events_372619.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372619"
}
```



---

archive/issue_events_372620.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372620"
}
```



---

archive/issue_events_372621.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372621"
}
```



---

archive/issue_events_372622.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-29T23:06:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/27311",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27311#event-372622"
}
```

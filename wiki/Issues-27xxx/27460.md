# Issue 27460: fix issue in graph_plot_js

archive/issues_027223.json:
```json
{
    "body": "Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs\n\nThe mapping of vertices given to `d3.js` was incorrect\n\n**Branch/Commit:** [8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** David Coudert\n\nIssue created by migration from https://trac.sagemath.org/ticket/27460\n\n",
    "closed_at": "2019-03-13T18:29:16Z",
    "created_at": "2019-03-11T08:04:26Z",
    "labels": [
        "component: graph theory",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "title": "fix issue in graph_plot_js",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/27460",
    "user": "https://github.com/dcoudert"
}
```
Fix issue reported in https://groups.google.com/forum/#!topic/sage-devel/oD1jQVirJBs

The mapping of vertices given to `d3.js` was incorrect

**Branch/Commit:** [8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)

**Reviewer:** Frédéric Chapoton

**Author:** David Coudert

Issue created by migration from https://trac.sagemath.org/ticket/27460





---

archive/issue_comments_427676.json:
```json
{
    "body": "**Commit:** [771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427676",
    "user": "https://github.com/dcoudert"
}
```

**Commit:** [771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)



---

archive/issue_comments_427677.json:
```json
{
    "body": "**Branch:** [u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427677",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)



---

archive/issue_comments_427678.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03\">771b91e</a></td><td><code>trac #27460: fix ordering</code></td></tr></table>\n",
    "created_at": "2019-03-11T08:06:00Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427678",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03">771b91e</a></td><td><code>trac #27460: fix ordering</code></td></tr></table>




---

archive/issue_events_244818.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2019-03-11T08:06:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-244818"
}
```



---

archive/issue_comments_427679.json:
```json
{
    "body": "<a id='comment:2'></a>\nHaving a doctest would be good..",
    "created_at": "2019-03-11T12:40:15Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427679",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
Having a doctest would be good..



---

archive/issue_comments_427680.json:
```json
{
    "body": "**Changing commit** from \"[771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)\" to \"[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)\".",
    "created_at": "2019-03-11T13:19:27Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[771b91e451985ba2476570915ba92ab0228b8b03](https://github.com/sagemath/sagetrac-mirror/commit/771b91e451985ba2476570915ba92ab0228b8b03)" to "[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)".



---

archive/issue_comments_427681.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94\">ebddf9d</a></td><td><code>trac #27460: add doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T13:19:27Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94">ebddf9d</a></td><td><code>trac #27460: add doctest</code></td></tr></table>




---

archive/issue_comments_427682.json:
```json
{
    "body": "<a id='comment:4'></a>\nI added a doctest but it's not good. It works on my laptop with py3, but not with py2.\nThe order of the keys of the dictionaries is not the same in py2 and py3 :(\n\nwith py2, I get\n\n```\n...\"links\": [{\"strength\": 0, \"target\": 0, \"color\": \"#aaa\", \"curve\": 0, \"source\": 1, \"name\": \"\"}], \"pos\": [], \"edge_thickness\": 4, \"loops\": [], \"edge_labels\": false, \"vertex_size\": 7, \"vertex_labels\": true, \"directed\": true, \"gravity\": 0.04, \"charge\": -120, \"nodes\": [{\"group\": \"0\", \"name\": \"10\"}, {\"group\": \"0\", \"name\": \"1\"}]...\n```\nand with py3\n\n```\n...\"nodes\": [{\"name\": \"10\", ...}, {\"name\": \"1\", ...}], \"links\": [{\"source\": 1, \"target\": 0, ...}]...\n```\n\nAny suggestion is more than welcome.",
    "created_at": "2019-03-11T13:25:10Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427682",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I added a doctest but it's not good. It works on my laptop with py3, but not with py2.
The order of the keys of the dictionaries is not the same in py2 and py3 :(

with py2, I get

```
..."links": [{"strength": 0, "target": 0, "color": "#aaa", "curve": 0, "source": 1, "name": ""}], "pos": [], "edge_thickness": 4, "loops": [], "edge_labels": false, "vertex_size": 7, "vertex_labels": true, "directed": true, "gravity": 0.04, "charge": -120, "nodes": [{"group": "0", "name": "10"}, {"group": "0", "name": "1"}]...
```
and with py3

```
..."nodes": [{"name": "10", ...}, {"name": "1", ...}], "links": [{"source": 1, "target": 0, ...}]...
```

Any suggestion is more than welcome.



---

archive/issue_comments_427683.json:
```json
{
    "body": "**Changing commit** from \"[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)\" to \"[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)\".",
    "created_at": "2019-03-11T15:09:48Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427683",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ebddf9db0304488ab3f6fee747ec6131a1acfd94](https://github.com/sagemath/sagetrac-mirror/commit/ebddf9db0304488ab3f6fee747ec6131a1acfd94)" to "[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)".



---

archive/issue_comments_427684.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a\">8e5f238</a></td><td><code>trac #27460: a more robust doctest</code></td></tr></table>\n",
    "created_at": "2019-03-11T15:09:48Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427684",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a">8e5f238</a></td><td><code>trac #27460: a more robust doctest</code></td></tr></table>




---

archive/issue_comments_427685.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.",
    "created_at": "2019-03-11T15:11:17Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427685",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
OK, I found a more robust doctest that is OK for py2 and py3. Hope you like it.



---

archive/issue_comments_427686.json:
```json
{
    "body": "<a id='comment:7'></a>\nok, looks good. When patchbot is green, positive review",
    "created_at": "2019-03-11T17:03:24Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427686",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
ok, looks good. When patchbot is green, positive review



---

archive/issue_comments_427687.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2019-03-11T17:03:24Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427687",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_events_244819.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-11T18:50:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-244819"
}
```



---

archive/issue_events_244820.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-03-11T18:50:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-244820"
}
```



---

archive/issue_events_244821.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-244821"
}
```



---

archive/issue_events_244822.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "db49315d168b6a2e9adc72da93d1cc48570be05a",
    "created_at": "2019-03-13T18:29:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/27460#event-244822"
}
```



---

archive/issue_comments_427688.json:
```json
{
    "body": "**Changing branch** from \"[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)\" to \"[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)\".",
    "created_at": "2019-03-13T18:29:16Z",
    "issue": "https://github.com/sagemath/sage/issues/27460",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/27460#issuecomment-427688",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/dcoudert/27460_graph_plot_js](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/27460_graph_plot_js)" to "[8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a](https://github.com/sagemath/sagetrac-mirror/commit/8e5f238b49bd5a0393b5e2ffd5166fcc742cd40a)".

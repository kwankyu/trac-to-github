# Issue 16685: power series reversion using flint

archive/issues_016448.json:
```json
{
    "body": "Adds series reversion for integer and rational flint polynomials\nwhich is much faster than the current implementation for series\nreversion (sage/pari).\n\nSince it is implemented as a method for polynomials the change is\nrather small and non-intrusive (in particular it doesn't require\nto implement power series using flint).\n\nTo use it for power series reversion (at the moment) the series has\nto be converted to a (flint) polynomial first, reverted using\n\"revert_series(n=prec)\" and later be converted back to a power series.\n\nAcknowledgements: Thanks for the help on IRC!\n\n**CC:**  jpflori\n\n**Keywords:** flint power series reversion\n\n**Branch/Commit:** [c243b5d90ba31cb21dad55df65981ecca7f93575](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)\n\n**Reviewer:** Jean-Pierre Flori\n\n**Author:** Jonas Jermann\n\nIssue created by migration from https://trac.sagemath.org/ticket/16685\n\n",
    "closed_at": "2014-07-28T16:27:00Z",
    "created_at": "2014-07-19T23:02:42Z",
    "labels": [
        "component: number theory",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.3",
    "title": "power series reversion using flint",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/16685",
    "user": "https://github.com/jjermann"
}
```
Adds series reversion for integer and rational flint polynomials
which is much faster than the current implementation for series
reversion (sage/pari).

Since it is implemented as a method for polynomials the change is
rather small and non-intrusive (in particular it doesn't require
to implement power series using flint).

To use it for power series reversion (at the moment) the series has
to be converted to a (flint) polynomial first, reverted using
"revert_series(n=prec)" and later be converted back to a power series.

Acknowledgements: Thanks for the help on IRC!

**CC:**  jpflori

**Keywords:** flint power series reversion

**Branch/Commit:** [c243b5d90ba31cb21dad55df65981ecca7f93575](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)

**Reviewer:** Jean-Pierre Flori

**Author:** Jonas Jermann

Issue created by migration from https://trac.sagemath.org/ticket/16685





---

archive/issue_comments_220536.json:
```json
{
    "body": "<a id='comment:1'></a>\nHello,\n\nI have made a new branch based on yours, with a few small cleanup changes.\n\nYou have to put your real name in the `author` field of the ticket (here above).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e\">c26bac1</a></td><td><code>trac #16685 reviewer patch, adding doctest and putting ValueError in py3 style</code></td></tr></table>\n",
    "created_at": "2014-07-20T08:09:11Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220536",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
Hello,

I have made a new branch based on yours, with a few small cleanup changes.

You have to put your real name in the `author` field of the ticket (here above).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e">c26bac1</a></td><td><code>trac #16685 reviewer patch, adding doctest and putting ValueError in py3 style</code></td></tr></table>




---

archive/issue_comments_220537.json:
```json
{
    "body": "**Changing commit** from \"[36f13335c2a6e11b0cf423d87880312e0ab4a77e](https://github.com/sagemath/sagetrac-mirror/commit/36f13335c2a6e11b0cf423d87880312e0ab4a77e)\" to \"[c26bac1016c12b7ff440886c7bf69a18026a642e](https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e)\".",
    "created_at": "2014-07-20T08:09:11Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220537",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[36f13335c2a6e11b0cf423d87880312e0ab4a77e](https://github.com/sagemath/sagetrac-mirror/commit/36f13335c2a6e11b0cf423d87880312e0ab4a77e)" to "[c26bac1016c12b7ff440886c7bf69a18026a642e](https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e)".



---

archive/issue_comments_220538.json:
```json
{
    "body": "**Changing branch** from \"[u/jj/revert_series](https://github.com/sagemath/sagetrac-mirror/tree/u/jj/revert_series)\" to \"[public/ticket/16685](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16685)\".",
    "created_at": "2014-07-20T08:09:11Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220538",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/jj/revert_series](https://github.com/sagemath/sagetrac-mirror/tree/u/jj/revert_series)" to "[public/ticket/16685](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16685)".



---

archive/issue_comments_220539.json:
```json
{
    "body": "**Changing author** from \"jj\" to \"Jonas Jermann\".",
    "created_at": "2014-07-20T16:05:47Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220539",
    "user": "https://github.com/fchapoton"
}
```

**Changing author** from "jj" to "Jonas Jermann".



---

archive/issue_events_150649.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2014-07-20T16:05:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150649"
}
```



---

archive/issue_events_150650.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-07-22T08:45:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150650"
}
```



---

archive/issue_events_150651.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-07-22T08:45:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150651"
}
```



---

archive/issue_comments_220540.json:
```json
{
    "body": "<a id='comment:3'></a>\nA few remarks:\n* this looks strange:\n\n```\n...revert_series(5+1)\n```\nwhy not put 6 in there?\n* please beautify the docstring `f(self(x)) = ...` using sphinx syntax.\n* the variable name of the power series could be used in `and +1 or -1 as the coefficient for x^1`\n* please put `sig_on/sig_off` around the calls to the FLINT C function calls (unless you're sure it will always be super fast, but I fear it won't be the case for series with a large number of terms/polynomials of high degree).",
    "created_at": "2014-07-22T08:45:59Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220540",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>
A few remarks:
* this looks strange:

```
...revert_series(5+1)
```
why not put 6 in there?
* please beautify the docstring `f(self(x)) = ...` using sphinx syntax.
* the variable name of the power series could be used in `and +1 or -1 as the coefficient for x^1`
* please put `sig_on/sig_off` around the calls to the FLINT C function calls (unless you're sure it will always be super fast, but I fear it won't be the case for series with a large number of terms/polynomials of high degree).



---

archive/issue_comments_220541.json:
```json
{
    "body": "**Reviewer:** Jean-Pierre Flori",
    "created_at": "2014-07-22T08:45:59Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220541",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** Jean-Pierre Flori



---

archive/issue_comments_220542.json:
```json
{
    "body": "**Changing commit** from \"[c26bac1016c12b7ff440886c7bf69a18026a642e](https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e)\" to \"[f86776fa69730c79f364d99a1e2514b23ebd31b7](https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7)\".",
    "created_at": "2014-07-22T11:56:38Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c26bac1016c12b7ff440886c7bf69a18026a642e](https://github.com/sagemath/sagetrac-mirror/commit/c26bac1016c12b7ff440886c7bf69a18026a642e)" to "[f86776fa69730c79f364d99a1e2514b23ebd31b7](https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7)".



---

archive/issue_comments_220543.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7\">f86776f</a></td><td><code>improved documentation/doctests and added sig_on/sig_off, following the suggestions of the review</code></td></tr></table>\n",
    "created_at": "2014-07-22T11:56:38Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7">f86776f</a></td><td><code>improved documentation/doctests and added sig_on/sig_off, following the suggestions of the review</code></td></tr></table>




---

archive/issue_comments_220544.json:
```json
{
    "body": "revert_series for finite fields (fails!)",
    "created_at": "2014-07-22T13:20:18Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220544",
    "user": "https://github.com/jjermann"
}
```

revert_series for finite fields (fails!)



---

archive/attachments_021253.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "zmod_fails.diff",
    "asset_url": "tarball://root/attachments/ticket16685/zmod_fails.diff",
    "created_at": "2014-07-22T14:00:46Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket16685/zmod_fails.diff",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```



---

archive/issue_comments_220545.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Attachment:** [zmod_fails.diff](https://github.com/sagemath/sage/files/ticket16685/zmod_fails.diff)\n\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921\">315b136</a></td><td><code>added support for flint's revert_series over finite fields, more documentation improvements</code></td></tr></table>\n",
    "created_at": "2014-07-22T14:00:46Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Attachment:** [zmod_fails.diff](https://github.com/sagemath/sage/files/ticket16685/zmod_fails.diff)

**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921">315b136</a></td><td><code>added support for flint's revert_series over finite fields, more documentation improvements</code></td></tr></table>




---

archive/issue_comments_220546.json:
```json
{
    "body": "**Changing commit** from \"[f86776fa69730c79f364d99a1e2514b23ebd31b7](https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7)\" to \"[315b136a87cd93815bfc43c4455b8e9ec816c921](https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921)\".",
    "created_at": "2014-07-22T14:00:46Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f86776fa69730c79f364d99a1e2514b23ebd31b7](https://github.com/sagemath/sagetrac-mirror/commit/f86776fa69730c79f364d99a1e2514b23ebd31b7)" to "[315b136a87cd93815bfc43c4455b8e9ec816c921](https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921)".



---

archive/issue_events_150652.json:
```json
{
    "actor": "https://github.com/jjermann",
    "created_at": "2014-07-22T14:05:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150652"
}
```



---

archive/issue_events_150653.json:
```json
{
    "actor": "https://github.com/jjermann",
    "created_at": "2014-07-22T14:05:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150653"
}
```



---

archive/issue_events_150654.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-07-28T10:02:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150654"
}
```



---

archive/issue_events_150655.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-07-28T10:02:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150655"
}
```



---

archive/issue_comments_220547.json:
```json
{
    "body": "<a id='comment:7'></a>\nLooks quite ok.\nLast rant: please use Python 3 string formatting.",
    "created_at": "2014-07-28T10:02:07Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220547",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:7'></a>
Looks quite ok.
Last rant: please use Python 3 string formatting.



---

archive/issue_comments_220548.json:
```json
{
    "body": "**Changing commit** from \"[315b136a87cd93815bfc43c4455b8e9ec816c921](https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921)\" to \"[c243b5d90ba31cb21dad55df65981ecca7f93575](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)\".",
    "created_at": "2014-07-28T11:42:47Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[315b136a87cd93815bfc43c4455b8e9ec816c921](https://github.com/sagemath/sagetrac-mirror/commit/315b136a87cd93815bfc43c4455b8e9ec816c921)" to "[c243b5d90ba31cb21dad55df65981ecca7f93575](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)".



---

archive/issue_comments_220549.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575\">c243b5d</a></td><td><code>using python3 string formatting</code></td></tr></table>\n",
    "created_at": "2014-07-28T11:42:47Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575">c243b5d</a></td><td><code>using python3 string formatting</code></td></tr></table>




---

archive/issue_events_150656.json:
```json
{
    "actor": "https://github.com/jjermann",
    "created_at": "2014-07-28T11:44:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150656"
}
```



---

archive/issue_events_150657.json:
```json
{
    "actor": "https://github.com/jjermann",
    "created_at": "2014-07-28T11:44:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150657"
}
```



---

archive/issue_events_150658.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-07-28T11:54:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150658"
}
```



---

archive/issue_events_150659.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2014-07-28T11:54:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150659"
}
```



---

archive/issue_events_150660.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-07-28T16:27:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150660"
}
```



---

archive/issue_events_150661.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b1df5f9eb688260aa344ef186c88d2142c43a2ac",
    "created_at": "2014-07-28T16:27:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/16685#event-150661"
}
```



---

archive/issue_comments_220550.json:
```json
{
    "body": "**Changing branch** from \"[public/ticket/16685](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16685)\" to \"[c243b5d90ba31cb21dad55df65981ecca7f93575](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)\".",
    "created_at": "2014-07-28T16:27:00Z",
    "issue": "https://github.com/sagemath/sage/issues/16685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/16685#issuecomment-220550",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/ticket/16685](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/16685)" to "[c243b5d90ba31cb21dad55df65981ecca7f93575](https://github.com/sagemath/sagetrac-mirror/commit/c243b5d90ba31cb21dad55df65981ecca7f93575)".

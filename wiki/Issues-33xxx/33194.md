# Issue 33194: openblas: Update to 0.3.20

archive/issues_032957.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nhttps://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19\nhas various fixes, in particular for Apple M1\n\nhttps://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20\nbrings some fixes including \"fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds\"\n\n\nCC:  @vbraun\n\nComponent: **packages: standard**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[`91e156a`](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/33194_\n\n",
    "closed_at": "2022-02-27T22:00:25Z",
    "created_at": "2022-01-17T03:59:22Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "openblas: Update to 0.3.20",
    "type": "issue",
    "updated_at": "2022-02-27T22:00:25Z",
    "url": "https://github.com/sagemath/sage/issues/33194",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19
has various fixes, in particular for Apple M1

https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20
brings some fixes including "fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds"


CC:  @vbraun

Component: **packages: standard**

Author: **Matthias Koeppe**

Branch/Commit: **[`91e156a`](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/33194_





---

archive/issue_events_454478.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454478"
}
```



---

archive/issue_events_454479.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454479"
}
```



---

archive/issue_events_454480.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454480"
}
```



---

archive/issue_events_454481.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T03:59:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454481"
}
```



---

archive/issue_comments_536564.json:
```json
{
    "body": "Dependencies: **#33191**",
    "created_at": "2022-01-17T04:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536564",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#33191**



---

archive/issue_comments_536565.json:
```json
{
    "body": "Branch: **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)**",
    "created_at": "2022-01-17T06:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536565",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)**



---

archive/issue_comments_536566.json:
```json
{
    "body": "Changed dependencies from **#33191** to none",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536566",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#33191** to none



---

archive/issue_comments_536567.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536567",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_454482.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T06:16:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454482"
}
```



---

archive/issue_comments_536568.json:
```json
{
    "body": "Commit: **[`f2a952e`](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)**",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536568",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`f2a952e`](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)**



---

archive/issue_comments_536569.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e79caf980e71a64d3c071007503c46283519cba8\"><code>e79caf9</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa\"><code>f2a952e</code></a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr></table>\n",
    "created_at": "2022-01-17T06:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536569",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e79caf980e71a64d3c071007503c46283519cba8"><code>e79caf9</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa"><code>f2a952e</code></a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr></table>




---

archive/issue_comments_536570.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSetting this to 9.6 because on users on M1 can build successfully with homebrew's openblas (0.3.19), [#30592 comment:61](https://github.com/sagemath/sage/issues/30592#comment:61)",
    "created_at": "2022-01-17T06:27:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536570",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Setting this to 9.6 because on users on M1 can build successfully with homebrew's openblas (0.3.19), [#30592 comment:61](https://github.com/sagemath/sage/issues/30592#comment:61)



---

archive/issue_events_454483.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T06:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454483"
}
```



---

archive/issue_events_454484.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-17T06:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454484"
}
```



---

archive/issue_comments_536571.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe patchbot (experimental version that can handle packages) has found a failing doctest \n\n```\nFile \"src/sage/plot/plot.py\", line 1782, in sage.plot.plot.plot\nFailed example:\n    plot(f, (x, -3.5, 3.5), detect_poles='show', exclude=[-3..3], ymin=-5, ymax=5)\nExpected:\n    Graphics object consisting of 12 graphics primitives\nGot:\n    Graphics object consisting of 13 graphics primitives\n```\n\nnot clear to me if and how this is related to the update here",
    "created_at": "2022-01-24T17:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536571",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

The patchbot (experimental version that can handle packages) has found a failing doctest 

```
File "src/sage/plot/plot.py", line 1782, in sage.plot.plot.plot
Failed example:
    plot(f, (x, -3.5, 3.5), detect_poles='show', exclude=[-3..3], ymin=-5, ymax=5)
Expected:
    Graphics object consisting of 12 graphics primitives
Got:
    Graphics object consisting of 13 graphics primitives
```

not clear to me if and how this is related to the update here



---

archive/issue_comments_536572.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nUnrelated, this is #33129",
    "created_at": "2022-01-24T19:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536572",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Unrelated, this is #33129



---

archive/issue_comments_536573.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nand 0.3.20 is out",
    "created_at": "2022-02-25T05:32:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536573",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

and 0.3.20 is out



---

archive/issue_comments_536574.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b34b162b047f12d1a039b0e2dc9825f7db62cda0\"><code>b34b162</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d221923cc4fc212764c12ac98a91b020389abcd\"><code>7d22192</code></a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60\"><code>91e156a</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.20</code></td></tr></table>\n",
    "created_at": "2022-02-25T05:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536574",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b34b162b047f12d1a039b0e2dc9825f7db62cda0"><code>b34b162</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.19</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d221923cc4fc212764c12ac98a91b020389abcd"><code>7d22192</code></a></td><td><code>build/pkgs/openblas/patches/trsv-fix-from-pr-3422.patch: Remove (included in 0.3.19)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60"><code>91e156a</code></a></td><td><code>build/pkgs/openblas: Update to 0.3.20</code></td></tr></table>




---

archive/issue_comments_536575.json:
```json
{
    "body": "Changed commit from **[`f2a952e`](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)** to **[`91e156a`](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**",
    "created_at": "2022-02-25T05:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536575",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f2a952e`](https://github.com/sagemath/sagetrac-mirror/commit/f2a952eda732a329756c868b53e126f450c082aa)** to **[`91e156a`](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**



---

archive/issue_comments_536576.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19\n has various fixes, in particular for Apple M1\n \n+https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20\n+brings some fixes including \"fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds\"\n+\n``````\n",
    "created_at": "2022-02-25T05:35:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536576",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.19
 has various fixes, in particular for Apple M1
 
+https://github.com/xianyi/OpenBLAS/releases/tag/v0.3.20
+brings some fixes including "fixed miscompilation of AVX512 code in `DYNAMIC_ARCH` builds"
+
``````




---

archive/issue_events_454485.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-25T05:35:57Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "title_is": "openblas: Update to 0.3.20",
    "title_was": "openblas: Update to 0.3.19",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454485"
}
```



---

archive/issue_comments_536577.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nBuilds for me on Ubuntu. It will be good to get this in quickly and tested by the other devs.",
    "created_at": "2022-02-27T07:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536577",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Builds for me on Ubuntu. It will be good to get this in quickly and tested by the other devs.



---

archive/issue_events_454486.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-02-27T07:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454486"
}
```



---

archive/issue_events_454487.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-02-27T07:55:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454487"
}
```



---

archive/issue_comments_536578.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-02-27T07:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536578",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_536579.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)** to **[`91e156a`](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**",
    "created_at": "2022-02-27T22:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33194#issuecomment-536579",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/openblas__update_to_0_3_19](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/openblas__update_to_0_3_19)** to **[`91e156a`](https://github.com/sagemath/sagetrac-mirror/commit/91e156a8600822ca18786c8cc2846c9918742c60)**



---

archive/issue_events_454488.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-27T22:00:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454488"
}
```



---

archive/issue_events_454489.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "70a841107eeb79995b5c0d24c685c9fde0405702",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-27T22:00:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/33194",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33194#event-454489"
}
```

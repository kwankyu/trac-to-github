# Issue 33238: a bijectionist's toolkit

archive/issues_033001.json:
```json
{
    "body": "We provide a toolkit for the combinatorialist to help find functions (\"statistics\") `s: A -> Z` and bijections `A -> B` given sequences of finite sets `A` and `B` that satisfy various constraints.\n\nDepends on #34881\n\nDepends on #34878\n\n**CC:**  stumpc5 @tscrim @fchapoton\n\n**Branch:** [u/mantepse/a_bijectionist_s_toolkit](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/a_bijectionist_s_toolkit)\n\n**Commit:** [a3364dec31f6eee2ca1c2f2777a39df5a57a716a](https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a)\n\n**Author:** Alexander Grosz, Tobias Kietreiber, Stephan Pfannerer, Martin Rubey\n\nIssue created by migration from https://trac.sagemath.org/ticket/33238\n\n",
    "created_at": "2022-01-28T10:16:02Z",
    "labels": [
        "component: combinatorics",
        "enhancement",
        "needs review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "title": "a bijectionist's toolkit",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/33238",
    "user": "https://github.com/mantepse"
}
```
We provide a toolkit for the combinatorialist to help find functions ("statistics") `s: A -> Z` and bijections `A -> B` given sequences of finite sets `A` and `B` that satisfy various constraints.

Depends on #34881

Depends on #34878

**CC:**  stumpc5 @tscrim @fchapoton

**Branch:** [u/mantepse/a_bijectionist_s_toolkit](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/a_bijectionist_s_toolkit)

**Commit:** [a3364dec31f6eee2ca1c2f2777a39df5a57a716a](https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a)

**Author:** Alexander Grosz, Tobias Kietreiber, Stephan Pfannerer, Martin Rubey

Issue created by migration from https://trac.sagemath.org/ticket/33238





---

archive/issue_events_300366.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T04:32:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300366"
}
```



---

archive/issue_events_300367.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T04:32:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300367"
}
```



---

archive/issue_events_300368.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300368"
}
```



---

archive/issue_events_300369.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300369"
}
```



---

archive/issue_comments_539917.json:
```json
{
    "body": "**Branch:** [u/mantepse/a_bijectionist_s_toolkit](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/a_bijectionist_s_toolkit)",
    "created_at": "2022-10-18T12:56:26Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539917",
    "user": "https://github.com/mantepse"
}
```

**Branch:** [u/mantepse/a_bijectionist_s_toolkit](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/a_bijectionist_s_toolkit)



---

archive/issue_events_300370.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-10-18T13:04:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300370"
}
```



---

archive/issue_comments_539918.json:
```json
{
    "body": "**Commit:** [6d7ab9c14e94bffa959e9c310ee3d16529006d77](https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77)",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539918",
    "user": "https://github.com/mantepse"
}
```

**Commit:** [6d7ab9c14e94bffa959e9c310ee3d16529006d77](https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77)



---

archive/issue_comments_539919.json:
```json
{
    "body": "<a id='comment:4'></a>\nComments welcome!  In particular, it would be wonderful to find more interesting applications.  \n\nIn short: given two finite sets `A` and `B`, a statistic `tau: B -> Z`, and a set partition `P` of `A`, the program finds all possible statistics `s: A -> Z` which have the same distribution as `tau` but are constant on the blocks of `P`.\n\nThere is still some ongoing work. In particular, we try to implement a cache of solutions, which is checked for counterexamples before asking the solver to produce a counterexample from scratch.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77\">6d7ab9c</a></td><td><code>initial commit</code></td></tr></table>\n",
    "created_at": "2022-10-18T13:04:06Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539919",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:4'></a>
Comments welcome!  In particular, it would be wonderful to find more interesting applications.  

In short: given two finite sets `A` and `B`, a statistic `tau: B -> Z`, and a set partition `P` of `A`, the program finds all possible statistics `s: A -> Z` which have the same distribution as `tau` but are constant on the blocks of `P`.

There is still some ongoing work. In particular, we try to implement a cache of solutions, which is checked for counterexamples before asking the solver to produce a counterexample from scratch.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77">6d7ab9c</a></td><td><code>initial commit</code></td></tr></table>




---

archive/issue_comments_539920.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc\">6149eb2</a></td><td><code>make the linter happier</code></td></tr></table>\n",
    "created_at": "2022-10-18T13:23:57Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc">6149eb2</a></td><td><code>make the linter happier</code></td></tr></table>




---

archive/issue_comments_539921.json:
```json
{
    "body": "**Changing commit** from \"[6d7ab9c14e94bffa959e9c310ee3d16529006d77](https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77)\" to \"[6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc](https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc)\".",
    "created_at": "2022-10-18T13:23:57Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539921",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6d7ab9c14e94bffa959e9c310ee3d16529006d77](https://github.com/sagemath/sagetrac-mirror/commit/6d7ab9c14e94bffa959e9c310ee3d16529006d77)" to "[6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc](https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc)".



---

archive/issue_comments_539922.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621\">9d4bfb9</a></td><td><code>remove useless assignment</code></td></tr></table>\n",
    "created_at": "2022-10-18T16:10:17Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621">9d4bfb9</a></td><td><code>remove useless assignment</code></td></tr></table>




---

archive/issue_comments_539923.json:
```json
{
    "body": "**Changing commit** from \"[6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc](https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc)\" to \"[9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621](https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621)\".",
    "created_at": "2022-10-18T16:10:17Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc](https://github.com/sagemath/sagetrac-mirror/commit/6149eb25ff2301cd9ac7f41f8c2c6a6da367dccc)" to "[9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621](https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621)".



---

archive/issue_comments_539924.json:
```json
{
    "body": "**Changing commit** from \"[9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621](https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621)\" to \"[6ee34e1d761af4b8ec23c721a12a0d123318661a](https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a)\".",
    "created_at": "2022-10-18T22:37:08Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621](https://github.com/sagemath/sagetrac-mirror/commit/9d4bfb97b1667fc7fc7e58527a9d8beae9e1f621)" to "[6ee34e1d761af4b8ec23c721a12a0d123318661a](https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a)".



---

archive/issue_comments_539925.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a\">6ee34e1</a></td><td><code>make initialisation more efficient</code></td></tr></table>\n",
    "created_at": "2022-10-18T22:37:08Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a">6ee34e1</a></td><td><code>make initialisation more efficient</code></td></tr></table>




---

archive/issue_comments_539926.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797\">1a14bcf</a></td><td><code>consistently name variable</code></td></tr></table>\n",
    "created_at": "2022-10-18T22:50:28Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797">1a14bcf</a></td><td><code>consistently name variable</code></td></tr></table>




---

archive/issue_comments_539927.json:
```json
{
    "body": "**Changing commit** from \"[6ee34e1d761af4b8ec23c721a12a0d123318661a](https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a)\" to \"[1a14bcfcbd8202fb81481a0017c1df0974547797](https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797)\".",
    "created_at": "2022-10-18T22:50:28Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539927",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6ee34e1d761af4b8ec23c721a12a0d123318661a](https://github.com/sagemath/sagetrac-mirror/commit/6ee34e1d761af4b8ec23c721a12a0d123318661a)" to "[1a14bcfcbd8202fb81481a0017c1df0974547797](https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797)".



---

archive/issue_comments_539928.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb\">0901ec7</a></td><td><code>slightly improve documentation</code></td></tr></table>\n",
    "created_at": "2022-10-19T15:02:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539928",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb">0901ec7</a></td><td><code>slightly improve documentation</code></td></tr></table>




---

archive/issue_comments_539929.json:
```json
{
    "body": "**Changing commit** from \"[1a14bcfcbd8202fb81481a0017c1df0974547797](https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797)\" to \"[0901ec7a2dd6de58de2307489e844dd2978d79bb](https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb)\".",
    "created_at": "2022-10-19T15:02:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1a14bcfcbd8202fb81481a0017c1df0974547797](https://github.com/sagemath/sagetrac-mirror/commit/1a14bcfcbd8202fb81481a0017c1df0974547797)" to "[0901ec7a2dd6de58de2307489e844dd2978d79bb](https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb)".



---

archive/issue_comments_539930.json:
```json
{
    "body": "**Changing commit** from \"[0901ec7a2dd6de58de2307489e844dd2978d79bb](https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb)\" to \"[c39d653071d1d00b73fca4bf961bab8d4a7ba360](https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360)\".",
    "created_at": "2022-11-02T09:55:46Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0901ec7a2dd6de58de2307489e844dd2978d79bb](https://github.com/sagemath/sagetrac-mirror/commit/0901ec7a2dd6de58de2307489e844dd2978d79bb)" to "[c39d653071d1d00b73fca4bf961bab8d4a7ba360](https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360)".



---

archive/issue_comments_539931.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360\">c39d653</a></td><td><code>non-copying intersection, to save memory when there are almost no restrictions on the values of a block</code></td></tr></table>\n",
    "created_at": "2022-11-02T09:55:46Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360">c39d653</a></td><td><code>non-copying intersection, to save memory when there are almost no restrictions on the values of a block</code></td></tr></table>




---

archive/issue_comments_539932.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb\">2f0bb0e</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit</code></td></tr></table>\n",
    "created_at": "2022-12-05T08:16:49Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb">2f0bb0e</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit</code></td></tr></table>




---

archive/issue_comments_539933.json:
```json
{
    "body": "**Changing commit** from \"[c39d653071d1d00b73fca4bf961bab8d4a7ba360](https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360)\" to \"[2f0bb0e7fd9620f47ece110e2364295205923ecb](https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb)\".",
    "created_at": "2022-12-05T08:16:49Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539933",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c39d653071d1d00b73fca4bf961bab8d4a7ba360](https://github.com/sagemath/sagetrac-mirror/commit/c39d653071d1d00b73fca4bf961bab8d4a7ba360)" to "[2f0bb0e7fd9620f47ece110e2364295205923ecb](https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb)".



---

archive/issue_comments_539934.json:
```json
{
    "body": "**Changing commit** from \"[2f0bb0e7fd9620f47ece110e2364295205923ecb](https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb)\" to \"[321ba43b09501549f459a0ec0e70349ade428c92](https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92)\".",
    "created_at": "2022-12-05T08:41:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539934",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2f0bb0e7fd9620f47ece110e2364295205923ecb](https://github.com/sagemath/sagetrac-mirror/commit/2f0bb0e7fd9620f47ece110e2364295205923ecb)" to "[321ba43b09501549f459a0ec0e70349ade428c92](https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92)".



---

archive/issue_comments_539935.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92\">321ba43</a></td><td><code>start to cache solutions</code></td></tr></table>\n",
    "created_at": "2022-12-05T08:41:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92">321ba43</a></td><td><code>start to cache solutions</code></td></tr></table>




---

archive/issue_comments_539936.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2\">306395c</a></td><td><code>finish implementation of cache</code></td></tr></table>\n",
    "created_at": "2022-12-21T15:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539936",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2">306395c</a></td><td><code>finish implementation of cache</code></td></tr></table>




---

archive/issue_comments_539937.json:
```json
{
    "body": "**Changing commit** from \"[321ba43b09501549f459a0ec0e70349ade428c92](https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92)\" to \"[306395cf92435f6abc1656c7677cbb68ef7b02b2](https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2)\".",
    "created_at": "2022-12-21T15:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539937",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[321ba43b09501549f459a0ec0e70349ade428c92](https://github.com/sagemath/sagetrac-mirror/commit/321ba43b09501549f459a0ec0e70349ade428c92)" to "[306395cf92435f6abc1656c7677cbb68ef7b02b2](https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2)".



---

archive/issue_comments_539938.json:
```json
{
    "body": "**Changing commit** from \"[306395cf92435f6abc1656c7677cbb68ef7b02b2](https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2)\" to \"[1ac09787fd03c114725a775cdf22b6e14f108446](https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446)\".",
    "created_at": "2022-12-21T23:42:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[306395cf92435f6abc1656c7677cbb68ef7b02b2](https://github.com/sagemath/sagetrac-mirror/commit/306395cf92435f6abc1656c7677cbb68ef7b02b2)" to "[1ac09787fd03c114725a775cdf22b6e14f108446](https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446)".



---

archive/issue_comments_539939.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a8e564b8fa42f37f52bfbc8706c56c1ce2e5029\">1a8e564</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446\">1ac0978</a></td><td><code>add some documentation and doctests, slightly simplify code</code></td></tr></table>\n",
    "created_at": "2022-12-21T23:42:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a8e564b8fa42f37f52bfbc8706c56c1ce2e5029">1a8e564</a></td><td><code>Merge branch 'develop' of trac.sagemath.org:sage into t/33238/a_bijectionist_s_toolkit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446">1ac0978</a></td><td><code>add some documentation and doctests, slightly simplify code</code></td></tr></table>




---

archive/issue_comments_539940.json:
```json
{
    "body": "<a id='comment:15'></a>\nThere are still some doctests and some documentation missing, but otherwise this is ready.",
    "created_at": "2022-12-21T23:55:04Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539940",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:15'></a>
There are still some doctests and some documentation missing, but otherwise this is ready.



---

archive/issue_comments_539941.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c\">47945ac</a></td><td><code>add missing documentation in table of contents</code></td></tr></table>\n",
    "created_at": "2022-12-22T00:06:01Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c">47945ac</a></td><td><code>add missing documentation in table of contents</code></td></tr></table>




---

archive/issue_comments_539942.json:
```json
{
    "body": "**Changing commit** from \"[1ac09787fd03c114725a775cdf22b6e14f108446](https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446)\" to \"[47945ac2bbdbd927a6aaef8c72ead62d2922c94c](https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c)\".",
    "created_at": "2022-12-22T00:06:01Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1ac09787fd03c114725a775cdf22b6e14f108446](https://github.com/sagemath/sagetrac-mirror/commit/1ac09787fd03c114725a775cdf22b6e14f108446)" to "[47945ac2bbdbd927a6aaef8c72ead62d2922c94c](https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c)".



---

archive/issue_comments_539943.json:
```json
{
    "body": "**Changing commit** from \"[47945ac2bbdbd927a6aaef8c72ead62d2922c94c](https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c)\" to \"[19c3d8fdc82471993ab800923eaeb2494c7551c7](https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7)\".",
    "created_at": "2022-12-22T10:05:12Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[47945ac2bbdbd927a6aaef8c72ead62d2922c94c](https://github.com/sagemath/sagetrac-mirror/commit/47945ac2bbdbd927a6aaef8c72ead62d2922c94c)" to "[19c3d8fdc82471993ab800923eaeb2494c7551c7](https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7)".



---

archive/issue_comments_539944.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7\">19c3d8f</a></td><td><code>mark doctests as long, slightly simplify logic</code></td></tr></table>\n",
    "created_at": "2022-12-22T10:05:12Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7">19c3d8f</a></td><td><code>mark doctests as long, slightly simplify logic</code></td></tr></table>




---

archive/issue_comments_539945.json:
```json
{
    "body": "**Changing commit** from \"[19c3d8fdc82471993ab800923eaeb2494c7551c7](https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7)\" to \"[eca857ebb1c8f29abd4e7afb7f386f98b18584d5](https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5)\".",
    "created_at": "2022-12-22T22:25:49Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[19c3d8fdc82471993ab800923eaeb2494c7551c7](https://github.com/sagemath/sagetrac-mirror/commit/19c3d8fdc82471993ab800923eaeb2494c7551c7)" to "[eca857ebb1c8f29abd4e7afb7f386f98b18584d5](https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5)".



---

archive/issue_comments_539946.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5\">eca857e</a></td><td><code>slightly simplify, more doctests</code></td></tr></table>\n",
    "created_at": "2022-12-22T22:25:49Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5">eca857e</a></td><td><code>slightly simplify, more doctests</code></td></tr></table>




---

archive/issue_comments_539947.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f\">a04d146</a></td><td><code>doctest _find_counter_example</code></td></tr></table>\n",
    "created_at": "2022-12-22T22:44:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f">a04d146</a></td><td><code>doctest _find_counter_example</code></td></tr></table>




---

archive/issue_comments_539948.json:
```json
{
    "body": "**Changing commit** from \"[eca857ebb1c8f29abd4e7afb7f386f98b18584d5](https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5)\" to \"[a04d1460832a87550ef18bb1f6767f4240d6230f](https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f)\".",
    "created_at": "2022-12-22T22:44:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eca857ebb1c8f29abd4e7afb7f386f98b18584d5](https://github.com/sagemath/sagetrac-mirror/commit/eca857ebb1c8f29abd4e7afb7f386f98b18584d5)" to "[a04d1460832a87550ef18bb1f6767f4240d6230f](https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f)".



---

archive/issue_comments_539949.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c\">3508426</a></td><td><code>doctest add_distribution_constraints and add_intertwing_relation_constraints</code></td></tr></table>\n",
    "created_at": "2022-12-22T23:08:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c">3508426</a></td><td><code>doctest add_distribution_constraints and add_intertwing_relation_constraints</code></td></tr></table>




---

archive/issue_comments_539950.json:
```json
{
    "body": "**Changing commit** from \"[a04d1460832a87550ef18bb1f6767f4240d6230f](https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f)\" to \"[3508426a9d10c3c904f998cdfe55447c4753cf5c](https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c)\".",
    "created_at": "2022-12-22T23:08:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a04d1460832a87550ef18bb1f6767f4240d6230f](https://github.com/sagemath/sagetrac-mirror/commit/a04d1460832a87550ef18bb1f6767f4240d6230f)" to "[3508426a9d10c3c904f998cdfe55447c4753cf5c](https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c)".



---

archive/issue_comments_539951.json:
```json
{
    "body": "**Changing commit** from \"[3508426a9d10c3c904f998cdfe55447c4753cf5c](https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c)\" to \"[0ac618c968e976d19fd2c61c2462611ce8f0cc3d](https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d)\".",
    "created_at": "2022-12-22T23:38:02Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3508426a9d10c3c904f998cdfe55447c4753cf5c](https://github.com/sagemath/sagetrac-mirror/commit/3508426a9d10c3c904f998cdfe55447c4753cf5c)" to "[0ac618c968e976d19fd2c61c2462611ce8f0cc3d](https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d)".



---

archive/issue_comments_539952.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d\">0ac618c</a></td><td><code>doctest _preprocess_intertwining_relations, _solution, _show_bmilp, _initialize_new_bmilp, _veto_current_solution</code></td></tr></table>\n",
    "created_at": "2022-12-22T23:38:02Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d">0ac618c</a></td><td><code>doctest _preprocess_intertwining_relations, _solution, _show_bmilp, _initialize_new_bmilp, _veto_current_solution</code></td></tr></table>




---

archive/issue_events_300371.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-12-22T23:43:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300371"
}
```



---

archive/issue_events_300372.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-12-22T23:43:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300372"
}
```



---

archive/issue_comments_539953.json:
```json
{
    "body": "<a id='comment:24'></a>\nYou may want to try this with a better IP solver - see #31329 for SCIP",
    "created_at": "2022-12-23T00:22:06Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539953",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
You may want to try this with a better IP solver - see #31329 for SCIP



---

archive/issue_comments_539954.json:
```json
{
    "body": "**Changing commit** from \"[0ac618c968e976d19fd2c61c2462611ce8f0cc3d](https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d)\" to \"[d50b62c2008a96849f99004a4c2ad883fab7d0f2](https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2)\".",
    "created_at": "2022-12-23T08:59:46Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0ac618c968e976d19fd2c61c2462611ce8f0cc3d](https://github.com/sagemath/sagetrac-mirror/commit/0ac618c968e976d19fd2c61c2462611ce8f0cc3d)" to "[d50b62c2008a96849f99004a4c2ad883fab7d0f2](https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2)".



---

archive/issue_comments_539955.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2\">d50b62c</a></td><td><code>expand docstring of main class</code></td></tr></table>\n",
    "created_at": "2022-12-23T08:59:46Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2">d50b62c</a></td><td><code>expand docstring of main class</code></td></tr></table>




---

archive/issue_comments_539956.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [Matthias K\u00f6ppe](#comment%3A24):\n> You may want to try this with a better IP solver - see #31329 for SCIP\n\nExcellent, I have now managed to install SCIP, and indeed, many doctests fail :-)\n\nPreviously, I only tested with gurobi (which was much faster), but apparently, we got sloppy during the last few big reorganisations.",
    "created_at": "2022-12-23T12:42:12Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539956",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:26'></a>
Replying to [Matthias KÃ¶ppe](#comment%3A24):
> You may want to try this with a better IP solver - see #31329 for SCIP

Excellent, I have now managed to install SCIP, and indeed, many doctests fail :-)

Previously, I only tested with gurobi (which was much faster), but apparently, we got sloppy during the last few big reorganisations.



---

archive/issue_events_300373.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-12-23T12:42:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300373"
}
```



---

archive/issue_events_300374.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-12-23T12:42:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300374"
}
```



---

archive/issue_comments_539957.json:
```json
{
    "body": "**Changing commit** from \"[d50b62c2008a96849f99004a4c2ad883fab7d0f2](https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2)\" to \"[288e3917aaa8a2d56ec45c2137c5f4889842488e](https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e)\".",
    "created_at": "2022-12-23T15:27:59Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d50b62c2008a96849f99004a4c2ad883fab7d0f2](https://github.com/sagemath/sagetrac-mirror/commit/d50b62c2008a96849f99004a4c2ad883fab7d0f2)" to "[288e3917aaa8a2d56ec45c2137c5f4889842488e](https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e)".



---

archive/issue_comments_539958.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e\">288e391</a></td><td><code>copy milp instead of adding and removing constraints</code></td></tr></table>\n",
    "created_at": "2022-12-23T15:27:59Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e">288e391</a></td><td><code>copy milp instead of adding and removing constraints</code></td></tr></table>




---

archive/issue_comments_539959.json:
```json
{
    "body": "<a id='comment:29'></a>\nWith the simple fix from #31329, [#31329 comment:45](https://github.com/sagemath/sage/issues/31329#comment:45), this now also seems to work with SCIP.  However, SCIP seems to be much slower, by far.  In particular, GLPK finishes the doctest in line 3157-3171\n\n```\n    sage: As = Bs = [[],\n    ....:            [(1,i,j) for i in [-1,0,1] for j in [-1,1]],\n    ....:            [(2,i,j) for i in [-1,0,1] for j in [-1,1]],\n    ....:            [(3,i,j) for i in [-2,-1,0,1,2] for j in [-1,1]]]\n\n    sage: c1 = lambda a, b: (a[0]+b[0], a[1]*b[1], a[2]*b[2])\n    sage: c2 = lambda a: (a[0], -a[1], a[2])\n\n    sage: bij = Bijectionist(sum(As, []), sum(Bs, []))\n    sage: bij.set_statistics((lambda x: x[0], lambda x: x[0]))\n    sage: bij.set_intertwining_relations((2, c1, c1), (1, c2, c2))\n    sage: l = list(bij.solutions_iterator()); len(l)                            # long time\n    64\n```\nin about 1 minute on my laptop, while SCIP seems to take about an hour.  Is there a way to find out what's going on?  Even finding the first solution takes 25 seconds, vs. 0.3 seconds with GLPK.",
    "created_at": "2022-12-23T15:38:40Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539959",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:29'></a>
With the simple fix from #31329, [#31329 comment:45](https://github.com/sagemath/sage/issues/31329#comment:45), this now also seems to work with SCIP.  However, SCIP seems to be much slower, by far.  In particular, GLPK finishes the doctest in line 3157-3171

```
    sage: As = Bs = [[],
    ....:            [(1,i,j) for i in [-1,0,1] for j in [-1,1]],
    ....:            [(2,i,j) for i in [-1,0,1] for j in [-1,1]],
    ....:            [(3,i,j) for i in [-2,-1,0,1,2] for j in [-1,1]]]

    sage: c1 = lambda a, b: (a[0]+b[0], a[1]*b[1], a[2]*b[2])
    sage: c2 = lambda a: (a[0], -a[1], a[2])

    sage: bij = Bijectionist(sum(As, []), sum(Bs, []))
    sage: bij.set_statistics((lambda x: x[0], lambda x: x[0]))
    sage: bij.set_intertwining_relations((2, c1, c1), (1, c2, c2))
    sage: l = list(bij.solutions_iterator()); len(l)                            # long time
    64
```
in about 1 minute on my laptop, while SCIP seems to take about an hour.  Is there a way to find out what's going on?  Even finding the first solution takes 25 seconds, vs. 0.3 seconds with GLPK.



---

archive/issue_comments_539960.json:
```json
{
    "body": "<a id='comment:30'></a>\nI have found the culprit already - `deepcopy` takes forever:\n\n```\nsage: %prun next(bij.solutions_iterator())\n         54830 function calls (54618 primitive calls) in 25.558 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1   24.908   24.908   24.908   24.908 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n   ...\n```\nvs.\n\n```\nsage: %prun next(bij.solutions_iterator())\n         53403 function calls (53231 primitive calls) in 0.353 seconds\n\n   Ordered by: internal time\n\n   ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n        1    0.123    0.123    0.287    0.287 bijectionist.py:3005(add_intertwining_relation_constraints)\n     4093    0.114    0.000    0.124    0.000 {method 'add_constraint' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n        1    0.051    0.051    0.051    0.051 {method 'solve' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n     4083    0.021    0.000    0.031    0.000 {built-in method builtins.sum}\n     4372    0.010    0.000    0.010    0.000 <ipython-input-3-f7b4b09ab02e>:1(<lambda>)\n    12008    0.009    0.000    0.009    0.000 bijectionist.py:3068(<genexpr>)\n     4096    0.004    0.000    0.006    0.000 copy.py:66(copy)\n     4082    0.004    0.000    0.004    0.000 {method 'is_zero' of 'sage.numerical.linear_functions.LinearFunction' objects}\n        1    0.003    0.003    0.006    0.006 bijectionist.py:2026(_preprocess_intertwining_relations)\n     4093    0.003    0.000    0.003    0.000 {built-in method builtins.isinstance}\n        1    0.002    0.002    0.003    0.003 bijectionist.py:2892(add_alpha_beta_constraints)\n     4093    0.002    0.000    0.004    0.000 linear_tensor.py:112(is_LinearTensor)\n      194    0.001    0.000    0.001    0.000 bijectionist.py:2671(<genexpr>)\n      628    0.001    0.000    0.001    0.000 {method 'find' of 'sage.sets.disjoint_set.DisjointSet_of_hashables' objects}\n     4098    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}\n     4095    0.001    0.000    0.001    0.000 {method 'copy' of 'dict' objects}\n        1    0.001    0.001    0.001    0.001 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}\n```",
    "created_at": "2022-12-23T15:40:30Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539960",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:30'></a>
I have found the culprit already - `deepcopy` takes forever:

```
sage: %prun next(bij.solutions_iterator())
         54830 function calls (54618 primitive calls) in 25.558 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1   24.908   24.908   24.908   24.908 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
   ...
```
vs.

```
sage: %prun next(bij.solutions_iterator())
         53403 function calls (53231 primitive calls) in 0.353 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.123    0.123    0.287    0.287 bijectionist.py:3005(add_intertwining_relation_constraints)
     4093    0.114    0.000    0.124    0.000 {method 'add_constraint' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
        1    0.051    0.051    0.051    0.051 {method 'solve' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
     4083    0.021    0.000    0.031    0.000 {built-in method builtins.sum}
     4372    0.010    0.000    0.010    0.000 <ipython-input-3-f7b4b09ab02e>:1(<lambda>)
    12008    0.009    0.000    0.009    0.000 bijectionist.py:3068(<genexpr>)
     4096    0.004    0.000    0.006    0.000 copy.py:66(copy)
     4082    0.004    0.000    0.004    0.000 {method 'is_zero' of 'sage.numerical.linear_functions.LinearFunction' objects}
        1    0.003    0.003    0.006    0.006 bijectionist.py:2026(_preprocess_intertwining_relations)
     4093    0.003    0.000    0.003    0.000 {built-in method builtins.isinstance}
        1    0.002    0.002    0.003    0.003 bijectionist.py:2892(add_alpha_beta_constraints)
     4093    0.002    0.000    0.004    0.000 linear_tensor.py:112(is_LinearTensor)
      194    0.001    0.000    0.001    0.000 bijectionist.py:2671(<genexpr>)
      628    0.001    0.000    0.001    0.000 {method 'find' of 'sage.sets.disjoint_set.DisjointSet_of_hashables' objects}
     4098    0.001    0.000    0.001    0.000 {method 'get' of 'dict' objects}
     4095    0.001    0.000    0.001    0.000 {method 'copy' of 'dict' objects}
        1    0.001    0.001    0.001    0.001 {method '__deepcopy__' of 'sage.numerical.mip.MixedIntegerLinearProgram' objects}
```



---

archive/issue_comments_539961.json:
```json
{
    "body": "<a id='comment:31'></a>\n(I don't know whether copy would suffice for my purpose, but it takes forever, too)\n\nSince this is almost certainly a SCIP problem, I'm going back to needs-review.",
    "created_at": "2022-12-23T15:48:31Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539961",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:31'></a>
(I don't know whether copy would suffice for my purpose, but it takes forever, too)

Since this is almost certainly a SCIP problem, I'm going back to needs-review.



---

archive/issue_comments_539962.json:
```json
{
    "body": "**Changing commit** from \"[288e3917aaa8a2d56ec45c2137c5f4889842488e](https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e)\" to \"[d57c8e5295144152214c870f3a206ab0dc5a7716](https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716)\".",
    "created_at": "2022-12-23T16:22:03Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[288e3917aaa8a2d56ec45c2137c5f4889842488e](https://github.com/sagemath/sagetrac-mirror/commit/288e3917aaa8a2d56ec45c2137c5f4889842488e)" to "[d57c8e5295144152214c870f3a206ab0dc5a7716](https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716)".



---

archive/issue_comments_539963.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716\">d57c8e5</a></td><td><code>derandomize a test, mark example as random</code></td></tr></table>\n",
    "created_at": "2022-12-23T16:22:03Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716">d57c8e5</a></td><td><code>derandomize a test, mark example as random</code></td></tr></table>




---

archive/issue_events_300375.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-12-23T16:22:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300375"
}
```



---

archive/issue_events_300376.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2022-12-23T16:22:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/33238#event-300376"
}
```



---

archive/issue_comments_539964.json:
```json
{
    "body": "**Changing commit** from \"[d57c8e5295144152214c870f3a206ab0dc5a7716](https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716)\" to \"[7353fb523075c798dd3afe2cd57108b88909c94a](https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a)\".",
    "created_at": "2022-12-23T21:41:05Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d57c8e5295144152214c870f3a206ab0dc5a7716](https://github.com/sagemath/sagetrac-mirror/commit/d57c8e5295144152214c870f3a206ab0dc5a7716)" to "[7353fb523075c798dd3afe2cd57108b88909c94a](https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a)".



---

archive/issue_comments_539965.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a\">7353fb5</a></td><td><code>correct typo, remove useless assignment</code></td></tr></table>\n",
    "created_at": "2022-12-23T21:41:05Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a">7353fb5</a></td><td><code>correct typo, remove useless assignment</code></td></tr></table>




---

archive/issue_comments_539966.json:
```json
{
    "body": "**Changing commit** from \"[7353fb523075c798dd3afe2cd57108b88909c94a](https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a)\" to \"[db850f00bdcea2011ed9194de177fbcbcc8b93d1](https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1)\".",
    "created_at": "2022-12-23T22:35:56Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7353fb523075c798dd3afe2cd57108b88909c94a](https://github.com/sagemath/sagetrac-mirror/commit/7353fb523075c798dd3afe2cd57108b88909c94a)" to "[db850f00bdcea2011ed9194de177fbcbcc8b93d1](https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1)".



---

archive/issue_comments_539967.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1\">db850f0</a></td><td><code>add and remove constraints instead of copying the whole program</code></td></tr></table>\n",
    "created_at": "2022-12-23T22:35:56Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1">db850f0</a></td><td><code>add and remove constraints instead of copying the whole program</code></td></tr></table>




---

archive/issue_comments_539968.json:
```json
{
    "body": "<a id='comment:36'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e\">ec3271c</a></td><td><code>fix problem with SCIP, add timings</code></td></tr></table>\n",
    "created_at": "2022-12-23T23:00:53Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e">ec3271c</a></td><td><code>fix problem with SCIP, add timings</code></td></tr></table>




---

archive/issue_comments_539969.json:
```json
{
    "body": "**Changing commit** from \"[db850f00bdcea2011ed9194de177fbcbcc8b93d1](https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1)\" to \"[ec3271c0e0d79727e2f5f80867bcb253eb6a639e](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)\".",
    "created_at": "2022-12-23T23:00:53Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[db850f00bdcea2011ed9194de177fbcbcc8b93d1](https://github.com/sagemath/sagetrac-mirror/commit/db850f00bdcea2011ed9194de177fbcbcc8b93d1)" to "[ec3271c0e0d79727e2f5f80867bcb253eb6a639e](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)".



---

archive/issue_comments_539970.json:
```json
{
    "body": "<a id='comment:37'></a>\n\n```\n+            d = minimal_subdistribution.get_values(D)  # a dict from P to multiplicities\n[...]\n+                support = [X[p] for p in P if d[p]]\n```\nI would recommend to use the recently added `convert` parameter of `get_values` https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/mip.html#sage.numerical.mip.MixedIntegerLinearProgram.get_values, which makes such tests much more robust.",
    "created_at": "2022-12-23T23:19:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539970",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>

```
+            d = minimal_subdistribution.get_values(D)  # a dict from P to multiplicities
[...]
+                support = [X[p] for p in P if d[p]]
```
I would recommend to use the recently added `convert` parameter of `get_values` https://doc.sagemath.org/html/en/reference/numerical/sage/numerical/mip.html#sage.numerical.mip.MixedIntegerLinearProgram.get_values, which makes such tests much more robust.



---

archive/issue_comments_539971.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de\">dfdc6ba</a></td><td><code>use convert for MixedIntegerLinearProgram.get_values</code></td></tr></table>\n",
    "created_at": "2022-12-24T13:58:53Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de">dfdc6ba</a></td><td><code>use convert for MixedIntegerLinearProgram.get_values</code></td></tr></table>




---

archive/issue_comments_539972.json:
```json
{
    "body": "**Changing commit** from \"[ec3271c0e0d79727e2f5f80867bcb253eb6a639e](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)\" to \"[dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de](https://github.com/sagemath/sagetrac-mirror/commit/dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de)\".",
    "created_at": "2022-12-24T13:58:53Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ec3271c0e0d79727e2f5f80867bcb253eb6a639e](https://github.com/sagemath/sagetrac-mirror/commit/ec3271c0e0d79727e2f5f80867bcb253eb6a639e)" to "[dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de](https://github.com/sagemath/sagetrac-mirror/commit/dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de)".



---

archive/issue_comments_539973.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0836cb93095985a933c549ea8a8893ba4d94a04\">d0836cb</a></td><td><code>include information on MILP also in public documentation</code></td></tr></table>\n",
    "created_at": "2022-12-25T21:26:29Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0836cb93095985a933c549ea8a8893ba4d94a04">d0836cb</a></td><td><code>include information on MILP also in public documentation</code></td></tr></table>




---

archive/issue_comments_539974.json:
```json
{
    "body": "**Changing commit** from \"[dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de](https://github.com/sagemath/sagetrac-mirror/commit/dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de)\" to \"[d0836cb93095985a933c549ea8a8893ba4d94a04](https://github.com/sagemath/sagetrac-mirror/commit/d0836cb93095985a933c549ea8a8893ba4d94a04)\".",
    "created_at": "2022-12-25T21:26:29Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de](https://github.com/sagemath/sagetrac-mirror/commit/dfdc6bacdcdbc2198fd62b96167aedc3bf94e1de)" to "[d0836cb93095985a933c549ea8a8893ba4d94a04](https://github.com/sagemath/sagetrac-mirror/commit/d0836cb93095985a933c549ea8a8893ba4d94a04)".



---

archive/issue_comments_539975.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/563af988ae4e282cc2778599c73b728e8eb71f0c\">563af98</a></td><td><code>remove unnecessary copy</code></td></tr></table>\n",
    "created_at": "2022-12-25T22:26:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/563af988ae4e282cc2778599c73b728e8eb71f0c">563af98</a></td><td><code>remove unnecessary copy</code></td></tr></table>




---

archive/issue_comments_539976.json:
```json
{
    "body": "**Changing commit** from \"[d0836cb93095985a933c549ea8a8893ba4d94a04](https://github.com/sagemath/sagetrac-mirror/commit/d0836cb93095985a933c549ea8a8893ba4d94a04)\" to \"[563af988ae4e282cc2778599c73b728e8eb71f0c](https://github.com/sagemath/sagetrac-mirror/commit/563af988ae4e282cc2778599c73b728e8eb71f0c)\".",
    "created_at": "2022-12-25T22:26:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d0836cb93095985a933c549ea8a8893ba4d94a04](https://github.com/sagemath/sagetrac-mirror/commit/d0836cb93095985a933c549ea8a8893ba4d94a04)" to "[563af988ae4e282cc2778599c73b728e8eb71f0c](https://github.com/sagemath/sagetrac-mirror/commit/563af988ae4e282cc2778599c73b728e8eb71f0c)".



---

archive/issue_comments_539977.json:
```json
{
    "body": "**Changing commit** from \"[563af988ae4e282cc2778599c73b728e8eb71f0c](https://github.com/sagemath/sagetrac-mirror/commit/563af988ae4e282cc2778599c73b728e8eb71f0c)\" to \"[590bae24937ea07a1d5f22216b0900cce949ce55](https://github.com/sagemath/sagetrac-mirror/commit/590bae24937ea07a1d5f22216b0900cce949ce55)\".",
    "created_at": "2022-12-26T18:36:39Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[563af988ae4e282cc2778599c73b728e8eb71f0c](https://github.com/sagemath/sagetrac-mirror/commit/563af988ae4e282cc2778599c73b728e8eb71f0c)" to "[590bae24937ea07a1d5f22216b0900cce949ce55](https://github.com/sagemath/sagetrac-mirror/commit/590bae24937ea07a1d5f22216b0900cce949ce55)".



---

archive/issue_comments_539978.json:
```json
{
    "body": "<a id='comment:41'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/590bae24937ea07a1d5f22216b0900cce949ce55\">590bae2</a></td><td><code>add possibility to constrain to involutions</code></td></tr></table>\n",
    "created_at": "2022-12-26T18:36:39Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/590bae24937ea07a1d5f22216b0900cce949ce55">590bae2</a></td><td><code>add possibility to constrain to involutions</code></td></tr></table>




---

archive/issue_comments_539979.json:
```json
{
    "body": "<a id='comment:42'></a>\nSee https://mathoverflow.net/questions/437261/standard-or-good-names-for-relations-between-maps for a question on terminology.\n\nIf you have a nice test for the constraint `s o psi o s = phi`, with non-identity `psi` and `phi`, I'd love to add it.",
    "created_at": "2022-12-26T18:47:39Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539979",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:42'></a>
See https://mathoverflow.net/questions/437261/standard-or-good-names-for-relations-between-maps for a question on terminology.

If you have a nice test for the constraint `s o psi o s = phi`, with non-identity `psi` and `phi`, I'd love to add it.



---

archive/issue_comments_539980.json:
```json
{
    "body": "**Changing commit** from \"[590bae24937ea07a1d5f22216b0900cce949ce55](https://github.com/sagemath/sagetrac-mirror/commit/590bae24937ea07a1d5f22216b0900cce949ce55)\" to \"[da0655b5e1dcd4b1b1a35943fbbedf2698900786](https://github.com/sagemath/sagetrac-mirror/commit/da0655b5e1dcd4b1b1a35943fbbedf2698900786)\".",
    "created_at": "2022-12-26T22:27:59Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[590bae24937ea07a1d5f22216b0900cce949ce55](https://github.com/sagemath/sagetrac-mirror/commit/590bae24937ea07a1d5f22216b0900cce949ce55)" to "[da0655b5e1dcd4b1b1a35943fbbedf2698900786](https://github.com/sagemath/sagetrac-mirror/commit/da0655b5e1dcd4b1b1a35943fbbedf2698900786)".



---

archive/issue_comments_539981.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da0655b5e1dcd4b1b1a35943fbbedf2698900786\">da0655b</a></td><td><code>correct indentation</code></td></tr></table>\n",
    "created_at": "2022-12-26T22:27:59Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539981",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da0655b5e1dcd4b1b1a35943fbbedf2698900786">da0655b</a></td><td><code>correct indentation</code></td></tr></table>




---

archive/issue_comments_539982.json:
```json
{
    "body": "<a id='comment:44'></a>\nA question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.\n\nThe idea in creating it was to separate the MILP from the user interface.  More precisely, the methods `Bijectionist.set_*` in the main class are responsible to normalizing and organizing the input, whereas the methods `_BijectionistMILP.add_*_constraint` in the helper class actually turn the input into constraints.\n\nAlso, the helper class organizes a cache of solutions, and, whenever a new solution is found, a veto constraint is added to the MILP.  Put differently, the set of solutions in the cache together with the set of solutions in the MILP is always constant.\n\nI think the current solution is OK, but I am open to improvements.",
    "created_at": "2022-12-27T08:28:10Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539982",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:44'></a>
A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.

The idea in creating it was to separate the MILP from the user interface.  More precisely, the methods `Bijectionist.set_*` in the main class are responsible to normalizing and organizing the input, whereas the methods `_BijectionistMILP.add_*_constraint` in the helper class actually turn the input into constraints.

Also, the helper class organizes a cache of solutions, and, whenever a new solution is found, a veto constraint is added to the MILP.  Put differently, the set of solutions in the cache together with the set of solutions in the MILP is always constant.

I think the current solution is OK, but I am open to improvements.



---

archive/issue_comments_539983.json:
```json
{
    "body": "<a id='comment:45'></a>\nConcerning the `foreign_latex` plugin: it is triggered by `overset` because of the regexp `over[^l]`.  I believe that my use of `overset` is valid, I do not know of a better construct here.  In any case, the commutative diagram is typpeset correctly.",
    "created_at": "2022-12-27T08:34:21Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539983",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:45'></a>
Concerning the `foreign_latex` plugin: it is triggered by `overset` because of the regexp `over[^l]`.  I believe that my use of `overset` is valid, I do not know of a better construct here.  In any case, the commutative diagram is typpeset correctly.



---

archive/issue_comments_539984.json:
```json
{
    "body": "<a id='comment:46'></a>\nPossibly, using the `indices` argument of `new_variable`, I could slightly simplify parts of the code.  Currently, variables are added as needed, and blocks where this is not allowed are guarded by checking whether the number of variables changed.\n\nI am not sure how easy it is to determine the allowed indices - they are a subset of `P x Z`, where `P` is the set of constant blocks and `Z` is the set of values.",
    "created_at": "2022-12-27T08:53:37Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539984",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:46'></a>
Possibly, using the `indices` argument of `new_variable`, I could slightly simplify parts of the code.  Currently, variables are added as needed, and blocks where this is not allowed are guarded by checking whether the number of variables changed.

I am not sure how easy it is to determine the allowed indices - they are a subset of `P x Z`, where `P` is the set of constant blocks and `Z` is the set of values.



---

archive/issue_comments_539985.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [Martin Rubey](#comment%3A44):\n> A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.\n\nIt may help to think about the overall structure of the code by considering whether 1. other enumeration technologies could be supported, or 2. whether some of your code could be generalized. \n\n1. Alternative techniques for the 0/1 enumeration: lattice point enumeration (`Polyhedron.integral_points()`), SAT (e.g. #33461 cvc5). \n\n2. Here you enumerate 0/1 solutions by repeatedly solving a MIP with no-good cuts added. If you generalize the form of your cuts a bit (so that their validity does not depend on equal cardinality), then you'd have a general algorithm for enumeration that could take as input any 0/1 IP -- which could be a useful addition to the Sage library. (It could later be improved by solver-specific techniques such as accessing the solver's solution pools, or using solver callbacks.)",
    "created_at": "2022-12-27T18:58:13Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539985",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Replying to [Martin Rubey](#comment%3A44):
> A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.

It may help to think about the overall structure of the code by considering whether 1. other enumeration technologies could be supported, or 2. whether some of your code could be generalized. 

1. Alternative techniques for the 0/1 enumeration: lattice point enumeration (`Polyhedron.integral_points()`), SAT (e.g. #33461 cvc5). 

2. Here you enumerate 0/1 solutions by repeatedly solving a MIP with no-good cuts added. If you generalize the form of your cuts a bit (so that their validity does not depend on equal cardinality), then you'd have a general algorithm for enumeration that could take as input any 0/1 IP -- which could be a useful addition to the Sage library. (It could later be improved by solver-specific techniques such as accessing the solver's solution pools, or using solver callbacks.)



---

archive/issue_comments_539986.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [Martin Rubey](#comment%3A45):\n> Concerning the `foreign_latex` plugin: it is triggered by `overset` because of the regexp `over[^l]`.  I believe that my use of `overset` is valid, I do not know of a better construct here.  In any case, the commutative diagram is typpeset correctly.\n\nYes, it's safe to ignore this warning. When we switch to GitHub, the patchbot will be retired anyway. The checks on GH Actions (`tox -e relint`) have a better pattern for `foreign_latex`, see `src/.relint.yml`.",
    "created_at": "2022-12-27T19:01:41Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539986",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>
Replying to [Martin Rubey](#comment%3A45):
> Concerning the `foreign_latex` plugin: it is triggered by `overset` because of the regexp `over[^l]`.  I believe that my use of `overset` is valid, I do not know of a better construct here.  In any case, the commutative diagram is typpeset correctly.

Yes, it's safe to ignore this warning. When we switch to GitHub, the patchbot will be retired anyway. The checks on GH Actions (`tox -e relint`) have a better pattern for `foreign_latex`, see `src/.relint.yml`.



---

archive/issue_comments_539987.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [Matthias K\u00f6ppe](#comment%3A47):\n> Replying to [Martin Rubey](#comment%3A44):\n> > A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.\n\n> \n> It may help to think about the overall structure of the code by considering whether 1. other enumeration technologies could be supported, or 2. whether some of your code could be generalized. \n> \n> 1. Alternative techniques for the 0/1 enumeration: lattice point enumeration (`Polyhedron.integral_points()`), SAT (e.g. #33461 cvc5). \n> \n> 2. Here you enumerate 0/1 solutions by repeatedly solving a MIP with no-good cuts added. If you generalize the form of your cuts a bit (so that their validity does not depend on equal cardinality), then you'd have a general algorithm for enumeration that could take as input any 0/1 IP -- which could be a useful addition to the Sage library. (It could later be improved by solver-specific techniques such as accessing the solver's solution pools, or using solver callbacks.)\n\nCould you please expand?  I do not really understand what you mean.  In particular, I do not know what a cut is, and what you mean with \"equal cardinality\".  Is the idea that to have a class that gets you all solutions for a MIP, instead of just one?\n\nI admit that I am slightly afraid of increasing the scope of the project at this stage.  Did you have a look at the MILPs solved?  (some are documented in `solutions_iterator`, there are some more in `_forced_constant_blocks`, `minimal_subdistributions_iterator` and `minimal_subdistributions_block_iterator`)",
    "created_at": "2022-12-27T19:57:00Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539987",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:49'></a>
Replying to [Matthias KÃ¶ppe](#comment%3A47):
> Replying to [Martin Rubey](#comment%3A44):
> > A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.

> 
> It may help to think about the overall structure of the code by considering whether 1. other enumeration technologies could be supported, or 2. whether some of your code could be generalized. 
> 
> 1. Alternative techniques for the 0/1 enumeration: lattice point enumeration (`Polyhedron.integral_points()`), SAT (e.g. #33461 cvc5). 
> 
> 2. Here you enumerate 0/1 solutions by repeatedly solving a MIP with no-good cuts added. If you generalize the form of your cuts a bit (so that their validity does not depend on equal cardinality), then you'd have a general algorithm for enumeration that could take as input any 0/1 IP -- which could be a useful addition to the Sage library. (It could later be improved by solver-specific techniques such as accessing the solver's solution pools, or using solver callbacks.)

Could you please expand?  I do not really understand what you mean.  In particular, I do not know what a cut is, and what you mean with "equal cardinality".  Is the idea that to have a class that gets you all solutions for a MIP, instead of just one?

I admit that I am slightly afraid of increasing the scope of the project at this stage.  Did you have a look at the MILPs solved?  (some are documented in `solutions_iterator`, there are some more in `_forced_constant_blocks`, `minimal_subdistributions_iterator` and `minimal_subdistributions_block_iterator`)



---

archive/issue_comments_539988.json:
```json
{
    "body": "<a id='comment:50'></a>\nPlease excuse, I have yet another question.  I was trying to simplify `evaluate_linear_function`, is there code to check whether a given set of values satisfies a constraint?\n\nBesides, I asked chatGPT.  It answered as follows:\n\n--- begin quote ---\n\nYes, you can use the MILP class from the `MixedIntegerLinearProgram` module in [SageMath](../wiki/SageMath) to check whether a given set of values satisfies a constraint of a MILP.\n\nHere is an example of how you can use the MILP class to check whether a given set of values satisfies a constraint of a MILP:\n\n```\nfrom sage.numerical.mip import MixedIntegerLinearProgram\n\n# Create a new MILP\nmilp = MixedIntegerLinearProgram()\n\n# Set up variables\nx = milp.new_variable(real=True, nonnegative=True)\ny = milp.new_variable(real=True, nonnegative=True)\n\n# Set up constraints\nmilp.add_constraint(x + y <= 1)\nmilp.add_constraint(x - y >= 0)\n\n# Check whether the given set of values satisfies the constraints\nsatisfies_constraints = milp.check_feasibility([x: 0.5, y: 0.5])\n\nprint(satisfies_constraints)  # prints True\n```\n\nCould you show me the definition of check_feasibility?\n\nCertainly! Here is the definition of the `check_feasibility` method of the MILP class from the `MixedIntegerLinearProgram` module in [SageMath](../wiki/SageMath):\n\n```\ndef check_feasibility(self, values=None, variable_order=None, solver=None):\n    \"\"\"\n    Check the feasibility of a given set of values.\n    \n    INPUT:\n    \n    - ``values`` -- a dictionary of variable names to values.\n    \n    - ``variable_order`` -- a list of variable names in the order in which they\n      should be presented to the solver. If not specified, the default\n      order is used.\n    \n    - ``solver`` -- the name of the solver to use. If not specified, the\n      default solver is used.\n    \n    OUTPUT:\n    \n    Returns True if the given set of values satisfies all of the constraints\n    of the MILP, and False otherwise.\n    \n    EXAMPLES:\n    \n    Check the feasibility of a given set of values::\n    \n        sage: from sage.numerical.mip import MixedIntegerLinearProgram\n        sage: milp = MixedIntegerLinearProgram()\n        sage: x = milp.new_variable(real=True, nonnegative=True)\n        sage: y = milp.new_variable(real=True, nonnegative=True)\n        sage: milp.add_constraint(x + y <= 1)\n        sage: milp.add_constraint(x - y >= 0)\n        sage: milp.check_feasibility([x: 0.5, y: 0.5])\n        True\n    \n    \"\"\"\n    # ...\n```\n\n--- end quote ---\nUnfortunately, this method does not exist in the current sagemath develop branch :-(",
    "created_at": "2022-12-27T20:37:05Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539988",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:50'></a>
Please excuse, I have yet another question.  I was trying to simplify `evaluate_linear_function`, is there code to check whether a given set of values satisfies a constraint?

Besides, I asked chatGPT.  It answered as follows:

--- begin quote ---

Yes, you can use the MILP class from the `MixedIntegerLinearProgram` module in [SageMath](../wiki/SageMath) to check whether a given set of values satisfies a constraint of a MILP.

Here is an example of how you can use the MILP class to check whether a given set of values satisfies a constraint of a MILP:

```
from sage.numerical.mip import MixedIntegerLinearProgram

# Create a new MILP
milp = MixedIntegerLinearProgram()

# Set up variables
x = milp.new_variable(real=True, nonnegative=True)
y = milp.new_variable(real=True, nonnegative=True)

# Set up constraints
milp.add_constraint(x + y <= 1)
milp.add_constraint(x - y >= 0)

# Check whether the given set of values satisfies the constraints
satisfies_constraints = milp.check_feasibility([x: 0.5, y: 0.5])

print(satisfies_constraints)  # prints True
```

Could you show me the definition of check_feasibility?

Certainly! Here is the definition of the `check_feasibility` method of the MILP class from the `MixedIntegerLinearProgram` module in [SageMath](../wiki/SageMath):

```
def check_feasibility(self, values=None, variable_order=None, solver=None):
    """
    Check the feasibility of a given set of values.
    
    INPUT:
    
    - ``values`` -- a dictionary of variable names to values.
    
    - ``variable_order`` -- a list of variable names in the order in which they
      should be presented to the solver. If not specified, the default
      order is used.
    
    - ``solver`` -- the name of the solver to use. If not specified, the
      default solver is used.
    
    OUTPUT:
    
    Returns True if the given set of values satisfies all of the constraints
    of the MILP, and False otherwise.
    
    EXAMPLES:
    
    Check the feasibility of a given set of values::
    
        sage: from sage.numerical.mip import MixedIntegerLinearProgram
        sage: milp = MixedIntegerLinearProgram()
        sage: x = milp.new_variable(real=True, nonnegative=True)
        sage: y = milp.new_variable(real=True, nonnegative=True)
        sage: milp.add_constraint(x + y <= 1)
        sage: milp.add_constraint(x - y >= 0)
        sage: milp.check_feasibility([x: 0.5, y: 0.5])
        True
    
    """
    # ...
```

--- end quote ---
Unfortunately, this method does not exist in the current sagemath develop branch :-(



---

archive/issue_comments_539989.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [Martin Rubey](#comment%3A49):\n> Replying to [Matthias K\u00f6ppe](#comment%3A47):\n> > 2. Here you enumerate 0/1 solutions by repeatedly solving a MIP with no-good cuts added. If you generalize the form of your cuts a bit (so that their validity does not depend on equal cardinality), then you'd have a general algorithm for enumeration that could take as input any 0/1 IP\n\n> \n> Could you please expand?  I do not really understand what you mean.  In particular, I do not know what a cut is, and what you mean with \"equal cardinality\". \n\nSorry for the jargon. \"Cut\" is short for \"inequality\". What you call a \"veto inequality\" is commonly called a \"no-good cut\". \n\nWhen you have a solution x1=1, x2=1, x3=0, x4=0,\nyou are generating an inequality x1+x2 <= 1 in order to cut off this solution, but \nthis is only valid because you know that x1+x2+x3+x4 = 2.\nThe more general form of the no-good cut would be (1-x1)+(1-x2)+x3+x4 >= 1, which is linearly equivalent to your inequality given x1+x2+x3+x4 = 2.",
    "created_at": "2022-12-27T21:02:06Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539989",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
Replying to [Martin Rubey](#comment%3A49):
> Replying to [Matthias KÃ¶ppe](#comment%3A47):
> > 2. Here you enumerate 0/1 solutions by repeatedly solving a MIP with no-good cuts added. If you generalize the form of your cuts a bit (so that their validity does not depend on equal cardinality), then you'd have a general algorithm for enumeration that could take as input any 0/1 IP

> 
> Could you please expand?  I do not really understand what you mean.  In particular, I do not know what a cut is, and what you mean with "equal cardinality". 

Sorry for the jargon. "Cut" is short for "inequality". What you call a "veto inequality" is commonly called a "no-good cut". 

When you have a solution x1=1, x2=1, x3=0, x4=0,
you are generating an inequality x1+x2 <= 1 in order to cut off this solution, but 
this is only valid because you know that x1+x2+x3+x4 = 2.
The more general form of the no-good cut would be (1-x1)+(1-x2)+x3+x4 >= 1, which is linearly equivalent to your inequality given x1+x2+x3+x4 = 2.



---

archive/issue_comments_539990.json:
```json
{
    "body": "<a id='comment:52'></a>\nIs it really the case that `LinearConstraint` does not know its variables, other than by integer index, and that, given an index, there is no way to obtain the key?\n\nExplicitly:\n\n```\nsage: m = MixedIntegerLinearProgram()\nsage: x = m.new_variable(indices=[\"a\", \"b\", \"c\"])\nsage: c = x[\"a\"] + 2*x[\"b\"] >= 3\nsage: low, f = next(c.inequalities())\nsage: x.items()\ndict_items([('a', x_0), ('b', x_1), ('c', x_2)])\nsage: f.dict()\n{0: 1.0, 1: 2.0}\n```\nWhat I'd like to do is to \"evaluate\" `f`, and I think that this should be a method in `LinearConstraint`, possibly it should be the `subs` method, but I am unsure, because I'd like it to return `True` or `False` if the constraint is satisfied by the given values.",
    "created_at": "2022-12-27T22:50:52Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539990",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:52'></a>
Is it really the case that `LinearConstraint` does not know its variables, other than by integer index, and that, given an index, there is no way to obtain the key?

Explicitly:

```
sage: m = MixedIntegerLinearProgram()
sage: x = m.new_variable(indices=["a", "b", "c"])
sage: c = x["a"] + 2*x["b"] >= 3
sage: low, f = next(c.inequalities())
sage: x.items()
dict_items([('a', x_0), ('b', x_1), ('c', x_2)])
sage: f.dict()
{0: 1.0, 1: 2.0}
```
What I'd like to do is to "evaluate" `f`, and I think that this should be a method in `LinearConstraint`, possibly it should be the `subs` method, but I am unsure, because I'd like it to return `True` or `False` if the constraint is satisfied by the given values.



---

archive/issue_comments_539991.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [Martin Rubey](#comment%3A52):\n> Is it really the case that `LinearConstraint` does not know its variables, other than by integer index, and that, given an index, there is no way to obtain the key?\n\nYes, unfortunately. That's basically #26302.",
    "created_at": "2022-12-27T23:27:34Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539991",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>
Replying to [Martin Rubey](#comment%3A52):
> Is it really the case that `LinearConstraint` does not know its variables, other than by integer index, and that, given an index, there is no way to obtain the key?

Yes, unfortunately. That's basically #26302.



---

archive/issue_comments_539992.json:
```json
{
    "body": "<a id='comment:54'></a>\nsee also #20664.",
    "created_at": "2022-12-27T23:28:47Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539992",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
see also #20664.



---

archive/issue_comments_539993.json:
```json
{
    "body": "<a id='comment:55'></a>\nI admit I am confused by the multitude of tickets, and I also lack understanding the basic design of the frontend.  In particular, it is unclear to me, why some classes and methods seem to use integers to index the variables (\"columns\", I guess), such as `LinearFunction.dict`, and some use the indices by the user, such as `get_values`.\n\nWouldn't it be better to use the user supplied indices always, except in the backend?",
    "created_at": "2022-12-28T14:41:26Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539993",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:55'></a>
I admit I am confused by the multitude of tickets, and I also lack understanding the basic design of the frontend.  In particular, it is unclear to me, why some classes and methods seem to use integers to index the variables ("columns", I guess), such as `LinearFunction.dict`, and some use the indices by the user, such as `get_values`.

Wouldn't it be better to use the user supplied indices always, except in the backend?



---

archive/issue_comments_539994.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [Martin Rubey](#comment%3A55):\n> I also lack understanding the basic design of the frontend.\n\nWell, it's inconsistent. In the long run, I hope that we can replace our frontend with something more disciplined. My current candidate for this is CVXPY (#34251).",
    "created_at": "2022-12-28T19:24:43Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539994",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>
Replying to [Martin Rubey](#comment%3A55):
> I also lack understanding the basic design of the frontend.

Well, it's inconsistent. In the long run, I hope that we can replace our frontend with something more disciplined. My current candidate for this is CVXPY (#34251).



---

archive/issue_comments_539995.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03b1fb836611da4674cb8c34ea3faad709418670\">03b1fb8</a></td><td><code>better handling of empty constraints</code></td></tr></table>\n",
    "created_at": "2022-12-29T12:28:29Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539995",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03b1fb836611da4674cb8c34ea3faad709418670">03b1fb8</a></td><td><code>better handling of empty constraints</code></td></tr></table>




---

archive/issue_comments_539996.json:
```json
{
    "body": "**Changing commit** from \"[da0655b5e1dcd4b1b1a35943fbbedf2698900786](https://github.com/sagemath/sagetrac-mirror/commit/da0655b5e1dcd4b1b1a35943fbbedf2698900786)\" to \"[03b1fb836611da4674cb8c34ea3faad709418670](https://github.com/sagemath/sagetrac-mirror/commit/03b1fb836611da4674cb8c34ea3faad709418670)\".",
    "created_at": "2022-12-29T12:28:29Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539996",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[da0655b5e1dcd4b1b1a35943fbbedf2698900786](https://github.com/sagemath/sagetrac-mirror/commit/da0655b5e1dcd4b1b1a35943fbbedf2698900786)" to "[03b1fb836611da4674cb8c34ea3faad709418670](https://github.com/sagemath/sagetrac-mirror/commit/03b1fb836611da4674cb8c34ea3faad709418670)".



---

archive/issue_comments_539997.json:
```json
{
    "body": "**Dependencies:** #34881",
    "created_at": "2022-12-29T19:20:10Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539997",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #34881



---

archive/issue_comments_539998.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [Martin Rubey](#comment%3A44):\n> A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.\n\nSome more comments on this:\n- the steps of `_initialize_new_bmilp` could be merged into `_BijectionistMILP.__init__`\n- `_show_bmilp` would make more sense as a method of `_BijectionistMILP` (it breaks the abstraction of `_BijectionistMILP`)\n- also `_solution` could be changed to a (public) method of `_BijectionistMILP`; and perhaps there could be a slightly more high-level function so that various Bijectionist methods do not have to repeat the \"try ... solve ... except MIPSolverException ... else solution\" pattern",
    "created_at": "2022-12-29T19:41:50Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539998",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>
Replying to [Martin Rubey](#comment%3A44):
> A question about the general design: currently there is a helper class `_BijectionistMILP`.  I am not quite sure whether it might be better to merge it into the main class or not.

Some more comments on this:
- the steps of `_initialize_new_bmilp` could be merged into `_BijectionistMILP.__init__`
- `_show_bmilp` would make more sense as a method of `_BijectionistMILP` (it breaks the abstraction of `_BijectionistMILP`)
- also `_solution` could be changed to a (public) method of `_BijectionistMILP`; and perhaps there could be a slightly more high-level function so that various Bijectionist methods do not have to repeat the "try ... solve ... except MIPSolverException ... else solution" pattern



---

archive/issue_comments_539999.json:
```json
{
    "body": "<a id='comment:60'></a>\nI would also suggest to introduce a method in `_BijectionistMILP` that returns the variable `_x[p, z]` so that you can remove the direct use of this attribute from the `Bijectionist` class.",
    "created_at": "2022-12-29T19:52:10Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-539999",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
I would also suggest to introduce a method in `_BijectionistMILP` that returns the variable `_x[p, z]` so that you can remove the direct use of this attribute from the `Bijectionist` class.



---

archive/issue_comments_540000.json:
```json
{
    "body": "**Changing dependencies** from \"#34881\" to \"#34881, #34878\".",
    "created_at": "2022-12-29T20:08:42Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540000",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#34881" to "#34881, #34878".



---

archive/issue_comments_540001.json:
```json
{
    "body": "<a id='comment:62'></a>\nBy the way, in the benchmark example (`bij`), instead of using `list(bij.solutions_iterator())`, the following works:\n\n```\nsage: bmilp = bij._initialize_new_bmilp()\nsage: %time p = bmilp.milp.polyhedron(base_ring=QQ)\nCPU times: user 126 ms, sys: 13.9 ms, total: 140 ms\nWall time: 164 ms\nsage: p.is_lattice_polytope()\nTrue\nsage: len(p.vertices())\n504\n```",
    "created_at": "2022-12-29T20:17:23Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540001",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
By the way, in the benchmark example (`bij`), instead of using `list(bij.solutions_iterator())`, the following works:

```
sage: bmilp = bij._initialize_new_bmilp()
sage: %time p = bmilp.milp.polyhedron(base_ring=QQ)
CPU times: user 126 ms, sys: 13.9 ms, total: 140 ms
Wall time: 164 ms
sage: p.is_lattice_polytope()
True
sage: len(p.vertices())
504
```



---

archive/issue_comments_540002.json:
```json
{
    "body": "<a id='comment:63'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a\">a3364de</a></td><td><code>move _show to the _BijectionistMILP class</code></td></tr></table>\n",
    "created_at": "2022-12-29T22:00:17Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a">a3364de</a></td><td><code>move _show to the _BijectionistMILP class</code></td></tr></table>




---

archive/issue_comments_540003.json:
```json
{
    "body": "**Changing commit** from \"[03b1fb836611da4674cb8c34ea3faad709418670](https://github.com/sagemath/sagetrac-mirror/commit/03b1fb836611da4674cb8c34ea3faad709418670)\" to \"[a3364dec31f6eee2ca1c2f2777a39df5a57a716a](https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a)\".",
    "created_at": "2022-12-29T22:00:17Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540003",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[03b1fb836611da4674cb8c34ea3faad709418670](https://github.com/sagemath/sagetrac-mirror/commit/03b1fb836611da4674cb8c34ea3faad709418670)" to "[a3364dec31f6eee2ca1c2f2777a39df5a57a716a](https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a)".



---

archive/issue_comments_540004.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [Matthias K\u00f6ppe](#comment%3A62):\n> By the way, in the benchmark example (`bij`), instead of using `list(bij.solutions_iterator())`, the following works:\n> \n> ```\n> sage: bmilp = bij._initialize_new_bmilp()\n> sage: %time p = bmilp.milp.polyhedron(base_ring=QQ)\n> CPU times: user 126 ms, sys: 13.9 ms, total: 140 ms\n> Wall time: 164 ms\n> sage: p.is_lattice_polytope()\n> True\n> sage: len(p.vertices())\n> 504\n> ```\n\nWow, this is very impressive.  Why is this so much faster?  Can I always use this method instead?",
    "created_at": "2022-12-29T22:06:12Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540004",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:64'></a>
Replying to [Matthias KÃ¶ppe](#comment%3A62):
> By the way, in the benchmark example (`bij`), instead of using `list(bij.solutions_iterator())`, the following works:
> 
> ```
> sage: bmilp = bij._initialize_new_bmilp()
> sage: %time p = bmilp.milp.polyhedron(base_ring=QQ)
> CPU times: user 126 ms, sys: 13.9 ms, total: 140 ms
> Wall time: 164 ms
> sage: p.is_lattice_polytope()
> True
> sage: len(p.vertices())
> 504
> ```

Wow, this is very impressive.  Why is this so much faster?  Can I always use this method instead?



---

archive/issue_comments_540005.json:
```json
{
    "body": "<a id='comment:65'></a>\nI guess that, in general, we want `integral_points`, right?\n\nOh, but then we are back to a long time.  Or do I misunderstand something?  But that's strange, it should be fast to filter out non-integral points.",
    "created_at": "2022-12-29T22:16:17Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540005",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:65'></a>
I guess that, in general, we want `integral_points`, right?

Oh, but then we are back to a long time.  Or do I misunderstand something?  But that's strange, it should be fast to filter out non-integral points.



---

archive/issue_comments_540006.json:
```json
{
    "body": "<a id='comment:66'></a>\nIt's problem-dependent how well this works.",
    "created_at": "2022-12-29T22:19:55Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540006",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:66'></a>
It's problem-dependent how well this works.



---

archive/issue_comments_540007.json:
```json
{
    "body": "<a id='comment:67'></a>\nFor a 0/1 problem, every 0/1 solution is a vertex solution of any polyhedral relaxation that keeps the constraints 0<=x_i<=1.\n\nSo you can enumerate the 0/1 solutions by filtering all vertex solutions to any such polyhedral relaxation. Whether this works well depends on the relaxation. In the example, your problem formulation happens to be perfect: Every vertex is a 0/1 solution. In general, you can have exponentially more vertex solutions than 0/1 solutions. In that case, this algorithm will not work so well.",
    "created_at": "2022-12-29T22:24:16Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540007",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>
For a 0/1 problem, every 0/1 solution is a vertex solution of any polyhedral relaxation that keeps the constraints 0<=x_i<=1.

So you can enumerate the 0/1 solutions by filtering all vertex solutions to any such polyhedral relaxation. Whether this works well depends on the relaxation. In the example, your problem formulation happens to be perfect: Every vertex is a 0/1 solution. In general, you can have exponentially more vertex solutions than 0/1 solutions. In that case, this algorithm will not work so well.



---

archive/issue_comments_540008.json:
```json
{
    "body": "<a id='comment:68'></a>\nReplying to [Martin Rubey](#comment%3A65):\n> I guess that, in general, we want `integral_points`, right?\n> \n> Oh, but then we are back to a long time.\n\nThe default implementation of `integral_points` is not very good for this use case.\nBut after `sage -i pynormaliz`, you can do \n\n```\nsage: bmilp = bij._initialize_new_bmilp()\nsage: %time p = bmilp.milp.polyhedron(base_ring=QQ, backend='normaliz')\nCPU times: user 110 ms, sys: 3.31 ms, total: 113 ms\nWall time: 112 ms\nsage: %time p = bmilp.milp.polyhedron(base_ring=QQ, backend='normaliz').integral_points()\nCPU times: user 317 ms, sys: 35.3 ms, total: 352 ms\nWall time: 380 ms\n```\nIn this example (perfect formulation), it only adds overhead.\n\nIt would be interesting to investigate bijectionist examples in which the IP solver actually has to do something nontrivial.",
    "created_at": "2022-12-29T22:32:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540008",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:68'></a>
Replying to [Martin Rubey](#comment%3A65):
> I guess that, in general, we want `integral_points`, right?
> 
> Oh, but then we are back to a long time.

The default implementation of `integral_points` is not very good for this use case.
But after `sage -i pynormaliz`, you can do 

```
sage: bmilp = bij._initialize_new_bmilp()
sage: %time p = bmilp.milp.polyhedron(base_ring=QQ, backend='normaliz')
CPU times: user 110 ms, sys: 3.31 ms, total: 113 ms
Wall time: 112 ms
sage: %time p = bmilp.milp.polyhedron(base_ring=QQ, backend='normaliz').integral_points()
CPU times: user 317 ms, sys: 35.3 ms, total: 352 ms
Wall time: 380 ms
```
In this example (perfect formulation), it only adds overhead.

It would be interesting to investigate bijectionist examples in which the IP solver actually has to do something nontrivial.



---

archive/issue_comments_540009.json:
```json
{
    "body": "<a id='comment:69'></a>\nIn any case I would like to structure the program so that we can try either method easily.  Possibly this guides us towards a good design?\n\nI should add, the most important use case is probably `minimal_subdistributions_iterator`.  Will it work there, too?\n\nUnfortunately, I am running out of time myself :-(",
    "created_at": "2022-12-29T22:44:59Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540009",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:69'></a>
In any case I would like to structure the program so that we can try either method easily.  Possibly this guides us towards a good design?

I should add, the most important use case is probably `minimal_subdistributions_iterator`.  Will it work there, too?

Unfortunately, I am running out of time myself :-(



---

archive/issue_comments_540010.json:
```json
{
    "body": "<a id='comment:70'></a>\nReplying to [Martin Rubey](#comment%3A69):\n> In any case I would like to structure the program so that we can try either method easily.  Possibly this guides us towards a good design?\n\nYes, I think my suggestions in [comment:59](#comment%3A59), in particular avoiding use of `MIPSolverException` in the main class, will go in this direction",
    "created_at": "2022-12-29T23:01:35Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540010",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>
Replying to [Martin Rubey](#comment%3A69):
> In any case I would like to structure the program so that we can try either method easily.  Possibly this guides us towards a good design?

Yes, I think my suggestions in [comment:59](#comment%3A59), in particular avoiding use of `MIPSolverException` in the main class, will go in this direction



---

archive/issue_comments_540011.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [Martin Rubey](#comment%3A69):\n> the most important use case is probably `minimal_subdistributions_iterator`.  Will it work there, too?\n\nI haven't looked at the IP formulation that you use there, but I see that you have some general integer variables in addition to 0/1 variables. Is it true that a choice of the values of the 0/1 variables uniquely determines the values of the other variables? Then the same method applies.",
    "created_at": "2022-12-29T23:04:14Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540011",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:71'></a>
Replying to [Martin Rubey](#comment%3A69):
> the most important use case is probably `minimal_subdistributions_iterator`.  Will it work there, too?

I haven't looked at the IP formulation that you use there, but I see that you have some general integer variables in addition to 0/1 variables. Is it true that a choice of the values of the 0/1 variables uniquely determines the values of the other variables? Then the same method applies.



---

archive/issue_comments_540012.json:
```json
{
    "body": "<a id='comment:72'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d83a6c50c0da26065e7fda350b7a7980e98f52e\">9d83a6c</a></td><td><code>remove unused code for backends that do not support removing constraints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/864029dc1800ac3af007a58f50f9f19c2ccb98ac\">864029d</a></td><td><code>make _solution a public method of _BijectionistMILP, simplify solve</code></td></tr></table>\n",
    "created_at": "2022-12-30T13:47:05Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d83a6c50c0da26065e7fda350b7a7980e98f52e">9d83a6c</a></td><td><code>remove unused code for backends that do not support removing constraints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/864029dc1800ac3af007a58f50f9f19c2ccb98ac">864029d</a></td><td><code>make _solution a public method of _BijectionistMILP, simplify solve</code></td></tr></table>




---

archive/issue_comments_540013.json:
```json
{
    "body": "**Changing commit** from \"[a3364dec31f6eee2ca1c2f2777a39df5a57a716a](https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a)\" to \"[864029dc1800ac3af007a58f50f9f19c2ccb98ac](https://github.com/sagemath/sagetrac-mirror/commit/864029dc1800ac3af007a58f50f9f19c2ccb98ac)\".",
    "created_at": "2022-12-30T13:47:05Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a3364dec31f6eee2ca1c2f2777a39df5a57a716a](https://github.com/sagemath/sagetrac-mirror/commit/a3364dec31f6eee2ca1c2f2777a39df5a57a716a)" to "[864029dc1800ac3af007a58f50f9f19c2ccb98ac](https://github.com/sagemath/sagetrac-mirror/commit/864029dc1800ac3af007a58f50f9f19c2ccb98ac)".



---

archive/issue_comments_540014.json:
```json
{
    "body": "<a id='comment:73'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64101a8ffe9fabffa5a33faca001b4292ba6e28d\">64101a8</a></td><td><code>eliminate _initialize_new_bmilp</code></td></tr></table>\n",
    "created_at": "2022-12-30T14:11:56Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:73'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64101a8ffe9fabffa5a33faca001b4292ba6e28d">64101a8</a></td><td><code>eliminate _initialize_new_bmilp</code></td></tr></table>




---

archive/issue_comments_540015.json:
```json
{
    "body": "**Changing commit** from \"[864029dc1800ac3af007a58f50f9f19c2ccb98ac](https://github.com/sagemath/sagetrac-mirror/commit/864029dc1800ac3af007a58f50f9f19c2ccb98ac)\" to \"[64101a8ffe9fabffa5a33faca001b4292ba6e28d](https://github.com/sagemath/sagetrac-mirror/commit/64101a8ffe9fabffa5a33faca001b4292ba6e28d)\".",
    "created_at": "2022-12-30T14:11:56Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[864029dc1800ac3af007a58f50f9f19c2ccb98ac](https://github.com/sagemath/sagetrac-mirror/commit/864029dc1800ac3af007a58f50f9f19c2ccb98ac)" to "[64101a8ffe9fabffa5a33faca001b4292ba6e28d](https://github.com/sagemath/sagetrac-mirror/commit/64101a8ffe9fabffa5a33faca001b4292ba6e28d)".



---

archive/issue_comments_540016.json:
```json
{
    "body": "<a id='comment:74'></a>\nI have now completed most of your suggestions.  The remaining ones are:\n\n* perhaps there could be a slightly more high-level function [replacing `_BijectionistMILP.solution`] so that various Bijectionist methods do not have to repeat the `try ... solve ... except MIPSolverException ... else solution` pattern \n\n* I would also suggest to introduce a method in `_BijectionistMILP` that returns the variable `_x[p, z]` so that you can remove the direct use of this attribute from the Bijectionist class.\n\nI am not completely sure how exactly I should go about these.  I am still not convinced that it is a good idea to have the helper class at all.  The distinction between \"temporary constraints\", which are built in the main class and passed to `_BijectionistMILP.solve` and \"permanent constraints\", which are built by `_BijectionistMILP` itself, doesn't look completely right to me.\n\nAlso, it seems a bit strange that `_BijectionistMILP` calls methods of the main class, `_preprocess_intertwining_relations` and `_compute_possible_block_values`.  Maybe these should be moved to the helper class also?  \n\nOn a quite different level, I am pretty sure that the logic of `_forced_constant_blocks` can be simplified.  Apart from the main routine, note that at the very end we do `self.set_constant_blocks`, which invalidates the MILP and therefore all solutions in the cache.\n\nYet another thing, which is truly a detail: the method `_is_solution` really should be a method of `LinearConstraint`.\n\nIn summary, there is still a lot of work that could be done, but I am not sure whether the right time for this is now.",
    "created_at": "2022-12-30T14:58:13Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540016",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:74'></a>
I have now completed most of your suggestions.  The remaining ones are:

* perhaps there could be a slightly more high-level function [replacing `_BijectionistMILP.solution`] so that various Bijectionist methods do not have to repeat the `try ... solve ... except MIPSolverException ... else solution` pattern 

* I would also suggest to introduce a method in `_BijectionistMILP` that returns the variable `_x[p, z]` so that you can remove the direct use of this attribute from the Bijectionist class.

I am not completely sure how exactly I should go about these.  I am still not convinced that it is a good idea to have the helper class at all.  The distinction between "temporary constraints", which are built in the main class and passed to `_BijectionistMILP.solve` and "permanent constraints", which are built by `_BijectionistMILP` itself, doesn't look completely right to me.

Also, it seems a bit strange that `_BijectionistMILP` calls methods of the main class, `_preprocess_intertwining_relations` and `_compute_possible_block_values`.  Maybe these should be moved to the helper class also?  

On a quite different level, I am pretty sure that the logic of `_forced_constant_blocks` can be simplified.  Apart from the main routine, note that at the very end we do `self.set_constant_blocks`, which invalidates the MILP and therefore all solutions in the cache.

Yet another thing, which is truly a detail: the method `_is_solution` really should be a method of `LinearConstraint`.

In summary, there is still a lot of work that could be done, but I am not sure whether the right time for this is now.



---

archive/issue_comments_540017.json:
```json
{
    "body": "<a id='comment:75'></a>\nThere is now a weird bug with SCIP:\n\nCurrently (after adding `default_mip_solver(\"SCIP\")` at the very beginning, most tests fail with an error like\n\n```\nFile \"src/sage/combinat/bijectionist.py\", line 160, in sage.combinat.bijectionist\nFailed example:\n    for D in sorted(bij.minimal_subdistributions_iterator(), key=lambda x: (len(x[0][0]), x)):\n        ascii_art(D)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/martin/sage-develop/src/sage/doctest/forker.py\", line 695, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/martin/sage-develop/src/sage/doctest/forker.py\", line 1093, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.bijectionist[37]>\", line 1, in <module>\n        for D in sorted(bij.minimal_subdistributions_iterator(), key=lambda x: (len(x[Integer(0)][Integer(0)]), x)):\n      File \"/home/martin/sage-develop/src/sage/combinat/bijectionist.py\", line 1901, in minimal_subdistributions_iterator\n        new_s = self._find_counter_example(self._A, s, d, False)\n      File \"/home/martin/sage-develop/src/sage/combinat/bijectionist.py\", line 1967, in _find_counter_example\n        bmilp.solve(tmp_constraints)\n      File \"/home/martin/sage-develop/src/sage/combinat/bijectionist.py\", line 2752, in solve\n        self.milp.remove_constraints(new_indices)\n      File \"sage/numerical/mip.pyx\", line 2382, in sage.numerical.mip.MixedIntegerLinearProgram.remove_constraints\n        self._backend.remove_constraints(constraints)\n      File \"sage/numerical/backends/generic_backend.pyx\", line 432, in sage.numerical.backends.generic_backend.GenericBackend.remove_constraints\n        self.remove_constraint(c)\n      File \"sage/numerical/backends/scip_backend.pyx\", line 360, in sage.numerical.backends.scip_backend.SCIPBackend.remove_constraint\n        raise ValueError(\"The constraint's index i must satisfy 0 <= i < number_of_constraints\")\n    ValueError: The constraint's index i must satisfy 0 <= i < number_of_constraints\n```\n\n\nAdding\n\n```\n!#diff\ndiff --git a/src/sage/combinat/bijectionist.py b/src/sage/combinat/bijectionist.py\nindex 4da0be9fd9f..661677f78e3 100644\n--- a/src/sage/combinat/bijectionist.py\n+++ b/src/sage/combinat/bijectionist.py\n@@ -38,6 +38,7 @@ A guided tour\n     We find a statistic `s` such that\n     `(s, wex, fix) \\sim (llis, des, adj)`::\n \n+        sage: default_mip_solver(\"SCIP\")\n         sage: N = 3\n         sage: As = [list(Permutations(n)) for n in range(N+1)]\n         sage: A = B = sum(As, [])\n@@ -2747,6 +2748,7 @@ class _BijectionistMILP():\n             self.last_solution = self.milp.get_values(self._x,\n                                                       convert=bool, tolerance=0.1)\n         finally:\n+            repr(self.milp)\n             self.milp.remove_constraints(new_indices)\n \n         # veto the solution, by requiring that not all variables with\n```\nthis problem goes away, and the output of the tests is OK.  What could this be?",
    "created_at": "2022-12-30T17:43:42Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540017",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:75'></a>
There is now a weird bug with SCIP:

Currently (after adding `default_mip_solver("SCIP")` at the very beginning, most tests fail with an error like

```
File "src/sage/combinat/bijectionist.py", line 160, in sage.combinat.bijectionist
Failed example:
    for D in sorted(bij.minimal_subdistributions_iterator(), key=lambda x: (len(x[0][0]), x)):
        ascii_art(D)
Exception raised:
    Traceback (most recent call last):
      File "/home/martin/sage-develop/src/sage/doctest/forker.py", line 695, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/martin/sage-develop/src/sage/doctest/forker.py", line 1093, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.bijectionist[37]>", line 1, in <module>
        for D in sorted(bij.minimal_subdistributions_iterator(), key=lambda x: (len(x[Integer(0)][Integer(0)]), x)):
      File "/home/martin/sage-develop/src/sage/combinat/bijectionist.py", line 1901, in minimal_subdistributions_iterator
        new_s = self._find_counter_example(self._A, s, d, False)
      File "/home/martin/sage-develop/src/sage/combinat/bijectionist.py", line 1967, in _find_counter_example
        bmilp.solve(tmp_constraints)
      File "/home/martin/sage-develop/src/sage/combinat/bijectionist.py", line 2752, in solve
        self.milp.remove_constraints(new_indices)
      File "sage/numerical/mip.pyx", line 2382, in sage.numerical.mip.MixedIntegerLinearProgram.remove_constraints
        self._backend.remove_constraints(constraints)
      File "sage/numerical/backends/generic_backend.pyx", line 432, in sage.numerical.backends.generic_backend.GenericBackend.remove_constraints
        self.remove_constraint(c)
      File "sage/numerical/backends/scip_backend.pyx", line 360, in sage.numerical.backends.scip_backend.SCIPBackend.remove_constraint
        raise ValueError("The constraint's index i must satisfy 0 <= i < number_of_constraints")
    ValueError: The constraint's index i must satisfy 0 <= i < number_of_constraints
```


Adding

```
!#diff
diff --git a/src/sage/combinat/bijectionist.py b/src/sage/combinat/bijectionist.py
index 4da0be9fd9f..661677f78e3 100644
--- a/src/sage/combinat/bijectionist.py
+++ b/src/sage/combinat/bijectionist.py
@@ -38,6 +38,7 @@ A guided tour
     We find a statistic `s` such that
     `(s, wex, fix) \sim (llis, des, adj)`::
 
+        sage: default_mip_solver("SCIP")
         sage: N = 3
         sage: As = [list(Permutations(n)) for n in range(N+1)]
         sage: A = B = sum(As, [])
@@ -2747,6 +2748,7 @@ class _BijectionistMILP():
             self.last_solution = self.milp.get_values(self._x,
                                                       convert=bool, tolerance=0.1)
         finally:
+            repr(self.milp)
             self.milp.remove_constraints(new_indices)
 
         # veto the solution, by requiring that not all variables with
```
this problem goes away, and the output of the tests is OK.  What could this be?



---

archive/issue_comments_540018.json:
```json
{
    "body": "<a id='comment:76'></a>\nInstead of `repr(self.milp)`, doing\n\n```\n            m = self.milp\n            b = m.get_backend()\n            [b.objective_coefficient(i) for i in range(b.ncols())]\n```\nis enough to make things work.",
    "created_at": "2022-12-30T18:21:54Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540018",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:76'></a>
Instead of `repr(self.milp)`, doing

```
            m = self.milp
            b = m.get_backend()
            [b.objective_coefficient(i) for i in range(b.ncols())]
```
is enough to make things work.



---

archive/issue_comments_540019.json:
```json
{
    "body": "<a id='comment:77'></a>\n\n```\n            m = self.milp.get_backend()._get_model()\n            if m.getStatus() != 'unknown':            \n                m.freeTransform()\n```\nis also enough.",
    "created_at": "2022-12-30T18:28:27Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540019",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:77'></a>

```
            m = self.milp.get_backend()._get_model()
            if m.getStatus() != 'unknown':            
                m.freeTransform()
```
is also enough.



---

archive/issue_comments_540020.json:
```json
{
    "body": "<a id='comment:78'></a>\nThis raises yet another question: according to the documentation, https://scipopt.github.io/PySCIPOpt/docs/html/classpyscipopt_1_1scip_1_1Model.html#a13c33bbfda259edd6249879a8cc3bcb8:\n\n```\nFrees all solution process data including presolving and transformed problem, only original problem is kept\n```\n\nBut this means that adding and removing constraints again is really expensive, no?",
    "created_at": "2022-12-30T18:45:10Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540020",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:78'></a>
This raises yet another question: according to the documentation, https://scipopt.github.io/PySCIPOpt/docs/html/classpyscipopt_1_1scip_1_1Model.html#a13c33bbfda259edd6249879a8cc3bcb8:

```
Frees all solution process data including presolving and transformed problem, only original problem is kept
```

But this means that adding and removing constraints again is really expensive, no?



---

archive/issue_comments_540021.json:
```json
{
    "body": "<a id='comment:79'></a>\nReplying to [Martin Rubey](#comment%3A78):\n> This raises yet another question: according to the documentation, https://scipopt.github.io/PySCIPOpt/docs/html/classpyscipopt_1_1scip_1_1Model.html#a13c33bbfda259edd6249879a8cc3bcb8:\n> \n> ```\n> Frees all solution process data including presolving and transformed problem, only original problem is kept\n> ```\n> \n> But this means that adding and removing constraints again is really expensive, no?\n\nYes.",
    "created_at": "2022-12-30T19:03:11Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540021",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>
Replying to [Martin Rubey](#comment%3A78):
> This raises yet another question: according to the documentation, https://scipopt.github.io/PySCIPOpt/docs/html/classpyscipopt_1_1scip_1_1Model.html#a13c33bbfda259edd6249879a8cc3bcb8:
> 
> ```
> Frees all solution process data including presolving and transformed problem, only original problem is kept
> ```
> 
> But this means that adding and removing constraints again is really expensive, no?

Yes.



---

archive/issue_comments_540022.json:
```json
{
    "body": "<a id='comment:80'></a>\nReplying to [Martin Rubey](#comment%3A77):\n> \n> ```\n>             m = self.milp.get_backend()._get_model()\n>             if m.getStatus() != 'unknown':            \n>                 m.freeTransform()\n> ```\n> is also enough.\n\nCan you find a fix for scip_backend.pyx?",
    "created_at": "2022-12-30T19:04:51Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540022",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:80'></a>
Replying to [Martin Rubey](#comment%3A77):
> 
> ```
>             m = self.milp.get_backend()._get_model()
>             if m.getStatus() != 'unknown':            
>                 m.freeTransform()
> ```
> is also enough.

Can you find a fix for scip_backend.pyx?



---

archive/issue_comments_540023.json:
```json
{
    "body": "<a id='comment:81'></a>\nNo, I have no idea what's going on, because we have\n\n```\n    cpdef remove_constraint(self, int i):\n...\n        if i < 0 or i >= self.nrows():\n            raise ValueError(\"The constraint's index i must satisfy 0 <= i < number_of_constraints\")\n        if self.model.getStatus() != 'unknown':\n            self.model.freeTransform()\n        self.model.delCons(self.model.getConss()[i])\n```\nand using this method (instead of using `remove_constraints`)  fails also.",
    "created_at": "2022-12-30T19:26:07Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540023",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:81'></a>
No, I have no idea what's going on, because we have

```
    cpdef remove_constraint(self, int i):
...
        if i < 0 or i >= self.nrows():
            raise ValueError("The constraint's index i must satisfy 0 <= i < number_of_constraints")
        if self.model.getStatus() != 'unknown':
            self.model.freeTransform()
        self.model.delCons(self.model.getConss()[i])
```
and using this method (instead of using `remove_constraints`)  fails also.



---

archive/issue_comments_540024.json:
```json
{
    "body": "<a id='comment:82'></a>\nUnrelated comment:\n\n```\n+        # convert input to set of block representatives\n+        blocks = set()\n+        if p in self._A:\n+            blocks.add(self._P.find(p))\n+        elif type(p) is list:  # TODO: this looks very brittle\n+            for p1 in p:\n+                if p1 in self._A:\n+                    blocks.add(self._P.find(p1))\n+                elif type(p1) is list:\n+                    for p2 in p1:\n+                        blocks.add(self._P.find(p2))\n```\nInstead of `type(...) is list`, you can use `isinstance(..., collections.abc.Iterable)` - https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes\n\nAlso after each the `elif` blocks, there should probably be an `else` block that raises an error.",
    "created_at": "2022-12-30T19:50:31Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540024",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>
Unrelated comment:

```
+        # convert input to set of block representatives
+        blocks = set()
+        if p in self._A:
+            blocks.add(self._P.find(p))
+        elif type(p) is list:  # TODO: this looks very brittle
+            for p1 in p:
+                if p1 in self._A:
+                    blocks.add(self._P.find(p1))
+                elif type(p1) is list:
+                    for p2 in p1:
+                        blocks.add(self._P.find(p2))
```
Instead of `type(...) is list`, you can use `isinstance(..., collections.abc.Iterable)` - https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes

Also after each the `elif` blocks, there should probably be an `else` block that raises an error.



---

archive/issue_comments_540025.json:
```json
{
    "body": "<a id='comment:83'></a>\nReplying to [Matthias K\u00f6ppe](#comment%3A82):\n\n> Instead of `type(...) is list`, you can use `isinstance(..., collections.abc.Iterable)` - https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes\n\nI don't think so, because elements of `A` might be iterable.  We require the objects to be hashable, so we can allow lists.",
    "created_at": "2022-12-30T19:58:31Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540025",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:83'></a>
Replying to [Matthias KÃ¶ppe](#comment%3A82):

> Instead of `type(...) is list`, you can use `isinstance(..., collections.abc.Iterable)` - https://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes

I don't think so, because elements of `A` might be iterable.  We require the objects to be hashable, so we can allow lists.



---

archive/issue_comments_540026.json:
```json
{
    "body": "<a id='comment:84'></a>\nOK, I'll take care of [#21003 comment:139](https://github.com/sagemath/sage/issues/21003#comment:139) first and then try to reproduce [comment:75](#comment%3A75)",
    "created_at": "2022-12-30T20:10:20Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540026",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:84'></a>
OK, I'll take care of [#21003 comment:139](https://github.com/sagemath/sage/issues/21003#comment:139) first and then try to reproduce [comment:75](#comment%3A75)



---

archive/issue_comments_540027.json:
```json
{
    "body": "<a id='comment:85'></a>\nI've pushed a branch with merged dependencies to `public/33238`. Can't reproduce the problem",
    "created_at": "2022-12-30T21:56:38Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540027",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:85'></a>
I've pushed a branch with merged dependencies to `public/33238`. Can't reproduce the problem



---

archive/issue_comments_540028.json:
```json
{
    "body": "<a id='comment:86'></a>\nUnrelated:\n\n```\n            # function adding a solution to dict of solutions\n            def add_solution(solutions, solution):\n                for p, value in solution.items():\n                    if p not in solutions:\n                        solutions[p] = set()\n                    solutions[p].add(value)\n\n            [...]\n\n            solutions = {}\n            add_solution(solutions, solution)\n```\nThis can be simplified using `solutions = defaultdict(set)`",
    "created_at": "2022-12-30T22:07:25Z",
    "issue": "https://github.com/sagemath/sage/issues/33238",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/33238#issuecomment-540028",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>
Unrelated:

```
            # function adding a solution to dict of solutions
            def add_solution(solutions, solution):
                for p, value in solution.items():
                    if p not in solutions:
                        solutions[p] = set()
                    solutions[p].add(value)

            [...]

            solutions = {}
            add_solution(solutions, solution)
```
This can be simplified using `solutions = defaultdict(set)`

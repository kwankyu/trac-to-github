# Issue 34942: GH Actions: Remove pull_request triggers for portability workflows

archive/issues_034705.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe portability tests cannot be run on every PR.\n\nInstead we need to run `build`, `doc-build` on every PR (just as we already run `lint`)\n\nWe also remove the `ticket` workflow; it is not needed.\n\nFixes https://github.com/sagemath/trac-to-github/issues/157\n\nCC:  @tobiasdiez\n\nComponent: **porting**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows) @ [`59033e2`](https://github.com/sagemath/sagetrac-mirror/commit/59033e2ee5adfa821bc7c6cc9baf72900beed139)**\n\nReviewer: **Tobias Diez**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34942_\n\n",
    "created_at": "2023-01-27T07:26:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/positive%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "GH Actions: Remove pull_request triggers for portability workflows",
    "type": "issue",
    "updated_at": "2023-01-29T21:19:52Z",
    "url": "https://github.com/sagemath/sage/issues/34942",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

The portability tests cannot be run on every PR.

Instead we need to run `build`, `doc-build` on every PR (just as we already run `lint`)

We also remove the `ticket` workflow; it is not needed.

Fixes https://github.com/sagemath/trac-to-github/issues/157

CC:  @tobiasdiez

Component: **porting**

Author: **Matthias Koeppe**

Branch/Commit: **[u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows) @ [`59033e2`](https://github.com/sagemath/sagetrac-mirror/commit/59033e2ee5adfa821bc7c6cc9baf72900beed139)**

Reviewer: **Tobias Diez**

_Issue created by migration from https://trac.sagemath.org/ticket/34942_





---

archive/issue_events_473071.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-27T07:26:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473071"
}
```



---

archive/issue_events_473072.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-27T07:26:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473072"
}
```



---

archive/issue_events_473073.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-27T07:26:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473073"
}
```



---

archive/issue_events_473074.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-27T07:26:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473074"
}
```



---

archive/issue_comments_562772.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2023-01-27T07:31:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562772",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_562773.json:
```json
{
    "body": "Branch: **[u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows)**",
    "created_at": "2023-01-27T07:37:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562773",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/gh_actions__remove_pull_request_triggers_for_portability_workflows)**



---

archive/issue_comments_562774.json:
```json
{
    "body": "Commit: **[`2958f16`](https://github.com/sagemath/sagetrac-mirror/commit/2958f16b90f31d54f9e0019c8cbc7928004675c6)**",
    "created_at": "2023-01-27T07:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562774",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`2958f16`](https://github.com/sagemath/sagetrac-mirror/commit/2958f16b90f31d54f9e0019c8cbc7928004675c6)**



---

archive/issue_events_473075.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-27T07:37:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473075"
}
```



---

archive/issue_comments_562775.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2958f16b90f31d54f9e0019c8cbc7928004675c6\"><code>2958f16</code></a></td><td><code>.github/workflows: Run build, doc-build on pull_request; do not run portability on pull_request; remove ticket.yaml</code></td></tr></table>\n",
    "created_at": "2023-01-27T07:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562775",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2958f16b90f31d54f9e0019c8cbc7928004675c6"><code>2958f16</code></a></td><td><code>.github/workflows: Run build, doc-build on pull_request; do not run portability on pull_request; remove ticket.yaml</code></td></tr></table>




---

archive/issue_comments_562776.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,7 @@\n (from https://github.com/sagemath/trac-to-github/issues/157)\n+\n+The portability tests cannot be run on every PR.\n+\n+Instead we need to run `build`, `doc-build` on every PR (just as we already run `lint`)\n+\n+We also remove the `ticket` workflow; it is not needed.\n``````\n",
    "created_at": "2023-01-27T07:39:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562776",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,7 @@
 (from https://github.com/sagemath/trac-to-github/issues/157)
+
+The portability tests cannot be run on every PR.
+
+Instead we need to run `build`, `doc-build` on every PR (just as we already run `lint`)
+
+We also remove the `ticket` workflow; it is not needed.
``````




---

archive/issue_comments_562777.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nFrom https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#pull_request\n> By default, a workflow only runs when a pull_request event's activity type is opened, synchronize, or reopened. \n\nSo I think, simply having the trigger as \"pull_request\" should be sufficient, or not?",
    "created_at": "2023-01-27T08:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562777",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:5" align="right">comment:5</div>

From https://docs.github.com/en/actions/using-workflows/events-that-trigger-workflows#pull_request
> By default, a workflow only runs when a pull_request event's activity type is opened, synchronize, or reopened. 

So I think, simply having the trigger as "pull_request" should be sufficient, or not?



---

archive/issue_comments_562778.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIn the docs workflow, \"if: github.repository == 'sagemath/sagetrac-mirror'\" needs to be removed as well.",
    "created_at": "2023-01-27T08:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562778",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:6" align="right">comment:6</div>

In the docs workflow, "if: github.repository == 'sagemath/sagetrac-mirror'" needs to be removed as well.



---

archive/issue_comments_562779.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [Tobias Diez](#comment%3A5):\n> simply having the trigger as \"pull_request\" should be sufficient, or not?\n\nYou are right; I'll simplify it.",
    "created_at": "2023-01-27T15:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562779",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [Tobias Diez](#comment%3A5):
> simply having the trigger as "pull_request" should be sufficient, or not?

You are right; I'll simplify it.



---

archive/issue_comments_562780.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adf85df22b5c1f2cb3d6444bda35012084758f8e\"><code>adf85df</code></a></td><td><code>.github/workflows/{build,doc-build}.yml: Use default event types for pull_request trigger</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59033e2ee5adfa821bc7c6cc9baf72900beed139\"><code>59033e2</code></a></td><td><code>.github/workflows/doc-build.yml: Remove check for repo sagemath/sagetrac-mirror; deploy when NETLIFY_AUTH_TOKEN is set</code></td></tr></table>\n",
    "created_at": "2023-01-27T16:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562780",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adf85df22b5c1f2cb3d6444bda35012084758f8e"><code>adf85df</code></a></td><td><code>.github/workflows/{build,doc-build}.yml: Use default event types for pull_request trigger</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59033e2ee5adfa821bc7c6cc9baf72900beed139"><code>59033e2</code></a></td><td><code>.github/workflows/doc-build.yml: Remove check for repo sagemath/sagetrac-mirror; deploy when NETLIFY_AUTH_TOKEN is set</code></td></tr></table>




---

archive/issue_comments_562781.json:
```json
{
    "body": "Changed commit from **[`2958f16`](https://github.com/sagemath/sagetrac-mirror/commit/2958f16b90f31d54f9e0019c8cbc7928004675c6)** to **[`59033e2`](https://github.com/sagemath/sagetrac-mirror/commit/59033e2ee5adfa821bc7c6cc9baf72900beed139)**",
    "created_at": "2023-01-27T16:40:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562781",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2958f16`](https://github.com/sagemath/sagetrac-mirror/commit/2958f16b90f31d54f9e0019c8cbc7928004675c6)** to **[`59033e2`](https://github.com/sagemath/sagetrac-mirror/commit/59033e2ee5adfa821bc7c6cc9baf72900beed139)**



---

archive/issue_comments_562782.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nLooks good!",
    "created_at": "2023-01-28T05:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562782",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">comment:9</div>

Looks good!



---

archive/issue_events_473076.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2023-01-28T05:36:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473076"
}
```



---

archive/issue_events_473077.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2023-01-28T05:36:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34942#event-473077"
}
```



---

archive/issue_comments_562783.json:
```json
{
    "body": "Reviewer: **Tobias Diez**",
    "created_at": "2023-01-28T05:36:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562783",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez**



---

archive/issue_comments_562784.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks!",
    "created_at": "2023-01-28T05:53:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562784",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks!



---

archive/issue_comments_562785.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n-(from https://github.com/sagemath/trac-to-github/issues/157)\n-\n The portability tests cannot be run on every PR.\n \n Instead we need to run `build`, `doc-build` on every PR (just as we already run `lint`)\n \n We also remove the `ticket` workflow; it is not needed.\n+\n+Fixes https://github.com/sagemath/trac-to-github/issues/157\n``````\n",
    "created_at": "2023-01-29T21:19:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34942",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34942#issuecomment-562785",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
-(from https://github.com/sagemath/trac-to-github/issues/157)
-
 The portability tests cannot be run on every PR.
 
 Instead we need to run `build`, `doc-build` on every PR (just as we already run `lint`)
 
 We also remove the `ticket` workflow; it is not needed.
+
+Fixes https://github.com/sagemath/trac-to-github/issues/157
``````


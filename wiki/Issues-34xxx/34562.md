# Issue 34562: refactor multiple zeta values

archive/issues_034325.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis ticket mainly aims to separate the auxiliary F-algebra in another file.\n\nThis file implements a better custom-made F-algebra, with additional useful methods.\n\n\n\nCC:  @videlec @tscrim\n\nComponent: **number theory**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`8a8cdf3`](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/34562_\n\n",
    "closed_at": "2022-09-27T22:27:54Z",
    "created_at": "2022-09-20T09:42:46Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "refactor multiple zeta values",
    "type": "issue",
    "updated_at": "2022-09-27T22:27:54Z",
    "url": "https://github.com/sagemath/sage/issues/34562",
    "user": "https://github.com/fchapoton"
}
```
<div id="comment:0"></div>

This ticket mainly aims to separate the auxiliary F-algebra in another file.

This file implements a better custom-made F-algebra, with additional useful methods.



CC:  @videlec @tscrim

Component: **number theory**

Author: **Frédéric Chapoton**

Branch/Commit: **[`8a8cdf3`](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/34562_





---

archive/issue_events_469656.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469656"
}
```



---

archive/issue_events_469657.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469657"
}
```



---

archive/issue_events_469658.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469658"
}
```



---

archive/issue_events_469659.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:42:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469659"
}
```



---

archive/issue_events_469660.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2022-09-20T09:43:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469660"
}
```



---

archive/issue_comments_558610.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869\"><code>f8a5eea</code></a></td><td><code>refactor MZV using a new file for a better auxiliary F_algebra</code></td></tr></table>\n",
    "created_at": "2022-09-20T09:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558610",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869"><code>f8a5eea</code></a></td><td><code>refactor MZV using a new file for a better auxiliary F_algebra</code></td></tr></table>




---

archive/issue_comments_558611.json:
```json
{
    "body": "Commit: **[`f8a5eea`](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)**",
    "created_at": "2022-09-20T09:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558611",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`f8a5eea`](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)**



---

archive/issue_comments_558612.json:
```json
{
    "body": "Branch: **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)**",
    "created_at": "2022-09-20T09:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558612",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)**



---

archive/issue_comments_558613.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nSome quick comments about the `F_algebra`:\n\n- The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.\n- There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n- The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.\n- Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n- Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n- For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.",
    "created_at": "2022-09-20T10:16:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558613",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

Some quick comments about the `F_algebra`:

- The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.
- There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.
- The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.
- Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).
- Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.
- For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.



---

archive/issue_comments_558614.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34\"><code>3b06406</code></a></td><td><code>using NonNegativeIntegers instead of NN</code></td></tr></table>\n",
    "created_at": "2022-09-20T11:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558614",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34"><code>3b06406</code></a></td><td><code>using NonNegativeIntegers instead of NN</code></td></tr></table>




---

archive/issue_comments_558615.json:
```json
{
    "body": "Changed commit from **[`f8a5eea`](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)** to **[`3b06406`](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)**",
    "created_at": "2022-09-20T11:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558615",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8a5eea`](https://github.com/sagemath/sagetrac-mirror/commit/f8a5eea2cf1d80bc00e442a824498a7c77468869)** to **[`3b06406`](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)**



---

archive/issue_comments_558616.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c447fc23ea071c52e1dc0b8608934a05473826d4\"><code>c447fc2</code></a></td><td><code>Merge branch 'u/chapoton/34562' in 9.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b\"><code>c7b3fee</code></a></td><td><code>remove wrong alias for coefficients</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558616",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c447fc23ea071c52e1dc0b8608934a05473826d4"><code>c447fc2</code></a></td><td><code>Merge branch 'u/chapoton/34562' in 9.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b"><code>c7b3fee</code></a></td><td><code>remove wrong alias for coefficients</code></td></tr></table>




---

archive/issue_comments_558617.json:
```json
{
    "body": "Changed commit from **[`3b06406`](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)** to **[`c7b3fee`](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)**",
    "created_at": "2022-09-21T07:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558617",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3b06406`](https://github.com/sagemath/sagetrac-mirror/commit/3b06406df5cf16582b125245f5adc03d221f9d34)** to **[`c7b3fee`](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)**



---

archive/issue_comments_558618.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHello,\n\nthanks a lot for the suggestions !\n\n> - The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.\n\nok, done by removing the wrong alias that I had added.\n\n> - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n\nwell, the difficulty is that it only makes sense for homogeneous elements, and the usual \"from_vector\" methods does not take the degree as input\n\n> - The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.\n\nI substituted that for NN and it works fine.\n\n> - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n\nI would rather keep \"str_to_index\" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..\n\n> - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n\nNot sure how to achieve \"words of any length in odd integers at least 3 with sum n\" using the existing tools. And speed generally matters in this file, indeed.\n\n> - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.\n\nI have not yet checked that last suggestion.",
    "created_at": "2022-09-21T07:07:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558618",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

Hello,

thanks a lot for the suggestions !

> - The element's `coefficients` should return the nonzero coefficients, but the current implementation has different behavior.

ok, done by removing the wrong alias that I had added.

> - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.

well, the difficulty is that it only makes sense for homogeneous elements, and the usual "from_vector" methods does not take the degree as input

> - The `NN` can be a little funky when it comes to lazy imports not resolving correctly (#16522). It would be better to use `NonNegativeIntegers()` unless you specifically are looking for the algebraic aspects.

I substituted that for NN and it works fine.

> - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).

I would rather keep "str_to_index" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..

> - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.

Not sure how to achieve "words of any length in odd integers at least 3 with sum n" using the existing tools. And speed generally matters in this file, indeed.

> - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.

I have not yet checked that last suggestion.



---

archive/issue_comments_558619.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3\"><code>0a56256</code></a></td><td><code>implement and use attribute _indices in F-algebra</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3"><code>0a56256</code></a></td><td><code>implement and use attribute _indices in F-algebra</code></td></tr></table>




---

archive/issue_comments_558620.json:
```json
{
    "body": "Changed commit from **[`c7b3fee`](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)** to **[`0a56256`](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)**",
    "created_at": "2022-09-21T07:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558620",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c7b3fee`](https://github.com/sagemath/sagetrac-mirror/commit/c7b3fee645b47b1236fd59eeb8f3f5ceffabc13b)** to **[`0a56256`](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)**



---

archive/issue_comments_558621.json:
```json
{
    "body": "Changed commit from **[`0a56256`](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)** to **[`6f11059`](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)**",
    "created_at": "2022-09-21T07:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0a56256`](https://github.com/sagemath/sagetrac-mirror/commit/0a56256f45417f9047f05d14926c2dfc3e22b8b3)** to **[`6f11059`](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)**



---

archive/issue_comments_558622.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556\"><code>6f11059</code></a></td><td><code>using sum_of_monomials</code></td></tr></table>\n",
    "created_at": "2022-09-21T07:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558622",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556"><code>6f11059</code></a></td><td><code>using sum_of_monomials</code></td></tr></table>




---

archive/issue_comments_558623.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [Fr\u00e9d\u00e9ric Chapoton](#comment%3A5):\n> thanks a lot for the suggestions !\n\nThank you for all your work on Sage.\n\n> > - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.\n> \n> \n> well, the difficulty is that it only makes sense for homogeneous elements, and the usual \"from_vector\" methods does not take the degree as input\n\nI see. This breaks the `CFM.from_vector(v.to_vector()) == v` loop though (although that is more for finite dimensional modules). Perhaps we could rename this here to `homogeneous_to_vector()` to make it more future-proof (if we implement a generic infinite dimensional version someday)?\n\n> > - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).\n> \n> \n> I would rather keep \"str_to_index\" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..\n\nSubsequently it effectively gets nailed in memory. It's fairly lightweight (and only one of them), so its not a problem, but it still is something that gets carried around.\n\nAlso, you shouldn't need to set `self._indices = Indices`; that should be done by the `CFM.__init__()`.\n\n> > - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.\n> \n> \n> Not sure how to achieve \"words of any length in odd integers at least 3 with sum n\" using the existing tools. And speed generally matters in this file, indeed.\n\nIf speed matters, then perhaps we should just Cythonize the file. It would allow you to replace the `self.parent()` with `self._parent`, which is faster.\n\nPerhaps iterating over the indices is not such an important operation for speed. Although it might be best to use lightweight classes (e.g., `tuple`) and implement shuffling without using the heavy `ShuffleProduct_w1w2` parent class. This becomes something like\n\n```python\n    def shuffle(t1, t2):\n        n1 = len(t1)\n        n2 = len(t2)\n        for iv in IntegerVectors(n1, n1 + n2, max_part=1): # can probably even make this iterator smarter\n            it1 = iter(t1)\n            it2 = iter(t2)\n            yield tuple([next(it1) if v else next(it2) for v in iv])\n```\n\n> > - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.\n> \n> \n> I have not yet checked that last suggestion.\n\nYour changes look like they should be faster. Even more so if we can make the indices involve less transient objects and/or checks.",
    "created_at": "2022-09-21T09:31:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558623",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [Frédéric Chapoton](#comment%3A5):
> thanks a lot for the suggestions !

Thank you for all your work on Sage.

> > - There should be a `from_vector` method on the parent. This is useful for the linear algebra methods.
> 
> 
> well, the difficulty is that it only makes sense for homogeneous elements, and the usual "from_vector" methods does not take the degree as input

I see. This breaks the `CFM.from_vector(v.to_vector()) == v` loop though (although that is more for finite dimensional modules). Perhaps we could rename this here to `homogeneous_to_vector()` to make it more future-proof (if we implement a generic infinite dimensional version someday)?

> > - Is there a reason why you are nailing `Indices` in the module level memory? It seems like the `str_to_index` is better as a method of the `F_algebra` and then you could access it by `self._indices` there (or `self.parent()._indices`).
> 
> 
> I would rather keep "str_to_index" as an independant auxiliary function. Why is it problematic to have Indices at the module level ? oh, I guess it will have to be initiated when the module is loaded..

Subsequently it effectively gets nailed in memory. It's fairly lightweight (and only one of them), so its not a problem, but it still is something that gets carried around.

Also, you shouldn't need to set `self._indices = Indices`; that should be done by the `CFM.__init__()`.

> > - Instead of the recursive `basis_f_odd_iterator`, is it faster to use the iterators from `WeightedIntegerVectors` and `Permutations_mset` (which operate on lists)? It is a slightly more involved implementation, but I don't know how important speed is here.
> 
> 
> Not sure how to achieve "words of any length in odd integers at least 3 with sum n" using the existing tools. And speed generally matters in this file, indeed.

If speed matters, then perhaps we should just Cythonize the file. It would allow you to replace the `self.parent()` with `self._parent`, which is faster.

Perhaps iterating over the indices is not such an important operation for speed. Although it might be best to use lightweight classes (e.g., `tuple`) and implement shuffling without using the heavy `ShuffleProduct_w1w2` parent class. This becomes something like

```python
    def shuffle(t1, t2):
        n1 = len(t1)
        n2 = len(t2)
        for iv in IntegerVectors(n1, n1 + n2, max_part=1): # can probably even make this iterator smarter
            it1 = iter(t1)
            it2 = iter(t2)
            yield tuple([next(it1) if v else next(it2) for v in iv])
```

> > - For the `product_on_basis`, it might be faster to do `self.sum()` since it works with the elements directly and has less transient elements.
> 
> 
> I have not yet checked that last suggestion.

Your changes look like they should be faster. Even more so if we can make the indices involve less transient objects and/or checks.



---

archive/issue_comments_558624.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0\"><code>d5ee67d</code></a></td><td><code>using homogeneous_to_vector and homogeneous_from_vector</code></td></tr></table>\n",
    "created_at": "2022-09-21T11:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558624",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0"><code>d5ee67d</code></a></td><td><code>using homogeneous_to_vector and homogeneous_from_vector</code></td></tr></table>




---

archive/issue_comments_558625.json:
```json
{
    "body": "Changed commit from **[`6f11059`](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)** to **[`d5ee67d`](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)**",
    "created_at": "2022-09-21T11:18:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f11059`](https://github.com/sagemath/sagetrac-mirror/commit/6f110595865af941c7b1afeba01ff0f536c1b556)** to **[`d5ee67d`](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)**



---

archive/issue_comments_558626.json:
```json
{
    "body": "Changed commit from **[`d5ee67d`](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)** to **[`5df08cb`](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)**",
    "created_at": "2022-09-21T13:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558626",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5ee67d`](https://github.com/sagemath/sagetrac-mirror/commit/d5ee67d85985f1be9c3807db3622bfa9ac4bc4a0)** to **[`5df08cb`](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)**



---

archive/issue_comments_558627.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d395b55bc21c2ca30cb0a0e9dd1fabd3656255f\"><code>7d395b5</code></a></td><td><code>remove duplicate code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88\"><code>5df08cb</code></a></td><td><code>simplify code a little bit in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-21T13:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558627",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d395b55bc21c2ca30cb0a0e9dd1fabd3656255f"><code>7d395b5</code></a></td><td><code>remove duplicate code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88"><code>5df08cb</code></a></td><td><code>simplify code a little bit in MZV</code></td></tr></table>




---

archive/issue_comments_558628.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da\"><code>4bdced9</code></a></td><td><code>small detail in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558628",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da"><code>4bdced9</code></a></td><td><code>small detail in MZV</code></td></tr></table>




---

archive/issue_comments_558629.json:
```json
{
    "body": "Changed commit from **[`5df08cb`](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)** to **[`4bdced9`](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)**",
    "created_at": "2022-09-22T08:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5df08cb`](https://github.com/sagemath/sagetrac-mirror/commit/5df08cb7dd7bffd732d6143a7d38244c30946e88)** to **[`4bdced9`](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)**



---

archive/issue_comments_558630.json:
```json
{
    "body": "Changed commit from **[`4bdced9`](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)** to **[`7661288`](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)**",
    "created_at": "2022-09-22T12:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558630",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4bdced9`](https://github.com/sagemath/sagetrac-mirror/commit/4bdced9c9f14129d69bd409db0660987d17221da)** to **[`7661288`](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)**



---

archive/issue_comments_558631.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622\"><code>7661288</code></a></td><td><code>a few more details in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T12:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558631",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622"><code>7661288</code></a></td><td><code>a few more details in MZV</code></td></tr></table>




---

archive/issue_comments_558632.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8\"><code>63695d7</code></a></td><td><code>more fine-tuning details in MZV</code></td></tr></table>\n",
    "created_at": "2022-09-22T12:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558632",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8"><code>63695d7</code></a></td><td><code>more fine-tuning details in MZV</code></td></tr></table>




---

archive/issue_comments_558633.json:
```json
{
    "body": "Changed commit from **[`7661288`](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)** to **[`63695d7`](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)**",
    "created_at": "2022-09-22T12:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558633",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7661288`](https://github.com/sagemath/sagetrac-mirror/commit/7661288224be017f92be37698032eb89fccb0622)** to **[`63695d7`](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)**



---

archive/issue_comments_558634.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI guess it is now ready for review again.",
    "created_at": "2022-09-22T18:57:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558634",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

I guess it is now ready for review again.



---

archive/issue_comments_558635.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nmaybe one should simplify (in F_algebra) the double method \"gen\" versus \"custom_gen\" ?",
    "created_at": "2022-09-22T19:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558635",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

maybe one should simplify (in F_algebra) the double method "gen" versus "custom_gen" ?



---

archive/issue_comments_558636.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt does look a bit weird to have both `gen` and `custom_gen`. Is there a reason to have both? Perhaps it could be a little better with a different name than `custom_gen`? I am not sure what a good name might be though.",
    "created_at": "2022-09-23T07:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558636",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

It does look a bit weird to have both `gen` and `custom_gen`. Is there a reason to have both? Perhaps it could be a little better with a different name than `custom_gen`? I am not sure what a good name might be though.



---

archive/issue_comments_558637.json:
```json
{
    "body": "Changed commit from **[`63695d7`](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)** to **[`6b80c50`](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)**",
    "created_at": "2022-09-23T08:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`63695d7`](https://github.com/sagemath/sagetrac-mirror/commit/63695d79d12e7822f0539968fcac1ecb87f398a8)** to **[`6b80c50`](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)**



---

archive/issue_comments_558638.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958\"><code>6b80c50</code></a></td><td><code>get rid of custom_gen, now gen</code></td></tr></table>\n",
    "created_at": "2022-09-23T08:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558638",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958"><code>6b80c50</code></a></td><td><code>get rid of custom_gen, now gen</code></td></tr></table>




---

archive/issue_comments_558639.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSo I have removed the previous method \"gen\" (rather useless and not natural) and renamed \"custom_gen\" to \"gen\".",
    "created_at": "2022-09-23T08:14:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558639",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

So I have removed the previous method "gen" (rather useless and not natural) and renamed "custom_gen" to "gen".



---

archive/issue_comments_558640.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6\"><code>cac2291</code></a></td><td><code>using IntegerRange in MZV itself</code></td></tr></table>\n",
    "created_at": "2022-09-23T10:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6"><code>cac2291</code></a></td><td><code>using IntegerRange in MZV itself</code></td></tr></table>




---

archive/issue_comments_558641.json:
```json
{
    "body": "Changed commit from **[`6b80c50`](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)** to **[`cac2291`](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)**",
    "created_at": "2022-09-23T10:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558641",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6b80c50`](https://github.com/sagemath/sagetrac-mirror/commit/6b80c50d028c46ef48bc2cc9bac53446aa170958)** to **[`cac2291`](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)**



---

archive/issue_comments_558642.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThank you.\n\nDo we want to use `IntegerRange` rather than the more specific `NonNegativeIntegers()`? This would also make it different than `F_algebra` (not that they need to be the same).\n\nI think other than that, I would be happy to set a positive review (unless there are other changes you want to make).",
    "created_at": "2022-09-23T10:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558642",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Thank you.

Do we want to use `IntegerRange` rather than the more specific `NonNegativeIntegers()`? This would also make it different than `F_algebra` (not that they need to be the same).

I think other than that, I would be happy to set a positive review (unless there are other changes you want to make).



---

archive/issue_comments_558643.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWell, I want to exclude 0. No idea what nonnegative means, as always.",
    "created_at": "2022-09-23T11:45:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558643",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

Well, I want to exclude 0. No idea what nonnegative means, as always.



---

archive/issue_comments_558644.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAh, right. Duh. Then how about `PositiveIntegers()`?",
    "created_at": "2022-09-23T11:55:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558644",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:22" align="right">comment:22</div>

Ah, right. Duh. Then how about `PositiveIntegers()`?



---

archive/issue_comments_558645.json:
```json
{
    "body": "Changed commit from **[`cac2291`](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)** to **[`8a8cdf3`](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**",
    "created_at": "2022-09-23T12:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558645",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cac2291`](https://github.com/sagemath/sagetrac-mirror/commit/cac22914d83cc3d4e1b0a69de0c309af0fd552c6)** to **[`8a8cdf3`](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**



---

archive/issue_comments_558646.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f\"><code>8a8cdf3</code></a></td><td><code>using PositiveIntegers</code></td></tr></table>\n",
    "created_at": "2022-09-23T12:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558646",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f"><code>8a8cdf3</code></a></td><td><code>using PositiveIntegers</code></td></tr></table>




---

archive/issue_comments_558647.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIndeed, now using `PositiveIntegers`.\n\nI think I have no further changes to make.",
    "created_at": "2022-09-23T12:26:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558647",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

Indeed, now using `PositiveIntegers`.

I think I have no further changes to make.



---

archive/issue_events_469661.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-23T12:35:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469661"
}
```



---

archive/issue_events_469662.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-09-23T12:35:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469662"
}
```



---

archive/issue_comments_558648.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2022-09-23T12:35:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558648",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_558649.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThanks. LGTM.",
    "created_at": "2022-09-23T12:35:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558649",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

Thanks. LGTM.



---

archive/issue_events_469663.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-09-27T22:27:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469663"
}
```



---

archive/issue_events_469664.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b836c6c85db0604ad196e2fe72468ef4ac84aa44",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-09-27T22:27:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/34562#event-469664"
}
```



---

archive/issue_comments_558650.json:
```json
{
    "body": "Changed branch from **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)** to **[`8a8cdf3`](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**",
    "created_at": "2022-09-27T22:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/34562",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/34562#issuecomment-558650",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/34562](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/34562)** to **[`8a8cdf3`](https://github.com/sagemath/sagetrac-mirror/commit/8a8cdf3fd2ee95dae4c1523b34e561a6cce8639f)**

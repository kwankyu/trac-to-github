# Issue 32054: FractionWithFactoredDenominator.asymptotic_decomposition requires the numerator ring to be SR

archive/issues_031817.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nIn `FractionWithFactoredDenominator.asymptotic_decomposition`, a symbolic variable `asy_var` is introduced and used to build expressions, which is set to `var('r')` by default.\n\nThis is what makes the following snippet fail:\n\n```\nR.<x,y> = QQ[]\nFFPD = FractionWithFactoredDenominatorRing(R)\n\nG = 1\nH = (1 - x)*(1 - y)*(1 - x*y)\nHfac = H.factor()\nG = G/Hfac.unit()\nF = FFPD(G, Hfac)\n\nF.asymptotic_decomposition(alpha=[1, 1])\n```\nwith\n\n```\nTypeError: r is not a variable of Multivariate Polynomial Ring in x, y over Rational Field\n```\n\nThis is particularly unhelpful as the error doesn't occur when creating the element, but only when trying to compute the decomposition.\n\nIdeally, the numerator parent should be extended accordingly automatically.\n\nComponent: **asymptotic expansions**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/32054_\n\n",
    "created_at": "2021-06-24T13:28:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20asymptotic%20expansions",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "FractionWithFactoredDenominator.asymptotic_decomposition requires the numerator ring to be SR",
    "type": "issue",
    "updated_at": "2023-01-29T23:06:23Z",
    "url": "https://github.com/sagemath/sage/issues/32054",
    "user": "https://github.com/behackl"
}
```
<div id="comment:0"></div>

In `FractionWithFactoredDenominator.asymptotic_decomposition`, a symbolic variable `asy_var` is introduced and used to build expressions, which is set to `var('r')` by default.

This is what makes the following snippet fail:

```
R.<x,y> = QQ[]
FFPD = FractionWithFactoredDenominatorRing(R)

G = 1
H = (1 - x)*(1 - y)*(1 - x*y)
Hfac = H.factor()
G = G/Hfac.unit()
F = FFPD(G, Hfac)

F.asymptotic_decomposition(alpha=[1, 1])
```
with

```
TypeError: r is not a variable of Multivariate Polynomial Ring in x, y over Rational Field
```

This is particularly unhelpful as the error doesn't occur when creating the element, but only when trying to compute the decomposition.

Ideally, the numerator parent should be extended accordingly automatically.

Component: **asymptotic expansions**

_Issue created by migration from https://trac.sagemath.org/ticket/32054_





---

archive/issue_events_439738.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2021-06-24T13:28:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439738"
}
```



---

archive/issue_events_439739.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2021-06-24T13:28:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439739"
}
```



---

archive/issue_events_439740.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2021-06-24T13:28:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439740"
}
```



---

archive/issue_events_439741.json:
```json
{
    "actor": "https://github.com/behackl",
    "created_at": "2021-06-24T13:29:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20asymptotic%20expansions",
    "label_color": "0000ff",
    "label_name": "c: asymptotic expansions",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439741"
}
```



---

archive/issue_events_439742.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439742"
}
```



---

archive/issue_events_439743.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439743"
}
```



---

archive/issue_events_439744.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439744"
}
```



---

archive/issue_events_439745.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439745"
}
```



---

archive/issue_events_439746.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439746"
}
```



---

archive/issue_events_439747.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439747"
}
```



---

archive/issue_events_439748.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439748"
}
```



---

archive/issue_events_439749.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439749"
}
```



---

archive/issue_events_439750.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-29T23:06:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/32054",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/32054#event-439750"
}
```

# Issue 24086: Atkin-Lehner normalisation issue

archive/issues_023849.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis ticket is a follow-up to #18061, concerning Atkin--Lehner actions.\n\nFirstly, with that ticket the Atkin--Lehner action is only implemented in a certain subset of cases. It would be nice if we could compute the pseudo-eigenvalues for any newform.\n\nSecondly, there is a normalisation discrepancy: according to the docstring of `sage.modular.modform.element.ModularForm_abstract.atkin_lehner_action`, our conventions are supposed to be that the pseudo-eigenvalues of the Atkin--Lehner operator W_d should have absolute value d<sup>k/2</sup> - 1. However, it doesn't seem that this convention is being enforced very consistently:\n\n```\nsage: f = Newforms(24, 4)[0]\nsage: f\nq + 3*q^3 + 14*q^5 + O(q^6)\nsage: f.atkin_lehner_eigenvalue(8)\n-1\nsage: f.atkin_lehner_eigenvalue(3)\n-3\n```\n\nComponent: **modular forms**\n\nKeywords: **atkin-lehner**\n\nAuthor: **David Loeffler**\n\nBranch/Commit: **[`51266f9`](https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe)**\n\nReviewer: **Aly Deines, Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/24086_\n\n",
    "closed_at": "2018-05-20T22:55:28Z",
    "created_at": "2017-10-22T12:17:59Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Atkin-Lehner normalisation issue",
    "type": "issue",
    "updated_at": "2018-05-20T22:55:28Z",
    "url": "https://github.com/sagemath/sage/issues/24086",
    "user": "https://github.com/loefflerd"
}
```
<div id="comment:0"></div>

This ticket is a follow-up to #18061, concerning Atkin--Lehner actions.

Firstly, with that ticket the Atkin--Lehner action is only implemented in a certain subset of cases. It would be nice if we could compute the pseudo-eigenvalues for any newform.

Secondly, there is a normalisation discrepancy: according to the docstring of `sage.modular.modform.element.ModularForm_abstract.atkin_lehner_action`, our conventions are supposed to be that the pseudo-eigenvalues of the Atkin--Lehner operator W_d should have absolute value d<sup>k/2</sup> - 1. However, it doesn't seem that this convention is being enforced very consistently:

```
sage: f = Newforms(24, 4)[0]
sage: f
q + 3*q^3 + 14*q^5 + O(q^6)
sage: f.atkin_lehner_eigenvalue(8)
-1
sage: f.atkin_lehner_eigenvalue(3)
-3
```

Component: **modular forms**

Keywords: **atkin-lehner**

Author: **David Loeffler**

Branch/Commit: **[`51266f9`](https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe)**

Reviewer: **Aly Deines, Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/24086_





---

archive/issue_events_331647.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-22T12:17:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331647"
}
```



---

archive/issue_events_331648.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-22T12:17:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "c: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331648"
}
```



---

archive/issue_events_331649.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-22T12:17:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331649"
}
```



---

archive/issue_events_331650.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-22T12:17:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331650"
}
```



---

archive/issue_comments_364089.json:
```json
{
    "body": "Branch: **[u/davidloeffler/atkin_lehner_normalisation_issue](https://github.com/sagemath/sagetrac-mirror/tree/u/davidloeffler/atkin_lehner_normalisation_issue)**",
    "created_at": "2017-10-23T14:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364089",
    "user": "https://github.com/loefflerd"
}
```

Branch: **[u/davidloeffler/atkin_lehner_normalisation_issue](https://github.com/sagemath/sagetrac-mirror/tree/u/davidloeffler/atkin_lehner_normalisation_issue)**



---

archive/issue_comments_364090.json:
```json
{
    "body": "Commit: **[`955cb06`](https://github.com/sagemath/sagetrac-mirror/commit/955cb0651e9c0dfa9d9af60445fdb513aacf3ec8)**",
    "created_at": "2017-10-23T14:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364090",
    "user": "https://github.com/loefflerd"
}
```

Commit: **[`955cb06`](https://github.com/sagemath/sagetrac-mirror/commit/955cb0651e9c0dfa9d9af60445fdb513aacf3ec8)**



---

archive/issue_comments_364091.json:
```json
{
    "body": "Author: **David Loeffler**",
    "created_at": "2017-10-23T14:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364091",
    "user": "https://github.com/loefflerd"
}
```

Author: **David Loeffler**



---

archive/issue_events_331651.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-23T14:33:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331651"
}
```



---

archive/issue_comments_364092.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nHere's a patch. As well as fixing the normalisation issue, I've readjusted our conventions to be more consistent with the standard reference (Atkin--Li 1978) -- the previous version was out by a root of unity in some cases -- and added some more examples and doctests.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/955cb0651e9c0dfa9d9af60445fdb513aacf3ec8\"><code>955cb06</code></a></td><td><code>Trac 24086: fixed normalisations for Atkin-Lehner on modular symbols and added doctests</code></td></tr></table>\n",
    "created_at": "2017-10-23T14:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364092",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:2" align="right">comment:2</div>

Here's a patch. As well as fixing the normalisation issue, I've readjusted our conventions to be more consistent with the standard reference (Atkin--Li 1978) -- the previous version was out by a root of unity in some cases -- and added some more examples and doctests.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/955cb0651e9c0dfa9d9af60445fdb513aacf3ec8"><code>955cb06</code></a></td><td><code>Trac 24086: fixed normalisations for Atkin-Lehner on modular symbols and added doctests</code></td></tr></table>




---

archive/issue_comments_364093.json:
```json
{
    "body": "Reviewer: **Aly Deines**",
    "created_at": "2017-10-23T20:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364093",
    "user": "https://github.com/adeines"
}
```

Reviewer: **Aly Deines**



---

archive/issue_events_331652.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2017-10-23T20:45:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331652"
}
```



---

archive/issue_events_331653.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2017-10-23T20:45:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331653"
}
```



---

archive/issue_comments_364094.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis is a small thing, in src/sage/modular/modsym/ambient.py in documentation for the method _compute_atkin_lehner_matrix, there should be an example where the sign isn't 0 so that it hits the ValueError.\n\nThe rest looks good so far.",
    "created_at": "2017-10-23T20:45:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364094",
    "user": "https://github.com/adeines"
}
```

<div id="comment:3" align="right">comment:3</div>

This is a small thing, in src/sage/modular/modsym/ambient.py in documentation for the method _compute_atkin_lehner_matrix, there should be an example where the sign isn't 0 so that it hits the ValueError.

The rest looks good so far.



---

archive/issue_comments_364095.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e43ef83783690d17036de36e5fee4a350743e97e\"><code>e43ef83</code></a></td><td><code>Trac 24086: added doctests</code></td></tr></table>\n",
    "created_at": "2017-10-24T08:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364095",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e43ef83783690d17036de36e5fee4a350743e97e"><code>e43ef83</code></a></td><td><code>Trac 24086: added doctests</code></td></tr></table>




---

archive/issue_comments_364096.json:
```json
{
    "body": "Changed commit from **[`955cb06`](https://github.com/sagemath/sagetrac-mirror/commit/955cb0651e9c0dfa9d9af60445fdb513aacf3ec8)** to **[`e43ef83`](https://github.com/sagemath/sagetrac-mirror/commit/e43ef83783690d17036de36e5fee4a350743e97e)**",
    "created_at": "2017-10-24T08:28:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364096",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`955cb06`](https://github.com/sagemath/sagetrac-mirror/commit/955cb0651e9c0dfa9d9af60445fdb513aacf3ec8)** to **[`e43ef83`](https://github.com/sagemath/sagetrac-mirror/commit/e43ef83783690d17036de36e5fee4a350743e97e)**



---

archive/issue_events_331654.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-24T08:29:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331654"
}
```



---

archive/issue_events_331655.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-24T08:29:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331655"
}
```



---

archive/issue_comments_364097.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nGood point. I've added a doctest for this case (and another one for a GammaH level, since there weren't any of these before).",
    "created_at": "2017-10-24T08:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364097",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:5" align="right">comment:5</div>

Good point. I've added a doctest for this case (and another one for a GammaH level, since there weren't any of these before).



---

archive/issue_comments_364098.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ce990cb3c536cb6990ea8c025ab53602867c101\"><code>8ce990c</code></a></td><td><code>Fixed ReST formatting</code></td></tr></table>\n",
    "created_at": "2017-10-24T09:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364098",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ce990cb3c536cb6990ea8c025ab53602867c101"><code>8ce990c</code></a></td><td><code>Fixed ReST formatting</code></td></tr></table>




---

archive/issue_comments_364099.json:
```json
{
    "body": "Changed commit from **[`e43ef83`](https://github.com/sagemath/sagetrac-mirror/commit/e43ef83783690d17036de36e5fee4a350743e97e)** to **[`8ce990c`](https://github.com/sagemath/sagetrac-mirror/commit/8ce990cb3c536cb6990ea8c025ab53602867c101)**",
    "created_at": "2017-10-24T09:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364099",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e43ef83`](https://github.com/sagemath/sagetrac-mirror/commit/e43ef83783690d17036de36e5fee4a350743e97e)** to **[`8ce990c`](https://github.com/sagemath/sagetrac-mirror/commit/8ce990cb3c536cb6990ea8c025ab53602867c101)**



---

archive/issue_comments_364100.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe last commit is just a tiny ReST formatting fix (to correct an error picked up by the patchbot)",
    "created_at": "2017-10-24T09:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364100",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:7" align="right">comment:7</div>

The last commit is just a tiny ReST formatting fix (to correct an error picked up by the patchbot)



---

archive/issue_comments_364101.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHold it, there's a doctest failing.",
    "created_at": "2017-10-24T09:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364101",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:8" align="right">comment:8</div>

Hold it, there's a doctest failing.



---

archive/issue_events_331656.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-24T09:55:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331656"
}
```



---

archive/issue_events_331657.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-24T09:55:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331657"
}
```



---

archive/issue_comments_364102.json:
```json
{
    "body": "Changed commit from **[`8ce990c`](https://github.com/sagemath/sagetrac-mirror/commit/8ce990cb3c536cb6990ea8c025ab53602867c101)** to **[`ea1b4e6`](https://github.com/sagemath/sagetrac-mirror/commit/ea1b4e6d1b367ebb5831d1f9cdd217cc7f65ab20)**",
    "created_at": "2017-10-24T15:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364102",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ce990c`](https://github.com/sagemath/sagetrac-mirror/commit/8ce990cb3c536cb6990ea8c025ab53602867c101)** to **[`ea1b4e6`](https://github.com/sagemath/sagetrac-mirror/commit/ea1b4e6d1b367ebb5831d1f9cdd217cc7f65ab20)**



---

archive/issue_comments_364103.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea1b4e6d1b367ebb5831d1f9cdd217cc7f65ab20\"><code>ea1b4e6</code></a></td><td><code>Fixed a broken doctest from trac 18061.</code></td></tr></table>\n",
    "created_at": "2017-10-24T15:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364103",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea1b4e6d1b367ebb5831d1f9cdd217cc7f65ab20"><code>ea1b4e6</code></a></td><td><code>Fixed a broken doctest from trac 18061.</code></td></tr></table>




---

archive/issue_events_331658.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-24T15:09:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331658"
}
```



---

archive/issue_events_331659.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2017-10-24T15:09:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331659"
}
```



---

archive/issue_comments_364104.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThat was embarrassing: I broke the test case from #18061 (which I reported initially -- oops!). This was an issue with determining when the AL eigenvalue exists in `atkin_lehner_eigenvalue` -- we need to determine when it doesn't exist, and raise an error in that case, without needing to fix the choices of embedding needed for more general pseudo-eigenvalues. (I also adjusted the test case to make it run quicker, and removed the ` #\u00a0long time` flag.)\n\nI've also moved `atkin_lehner_action` out of the abstract modular form element class into the Newform class; eigenvalues make sense for any form, but pseudo-eigenvalues only for newforms.",
    "created_at": "2017-10-24T15:09:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364104",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:10" align="right">comment:10</div>

That was embarrassing: I broke the test case from #18061 (which I reported initially -- oops!). This was an issue with determining when the AL eigenvalue exists in `atkin_lehner_eigenvalue` -- we need to determine when it doesn't exist, and raise an error in that case, without needing to fix the choices of embedding needed for more general pseudo-eigenvalues. (I also adjusted the test case to make it run quicker, and removed the ` # long time` flag.)

I've also moved `atkin_lehner_action` out of the abstract modular form element class into the Newform class; eigenvalues make sense for any form, but pseudo-eigenvalues only for newforms.



---

archive/issue_comments_364105.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8ef6a387af622ec5e9f028aaa5c9318690f5ae8\"><code>d8ef6a3</code></a></td><td><code>Keep patchbot blocks check happy!</code></td></tr></table>\n",
    "created_at": "2017-10-24T20:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364105",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8ef6a387af622ec5e9f028aaa5c9318690f5ae8"><code>d8ef6a3</code></a></td><td><code>Keep patchbot blocks check happy!</code></td></tr></table>




---

archive/issue_comments_364106.json:
```json
{
    "body": "Changed commit from **[`ea1b4e6`](https://github.com/sagemath/sagetrac-mirror/commit/ea1b4e6d1b367ebb5831d1f9cdd217cc7f65ab20)** to **[`d8ef6a3`](https://github.com/sagemath/sagetrac-mirror/commit/d8ef6a387af622ec5e9f028aaa5c9318690f5ae8)**",
    "created_at": "2017-10-24T20:40:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364106",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea1b4e6`](https://github.com/sagemath/sagetrac-mirror/commit/ea1b4e6d1b367ebb5831d1f9cdd217cc7f65ab20)** to **[`d8ef6a3`](https://github.com/sagemath/sagetrac-mirror/commit/d8ef6a387af622ec5e9f028aaa5c9318690f5ae8)**



---

archive/issue_comments_364107.json:
```json
{
    "body": "Changed branch from **[u/davidloeffler/atkin_lehner_normalisation_issue](https://github.com/sagemath/sagetrac-mirror/tree/u/davidloeffler/atkin_lehner_normalisation_issue)** to **[public/24086_better](https://github.com/sagemath/sagetrac-mirror/tree/public/24086_better)**",
    "created_at": "2018-05-01T11:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364107",
    "user": "https://github.com/loefflerd"
}
```

Changed branch from **[u/davidloeffler/atkin_lehner_normalisation_issue](https://github.com/sagemath/sagetrac-mirror/tree/u/davidloeffler/atkin_lehner_normalisation_issue)** to **[public/24086_better](https://github.com/sagemath/sagetrac-mirror/tree/public/24086_better)**



---

archive/issue_comments_364108.json:
```json
{
    "body": "Changed commit from **[`d8ef6a3`](https://github.com/sagemath/sagetrac-mirror/commit/d8ef6a387af622ec5e9f028aaa5c9318690f5ae8)** to **[`2a58074`](https://github.com/sagemath/sagetrac-mirror/commit/2a58074c34bec782925f46c2e0d476e017fcf535)**",
    "created_at": "2018-05-01T11:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364108",
    "user": "https://github.com/loefflerd"
}
```

Changed commit from **[`d8ef6a3`](https://github.com/sagemath/sagetrac-mirror/commit/d8ef6a387af622ec5e9f028aaa5c9318690f5ae8)** to **[`2a58074`](https://github.com/sagemath/sagetrac-mirror/commit/2a58074c34bec782925f46c2e0d476e017fcf535)**



---

archive/issue_comments_364109.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'm uploading a new, completely rewritten branch, which sorts out the normalisations so they're consistent with Atkin-Li, and also covers all the previously non-implemented cases using a trick based on twisting maps for modular symbols.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a58074c34bec782925f46c2e0d476e017fcf535\"><code>2a58074</code></a></td><td><code>Trac 24086: Atkin--Lehner operators - now works for any character, + normalisations fixed</code></td></tr></table>\n",
    "created_at": "2018-05-01T11:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364109",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:13" align="right">comment:13</div>

I'm uploading a new, completely rewritten branch, which sorts out the normalisations so they're consistent with Atkin-Li, and also covers all the previously non-implemented cases using a trick based on twisting maps for modular symbols.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a58074c34bec782925f46c2e0d476e017fcf535"><code>2a58074</code></a></td><td><code>Trac 24086: Atkin--Lehner operators - now works for any character, + normalisations fixed</code></td></tr></table>




---

archive/issue_comments_364110.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n This ticket is a follow-up to #18061, concerning Atkin--Lehner actions.\n \n-According to the docstring of `sage.modular.modform.element.ModularForm_abstract.atkin_lehner_action`, our conventions are supposed to be that the pseudo-eigenvalues of the Atkin--Lehner operator W_d should have absolute value d<sup>k/2</sup> - 1. However, it doesn't seem that this convention is being enforced very consistently:\n+Firstly, with that ticket the Atkin--Lehner action is only implemented in a certain subset of cases. It would be nice if we could compute the pseudo-eigenvalues for any newform.\n+\n+Secondly, there is a normalisation discrepancy: according to the docstring of `sage.modular.modform.element.ModularForm_abstract.atkin_lehner_action`, our conventions are supposed to be that the pseudo-eigenvalues of the Atkin--Lehner operator W_d should have absolute value d<sup>k/2</sup> - 1. However, it doesn't seem that this convention is being enforced very consistently:\n \n ```\n sage: f = Newforms(24, 4)[0]\n@@ -11,12 +13,3 @@\n sage: f.atkin_lehner_eigenvalue(3)\n -3\n ```\n-\n-The problem seems to be this:\n-\n-```\n-sage: f._atkin_lehner_action_from_qexp(3)\n-(-3, q + 3*q^3 + 14*q^5 + O(q^6))\n-sage: f._atkin_lehner_action_from_modsym(3)\n-(-1, q + 3*q^3 + 14*q^5 + O(q^6))\n-```\n``````\n",
    "created_at": "2018-05-01T11:25:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364110",
    "user": "https://github.com/loefflerd"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 This ticket is a follow-up to #18061, concerning Atkin--Lehner actions.
 
-According to the docstring of `sage.modular.modform.element.ModularForm_abstract.atkin_lehner_action`, our conventions are supposed to be that the pseudo-eigenvalues of the Atkin--Lehner operator W_d should have absolute value d<sup>k/2</sup> - 1. However, it doesn't seem that this convention is being enforced very consistently:
+Firstly, with that ticket the Atkin--Lehner action is only implemented in a certain subset of cases. It would be nice if we could compute the pseudo-eigenvalues for any newform.
+
+Secondly, there is a normalisation discrepancy: according to the docstring of `sage.modular.modform.element.ModularForm_abstract.atkin_lehner_action`, our conventions are supposed to be that the pseudo-eigenvalues of the Atkin--Lehner operator W_d should have absolute value d<sup>k/2</sup> - 1. However, it doesn't seem that this convention is being enforced very consistently:
 
 ```
 sage: f = Newforms(24, 4)[0]
@@ -11,12 +13,3 @@
 sage: f.atkin_lehner_eigenvalue(3)
 -3
 ```
-
-The problem seems to be this:
-
-```
-sage: f._atkin_lehner_action_from_qexp(3)
-(-3, q + 3*q^3 + 14*q^5 + O(q^6))
-sage: f._atkin_lehner_action_from_modsym(3)
-(-1, q + 3*q^3 + 14*q^5 + O(q^6))
-```
``````




---

archive/issue_events_331660.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-05T07:20:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331660"
}
```



---

archive/issue_events_331661.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-05T07:20:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331661"
}
```



---

archive/issue_events_331662.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-05T07:20:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331662"
}
```



---

archive/issue_events_331663.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-05T07:20:46Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331663"
}
```



---

archive/issue_comments_364111.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n2 failing doctests in \n\n```\nsage -t --long src/sage/modular/abvar/lseries.py \n```\nbecause of precision issues in L functions",
    "created_at": "2018-05-05T07:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364111",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

2 failing doctests in 

```
sage -t --long src/sage/modular/abvar/lseries.py 
```
because of precision issues in L functions



---

archive/issue_comments_364112.json:
```json
{
    "body": "Changed commit from **[`2a58074`](https://github.com/sagemath/sagetrac-mirror/commit/2a58074c34bec782925f46c2e0d476e017fcf535)** to **[`76e7262`](https://github.com/sagemath/sagetrac-mirror/commit/76e72625179f18e9d0f95a8c05b37c84cc8b5118)**",
    "created_at": "2018-05-07T17:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364112",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a58074`](https://github.com/sagemath/sagetrac-mirror/commit/2a58074c34bec782925f46c2e0d476e017fcf535)** to **[`76e7262`](https://github.com/sagemath/sagetrac-mirror/commit/76e72625179f18e9d0f95a8c05b37c84cc8b5118)**



---

archive/issue_comments_364113.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76e72625179f18e9d0f95a8c05b37c84cc8b5118\"><code>76e7262</code></a></td><td><code>Fix failing doctest in abvar/lseries.py</code></td></tr></table>\n",
    "created_at": "2018-05-07T17:53:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364113",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76e72625179f18e9d0f95a8c05b37c84cc8b5118"><code>76e7262</code></a></td><td><code>Fix failing doctest in abvar/lseries.py</code></td></tr></table>




---

archive/issue_comments_364114.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis is just harmless fuzz. The discrepancies are all in the last one or two decimal digits, and in the first example, the output from the new code was actually closer to the correct answer than the old one was. I've changed the doctest to be more noise-tolerant.",
    "created_at": "2018-05-07T17:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364114",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:16" align="right">comment:16</div>

This is just harmless fuzz. The discrepancies are all in the last one or two decimal digits, and in the first example, the output from the new code was actually closer to the correct answer than the old one was. I've changed the doctest to be more noise-tolerant.



---

archive/issue_events_331664.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2018-05-07T17:57:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331664"
}
```



---

archive/issue_events_331665.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2018-05-07T17:57:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331665"
}
```



---

archive/issue_events_331666.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-17T06:41:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331666"
}
```



---

archive/issue_events_331667.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-17T06:41:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331667"
}
```



---

archive/issue_comments_364115.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nok, let it be. I cannot vouch for the math, but I will take your word for it.",
    "created_at": "2018-05-17T06:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364115",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:18" align="right">comment:18</div>

ok, let it be. I cannot vouch for the math, but I will take your word for it.



---

archive/issue_comments_364116.json:
```json
{
    "body": "Changed reviewer from **Aly Deines** to **Aly Deines, Fr\u00e9d\u00e9ric chapoton**",
    "created_at": "2018-05-17T06:41:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364116",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Aly Deines** to **Aly Deines, Frédéric chapoton**



---

archive/issue_comments_364117.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nMerge conflict\n\nAlso, Frederic's last name shoud probably be capitalized...",
    "created_at": "2018-05-17T18:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364117",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:19" align="right">comment:19</div>

Merge conflict

Also, Frederic's last name shoud probably be capitalized...



---

archive/issue_events_331668.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-17T18:38:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331668"
}
```



---

archive/issue_events_331669.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-17T18:38:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331669"
}
```



---

archive/issue_comments_364118.json:
```json
{
    "body": "Changed reviewer from **Aly Deines, Fr\u00e9d\u00e9ric chapoton** to **Aly Deines, Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2018-05-17T18:39:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364118",
    "user": "https://github.com/fchapoton"
}
```

Changed reviewer from **Aly Deines, Frédéric chapoton** to **Aly Deines, Frédéric Chapoton**



---

archive/issue_comments_364119.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nok, will wait for the next beta.",
    "created_at": "2018-05-17T18:39:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364119",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

ok, will wait for the next beta.



---

archive/issue_comments_364120.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe conflict is from #23510 apparently.",
    "created_at": "2018-05-17T20:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364120",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:21" align="right">comment:21</div>

The conflict is from #23510 apparently.



---

archive/issue_comments_364121.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6756c1e25146d9c0791b63d0140cd12d7ada3e19\"><code>6756c1e</code></a></td><td><code>Merge branch 'public/24086_better' in 8.3.b2</code></td></tr></table>\n",
    "created_at": "2018-05-19T06:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364121",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6756c1e25146d9c0791b63d0140cd12d7ada3e19"><code>6756c1e</code></a></td><td><code>Merge branch 'public/24086_better' in 8.3.b2</code></td></tr></table>




---

archive/issue_comments_364122.json:
```json
{
    "body": "Changed commit from **[`76e7262`](https://github.com/sagemath/sagetrac-mirror/commit/76e72625179f18e9d0f95a8c05b37c84cc8b5118)** to **[`6756c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6756c1e25146d9c0791b63d0140cd12d7ada3e19)**",
    "created_at": "2018-05-19T06:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364122",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`76e7262`](https://github.com/sagemath/sagetrac-mirror/commit/76e72625179f18e9d0f95a8c05b37c84cc8b5118)** to **[`6756c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6756c1e25146d9c0791b63d0140cd12d7ada3e19)**



---

archive/issue_comments_364123.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nmerged, and set back to positive",
    "created_at": "2018-05-19T06:54:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364123",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

merged, and set back to positive



---

archive/issue_events_331670.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-19T06:54:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331670"
}
```



---

archive/issue_events_331671.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-05-19T06:54:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331671"
}
```



---

archive/issue_events_331672.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-05-19T09:25:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331672"
}
```



---

archive/issue_events_331673.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2018-05-19T09:25:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331673"
}
```



---

archive/issue_comments_364124.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe\"><code>51266f9</code></a></td><td><code>Trac 24086: stamp out some fuzz accidentally re-introduced by auto-merge</code></td></tr></table>\n",
    "created_at": "2018-05-19T09:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364124",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe"><code>51266f9</code></a></td><td><code>Trac 24086: stamp out some fuzz accidentally re-introduced by auto-merge</code></td></tr></table>




---

archive/issue_comments_364125.json:
```json
{
    "body": "Changed commit from **[`6756c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6756c1e25146d9c0791b63d0140cd12d7ada3e19)** to **[`51266f9`](https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe)**",
    "created_at": "2018-05-19T09:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364125",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6756c1e`](https://github.com/sagemath/sagetrac-mirror/commit/6756c1e25146d9c0791b63d0140cd12d7ada3e19)** to **[`51266f9`](https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe)**



---

archive/issue_events_331674.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2018-05-19T09:29:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331674"
}
```



---

archive/issue_events_331675.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2018-05-19T09:29:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331675"
}
```



---

archive/issue_comments_364126.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThe auto-merge algorithm isn't quite clever enough to avoid re-introducing some of the unneeded imports which were removed by #23510. I've pushed a tiny patch to get rid of them again. These changes were already reviewed as part of #23510 so I am setting this back to positive review.",
    "created_at": "2018-05-19T09:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364126",
    "user": "https://github.com/loefflerd"
}
```

<div id="comment:25" align="right">comment:25</div>

The auto-merge algorithm isn't quite clever enough to avoid re-introducing some of the unneeded imports which were removed by #23510. I've pushed a tiny patch to get rid of them again. These changes were already reviewed as part of #23510 so I am setting this back to positive review.



---

archive/issue_comments_364127.json:
```json
{
    "body": "Changed branch from **[public/24086_better](https://github.com/sagemath/sagetrac-mirror/tree/public/24086_better)** to **[`51266f9`](https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe)**",
    "created_at": "2018-05-20T22:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/24086#issuecomment-364127",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/24086_better](https://github.com/sagemath/sagetrac-mirror/tree/public/24086_better)** to **[`51266f9`](https://github.com/sagemath/sagetrac-mirror/commit/51266f9edad6cb7979cfe4023f1e86f012aa7fbe)**



---

archive/issue_events_331676.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-05-20T22:55:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331676"
}
```



---

archive/issue_events_331677.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fb52758ba6fe3a6b73ade39e8474798e5dfb2cba",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-05-20T22:55:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/24086",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/24086#event-331677"
}
```

# Issue 21232: Fractional part function {x}

archive/issues_020995.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis symbolic function will also be needed by the periodic piecewise function enhancement (#21215). It is in Sympy too.\n\nhttps://en.wikipedia.org/wiki/Fractional_part\n\nComponent: **symbolics**\n\nAuthor: **Ralf Stephan**\n\nBranch/Commit: **[`141a784`](https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21232_\n\n",
    "closed_at": "2016-08-19T22:44:57Z",
    "created_at": "2016-08-12T12:47:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fractional part function {x}",
    "type": "issue",
    "updated_at": "2016-08-19T22:44:57Z",
    "url": "https://github.com/sagemath/sage/issues/21232",
    "user": "https://github.com/rwst"
}
```
<div id="comment:0"></div>

This symbolic function will also be needed by the periodic piecewise function enhancement (#21215). It is in Sympy too.

https://en.wikipedia.org/wiki/Fractional_part

Component: **symbolics**

Author: **Ralf Stephan**

Branch/Commit: **[`141a784`](https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/21232_





---

archive/issue_events_296028.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-12T12:47:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296028"
}
```



---

archive/issue_events_296029.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-12T12:47:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296029"
}
```



---

archive/issue_events_296030.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-12T12:47:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296030"
}
```



---

archive/issue_events_296031.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-12T12:47:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296031"
}
```



---

archive/issue_comments_310223.json:
```json
{
    "body": "Branch: **[u/rws/fractional_part_function__x_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/fractional_part_function__x_)**",
    "created_at": "2016-08-13T15:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310223",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/fractional_part_function__x_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/fractional_part_function__x_)**



---

archive/issue_comments_310224.json:
```json
{
    "body": "Commit: **[`3fcaf85`](https://github.com/sagemath/sagetrac-mirror/commit/3fcaf85fe46b32f7408f07cd4484761666463aa6)**",
    "created_at": "2016-08-13T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310224",
    "user": "https://github.com/rwst"
}
```

Commit: **[`3fcaf85`](https://github.com/sagemath/sagetrac-mirror/commit/3fcaf85fe46b32f7408f07cd4484761666463aa6)**



---

archive/issue_comments_310225.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fcaf85fe46b32f7408f07cd4484761666463aa6\"><code>3fcaf85</code></a></td><td><code>21232: Fractional part function {x}</code></td></tr></table>\n",
    "created_at": "2016-08-13T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310225",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fcaf85fe46b32f7408f07cd4484761666463aa6"><code>3fcaf85</code></a></td><td><code>21232: Fractional part function {x}</code></td></tr></table>




---

archive/issue_comments_310226.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2016-08-13T15:08:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310226",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_events_296032.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-13T15:08:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296032"
}
```



---

archive/issue_comments_310227.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n\n```\n+            if isinstance(x, (int, long)):\n+                return x - Integer(x)\n```\nProbably can just return Integer(0)\n\n```\n+    def _print_latex_(self, x):\n+        r\"\"\"\n+        EXAMPLES::\n+\n+            sage: latex(frac(x))\n+            \\left\\{ x \\right\\}\n+        \"\"\"\n+        return r\"\\left\\{ %s \\right\\}\"%latex(x)\n```\nI use this braces notation myself, but I can imagine that it's not universally used, and some people may prefer `\\mathop{\\mathrm{frac}}(x)`.  Perhaps a global option?",
    "created_at": "2016-08-13T19:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310227",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>


```
+            if isinstance(x, (int, long)):
+                return x - Integer(x)
```
Probably can just return Integer(0)

```
+    def _print_latex_(self, x):
+        r"""
+        EXAMPLES::
+
+            sage: latex(frac(x))
+            \left\{ x \right\}
+        """
+        return r"\left\{ %s \right\}"%latex(x)
```
I use this braces notation myself, but I can imagine that it's not universally used, and some people may prefer `\mathop{\mathrm{frac}}(x)`.  Perhaps a global option?



---

archive/issue_comments_310228.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2016-08-13T19:35:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310228",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_310229.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n\n```\n+            elif isinstance(x, (float, complex)):\n+                return x - Integer(int(math.floor(x)))\n```\nAlso, going through int seems dangerous here",
    "created_at": "2016-08-13T19:37:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310229",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>


```
+            elif isinstance(x, (float, complex)):
+                return x - Integer(int(math.floor(x)))
```
Also, going through int seems dangerous here



---

archive/issue_events_296033.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-13T19:41:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296033"
}
```



---

archive/issue_events_296034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-13T19:41:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296034"
}
```



---

archive/issue_comments_310230.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@mkoeppe](#comment%3A5):\n> \n> ```\n> +            elif isinstance(x, (float, complex)):\n> +                return x - Integer(int(math.floor(x)))\n> ```\n> Also, going through int seems dangerous here\n\nI retract this comment. I didn't realize `int()` makes Python bignums.",
    "created_at": "2016-08-13T19:56:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310230",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@mkoeppe](#comment%3A5):
> 
> ```
> +            elif isinstance(x, (float, complex)):
> +                return x - Integer(int(math.floor(x)))
> ```
> Also, going through int seems dangerous here

I retract this comment. I didn't realize `int()` makes Python bignums.



---

archive/issue_comments_310231.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31\"><code>141a784</code></a></td><td><code>21232: change LaTeX, return shortcut</code></td></tr></table>\n",
    "created_at": "2016-08-17T06:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310231",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31"><code>141a784</code></a></td><td><code>21232: change LaTeX, return shortcut</code></td></tr></table>




---

archive/issue_comments_310232.json:
```json
{
    "body": "Changed commit from **[`3fcaf85`](https://github.com/sagemath/sagetrac-mirror/commit/3fcaf85fe46b32f7408f07cd4484761666463aa6)** to **[`141a784`](https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31)**",
    "created_at": "2016-08-17T06:27:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310232",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3fcaf85`](https://github.com/sagemath/sagetrac-mirror/commit/3fcaf85fe46b32f7408f07cd4484761666463aa6)** to **[`141a784`](https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31)**



---

archive/issue_events_296035.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-17T06:27:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296035"
}
```



---

archive/issue_events_296036.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-08-17T06:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296036"
}
```



---

archive/issue_events_296037.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-17T18:54:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296037"
}
```



---

archive/issue_events_296038.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-17T18:54:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296038"
}
```



---

archive/issue_comments_310233.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nLooks good to me.\n\nFor full symbolic functionality (which I never use), I guess one would need to tie this in with the simplification and assumptions machinery, so that things like this behave better:\n\n```\nsage: simplify(frac(frac(x)))\nfrac(frac(x))\nsage: simplify(frac(floor(x)))\nfrac(floor(x))\nsage: assume(x, 'integer')\nsage: simplify(frac(x))\nfrac(x)\n```\nPerhaps on a follow-up ticket?",
    "created_at": "2016-08-17T18:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310233",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Looks good to me.

For full symbolic functionality (which I never use), I guess one would need to tie this in with the simplification and assumptions machinery, so that things like this behave better:

```
sage: simplify(frac(frac(x)))
frac(frac(x))
sage: simplify(frac(floor(x)))
frac(floor(x))
sage: assume(x, 'integer')
sage: simplify(frac(x))
frac(x)
```
Perhaps on a follow-up ticket?



---

archive/issue_comments_310234.json:
```json
{
    "body": "Changed branch from **[u/rws/fractional_part_function__x_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/fractional_part_function__x_)** to **[`141a784`](https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31)**",
    "created_at": "2016-08-19T22:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21232#issuecomment-310234",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/fractional_part_function__x_](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/fractional_part_function__x_)** to **[`141a784`](https://github.com/sagemath/sagetrac-mirror/commit/141a784aac9d083327f9e8907583ac7a99cc5a31)**



---

archive/issue_events_296039.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-19T22:44:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296039"
}
```



---

archive/issue_events_296040.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "738df3903a4632a81a0e2d90da291e9e3afa855b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-19T22:44:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21232",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21232#event-296040"
}
```

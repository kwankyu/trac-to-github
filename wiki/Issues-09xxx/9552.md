# Issue 9552: cython.py references the old sage notebook code

archive/issues_009552.json:
```json
{
    "body": " I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):\n\n```\n import sage.server.support\n    d = {}\n    sage.server.support.cython_import_all(tmpfile, d,\n                                         verbose=verbose, compile_message=compile_message,\n                                         use_cache=use_cache,\n                                         create_local_c_file=False)\n```\n\n**Assignee:** @jasongrout\n\n**CC:**  @kiwifb\n\n**Branch/Commit:** [1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/9552\n\n",
    "closed_at": "2015-05-30T22:48:30Z",
    "created_at": "2010-07-19T19:59:21Z",
    "labels": [
        "component: misc",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.8",
    "title": "cython.py references the old sage notebook code",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/9552",
    "user": "https://github.com/williamstein"
}
```
 I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):

```
 import sage.server.support
    d = {}
    sage.server.support.cython_import_all(tmpfile, d,
                                         verbose=verbose, compile_message=compile_message,
                                         use_cache=use_cache,
                                         create_local_c_file=False)
```

**Assignee:** @jasongrout

**CC:**  @kiwifb

**Branch/Commit:** [1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)

**Reviewer:** Fran√ßois Bissey

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/9552





---

archive/issue_events_070931.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70931"
}
```



---

archive/issue_events_070932.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70932"
}
```



---

archive/issue_events_070933.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70933"
}
```



---

archive/issue_events_070934.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70934"
}
```



---

archive/issue_events_070935.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70935"
}
```



---

archive/issue_events_070936.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70936"
}
```



---

archive/issue_events_070937.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70937"
}
```



---

archive/issue_events_070938.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70938"
}
```



---

archive/issue_events_070939.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2014-08-15T05:41:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "rename": {
        "from": "cython.pyx references the old sage notebook code",
        "to": "cython.py references the old sage notebook code"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70939"
}
```



---

archive/issue_comments_084731.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n- I noticed to my surprise that misc/cython.pyx has these lines in it (which should be fixed, of course):\n+ I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):\n \n ```\n  import sage.server.support\n``````\n",
    "created_at": "2014-08-15T05:41:39Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84731",
    "user": "https://github.com/kcrisman"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
- I noticed to my surprise that misc/cython.pyx has these lines in it (which should be fixed, of course):
+ I noticed to my surprise that misc/cython.py has these lines in it (which should be fixed, of course):
 
 ```
  import sage.server.support
``````




---

archive/issue_comments_084732.json:
```json
{
    "body": "<a id='comment:5'></a>\nYeah, I think a lot of that stuff could go elsewhere, it's just support...\n\nIn this case the \"right\" fix is to move the whole Cython stuff somewhere else, probably just to cython.py (which is not a pyx file, at least not any more).",
    "created_at": "2014-08-15T05:41:39Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84732",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:5'></a>
Yeah, I think a lot of that stuff could go elsewhere, it's just support...

In this case the "right" fix is to move the whole Cython stuff somewhere else, probably just to cython.py (which is not a pyx file, at least not any more).



---

archive/issue_comments_084733.json:
```json
{
    "body": "<a id='comment:6'></a>\nIndeed, this wouldn't be hard to do.  Worst-case we could move them but leave a deprecation that points to the new location (cython.py seems best).\n\n```\nsage: search_src('cython_import')\nmisc/cython.py:657:    sage.server.support.cython_import_all(tmpfile, d,\nmisc/cython.py:756:    from sage.server.support import cython_import\nmisc/cython.py:757:    return cython_import(file, create_local_c_file=False)\nmisc/cython_c.pyx:61:    sage.server.support.cython_import_all(tmpfile, globals(),\nserver/support.py:425:def cython_import(filename, verbose=False, compile_message=False,\nserver/support.py:452:def cython_import_all(filename, globals, verbose=False, compile_message=False,\nserver/support.py:468:    m = cython_import(filename, verbose=verbose, compile_message=compile_message,\n```\nThe notebook already has its own versions of these two functions so that is not a problem, as far as I can tell (though it wouldn't hurt testing it can still Cythonize after doing this).",
    "created_at": "2014-08-15T05:46:10Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84733",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'></a>
Indeed, this wouldn't be hard to do.  Worst-case we could move them but leave a deprecation that points to the new location (cython.py seems best).

```
sage: search_src('cython_import')
misc/cython.py:657:    sage.server.support.cython_import_all(tmpfile, d,
misc/cython.py:756:    from sage.server.support import cython_import
misc/cython.py:757:    return cython_import(file, create_local_c_file=False)
misc/cython_c.pyx:61:    sage.server.support.cython_import_all(tmpfile, globals(),
server/support.py:425:def cython_import(filename, verbose=False, compile_message=False,
server/support.py:452:def cython_import_all(filename, globals, verbose=False, compile_message=False,
server/support.py:468:    m = cython_import(filename, verbose=verbose, compile_message=compile_message,
```
The notebook already has its own versions of these two functions so that is not a problem, as far as I can tell (though it wouldn't hurt testing it can still Cythonize after doing this).



---

archive/issue_comments_084734.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)",
    "created_at": "2015-03-25T16:58:19Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84734",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)



---

archive/issue_comments_084735.json:
```json
{
    "body": "**Commit:** [325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84735",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)



---

archive/issue_comments_084736.json:
```json
{
    "body": "<a id='comment:8'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab\">325ca9c</a></td><td><code>Move Cython functions from server/support.py to misc/cython.py</code></td></tr></table>\n",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84736",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab">325ca9c</a></td><td><code>Move Cython functions from server/support.py to misc/cython.py</code></td></tr></table>




---

archive/issue_comments_084737.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84737",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_events_070940.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70940"
}
```



---

archive/issue_events_070941.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70941"
}
```



---

archive/issue_events_070942.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-03-25T17:00:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70942"
}
```



---

archive/issue_comments_084738.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586\">1fc034e</a></td><td><code>Move Cython functions from server/support.py to misc/cython.py</code></td></tr></table>\n",
    "created_at": "2015-05-05T21:02:18Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586">1fc034e</a></td><td><code>Move Cython functions from server/support.py to misc/cython.py</code></td></tr></table>




---

archive/issue_comments_084739.json:
```json
{
    "body": "**Changing commit** from \"[325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)\" to \"[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)\".",
    "created_at": "2015-05-05T21:02:18Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84739",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[325ca9ca11b9ade262297562989a8ca1ff398eab](https://github.com/sagemath/sagetrac-mirror/commit/325ca9ca11b9ade262297562989a8ca1ff398eab)" to "[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)".



---

archive/issue_events_070943.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-30T07:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70943"
}
```



---

archive/issue_events_070944.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2015-05-30T07:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "milestone": "sage-6.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70944"
}
```



---

archive/issue_comments_084740.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooks good to me.",
    "created_at": "2015-05-30T11:09:30Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84740",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
Looks good to me.



---

archive/issue_comments_084741.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2015-05-30T11:09:30Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84741",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_events_070945.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-05-30T11:09:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70945"
}
```



---

archive/issue_events_070946.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2015-05-30T11:09:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70946"
}
```



---

archive/issue_events_070947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-05-30T22:48:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70947"
}
```



---

archive/issue_events_070948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "82d2d88d9bafc3070f80244f6bee4912fb54b823",
    "created_at": "2015-05-30T22:48:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/9552#event-70948"
}
```



---

archive/issue_comments_084742.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)\" to \"[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)\".",
    "created_at": "2015-05-30T22:48:30Z",
    "issue": "https://github.com/sagemath/sage/issues/9552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/9552#issuecomment-84742",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/9552](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/9552)" to "[1fc034eda517210fee9afa56b60dfe4ff39f6586](https://github.com/sagemath/sagetrac-mirror/commit/1fc034eda517210fee9afa56b60dfe4ff39f6586)".

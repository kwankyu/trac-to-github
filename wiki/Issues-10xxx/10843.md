# Issue 10843: Faster listing of number field homsets

archive/issues_010777.json:
```json
{
    "body": "The patch speeds up the calculation of homomorphisms between number fields.  This is mainly achieved by avoiding unnecessary checking.  Doctests are also updated.\n\n**Assignee:** @loefflerd\n\n**CC:**  @lftabera @rharron tfeulner @simon-king-jena\n\n**Branch/Commit:** [e2ee8a3231962e830de11b1fc94598c61fe0c9c1](https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Francis Clarke\n\nIssue created by migration from https://trac.sagemath.org/ticket/10843\n\n",
    "closed_at": "2014-10-29T10:38:48Z",
    "created_at": "2011-02-24T11:05:33Z",
    "labels": [
        "component: number fields",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-6.4",
    "title": "Faster listing of number field homsets",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10843",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```
The patch speeds up the calculation of homomorphisms between number fields.  This is mainly achieved by avoiding unnecessary checking.  Doctests are also updated.

**Assignee:** @loefflerd

**CC:**  @lftabera @rharron tfeulner @simon-king-jena

**Branch/Commit:** [e2ee8a3231962e830de11b1fc94598c61fe0c9c1](https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1)

**Reviewer:** Jeroen Demeyer

**Author:** Francis Clarke

Issue created by migration from https://trac.sagemath.org/ticket/10843





---

archive/issue_events_084761.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/fwclarke",
    "created_at": "2011-02-25T09:59:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84761"
}
```



---

archive/issue_events_084762.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/fwclarke",
    "created_at": "2012-05-17T08:18:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-5.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84762"
}
```



---

archive/attachments_014733.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10843.patch",
    "asset_url": "tarball://root/attachments/ticket10843/trac_10843.patch",
    "created_at": "2013-05-04T10:41:03Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10843/trac_10843.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```



---

archive/issue_comments_107077.json:
```json
{
    "body": "**Attachment:** [trac_10843.patch](https://github.com/sagemath/sage/files/ticket10843/trac_10843.patch)\n\nrebased for 5.9",
    "created_at": "2013-05-04T10:41:03Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107077",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

**Attachment:** [trac_10843.patch](https://github.com/sagemath/sage/files/ticket10843/trac_10843.patch)

rebased for 5.9



---

archive/issue_comments_107078.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe patch has been rebased for Sage-5.9.",
    "created_at": "2013-05-04T10:51:47Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107078",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:3'></a>
The patch has been rebased for Sage-5.9.



---

archive/issue_events_084763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84763"
}
```



---

archive/issue_events_084764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84764"
}
```



---

archive/issue_events_084765.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84765"
}
```



---

archive/issue_events_084766.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84766"
}
```



---

archive/issue_events_084767.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84767"
}
```



---

archive/issue_events_084768.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84768"
}
```



---

archive/issue_comments_107079.json:
```json
{
    "body": "<a id='comment:8'></a>\nHi,\n\nLooks nice.\n\nI uploaded your patch in a git branch and added three commits above:\n- the first one to remove the trailing whitespaces\n- the second one to fits with Sage standard for the docs and make the code more compatible with Python 3\n- the third to have a better caching\n\nPlease, tell me what you think.\n\nVincent\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20f21a64893f256c13b9387b1163aa5e9f5b8c9f\">20f21a6</a></td><td><code>#10843 faster lising of number field homsets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4040bfdc7be3c2a8bc1c75e730df038615bbcd5f\">4040bfd</a></td><td><code>trac #10843: remove trailing whitespaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2abefab4d35d5caad7e14b3145a6505b9839130\">a2abefa</a></td><td><code>trac #10843: documentation, indentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51569d96fee90505298606630dc25c87f5d43edf\">51569d9</a></td><td><code>trac #10843: improved caching</code></td></tr></table>\n",
    "created_at": "2014-06-13T20:45:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107079",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>
Hi,

Looks nice.

I uploaded your patch in a git branch and added three commits above:
- the first one to remove the trailing whitespaces
- the second one to fits with Sage standard for the docs and make the code more compatible with Python 3
- the third to have a better caching

Please, tell me what you think.

Vincent

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20f21a64893f256c13b9387b1163aa5e9f5b8c9f">20f21a6</a></td><td><code>#10843 faster lising of number field homsets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4040bfdc7be3c2a8bc1c75e730df038615bbcd5f">4040bfd</a></td><td><code>trac #10843: remove trailing whitespaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2abefab4d35d5caad7e14b3145a6505b9839130">a2abefa</a></td><td><code>trac #10843: documentation, indentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51569d96fee90505298606630dc25c87f5d43edf">51569d9</a></td><td><code>trac #10843: improved caching</code></td></tr></table>




---

archive/issue_comments_107080.json:
```json
{
    "body": "**Commit:** [51569d96fee90505298606630dc25c87f5d43edf](https://github.com/sagemath/sagetrac-mirror/commit/51569d96fee90505298606630dc25c87f5d43edf)",
    "created_at": "2014-06-13T20:45:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107080",
    "user": "https://github.com/videlec"
}
```

**Commit:** [51569d96fee90505298606630dc25c87f5d43edf](https://github.com/sagemath/sagetrac-mirror/commit/51569d96fee90505298606630dc25c87f5d43edf)



---

archive/issue_comments_107081.json:
```json
{
    "body": "**Branch:** [public/10843](https://github.com/sagemath/sagetrac-mirror/tree/public/10843)",
    "created_at": "2014-06-13T20:45:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107081",
    "user": "https://github.com/videlec"
}
```

**Branch:** [public/10843](https://github.com/sagemath/sagetrac-mirror/tree/public/10843)



---

archive/issue_comments_107082.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks for this. \u00a0It all seems to be working perfectly.",
    "created_at": "2014-07-09T18:21:41Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107082",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:9'></a>
Thanks for this. Â It all seems to be working perfectly.



---

archive/issue_events_084769.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84769"
}
```



---

archive/issue_events_084770.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84770"
}
```



---

archive/issue_comments_107083.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhy the separate branches for `D` absolute/relative? The following works in both cases:\n\n```\nroots = D.polynomial().roots(ring=C, multiplicities=False)\n```",
    "created_at": "2014-10-16T11:47:32Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107083",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
Why the separate branches for `D` absolute/relative? The following works in both cases:

```
roots = D.polynomial().roots(ring=C, multiplicities=False)
```



---

archive/issue_events_084771.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T11:47:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84771"
}
```



---

archive/issue_events_084772.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-16T11:47:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84772"
}
```



---

archive/issue_comments_107084.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946525b74a2b4044ef4e45fb54cf13c568a550b5\">946525b</a></td><td><code>trac #10843: remove separate absolute/relative branches</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1\">e2ee8a3</a></td><td><code>trac #10843: add check keywords and an associated doctest</code></td></tr></table>\n",
    "created_at": "2014-10-25T15:33:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946525b74a2b4044ef4e45fb54cf13c568a550b5">946525b</a></td><td><code>trac #10843: remove separate absolute/relative branches</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1">e2ee8a3</a></td><td><code>trac #10843: add check keywords and an associated doctest</code></td></tr></table>




---

archive/issue_comments_107085.json:
```json
{
    "body": "**Changing commit** from \"[51569d96fee90505298606630dc25c87f5d43edf](https://github.com/sagemath/sagetrac-mirror/commit/51569d96fee90505298606630dc25c87f5d43edf)\" to \"[e2ee8a3231962e830de11b1fc94598c61fe0c9c1](https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1)\".",
    "created_at": "2014-10-25T15:33:01Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[51569d96fee90505298606630dc25c87f5d43edf](https://github.com/sagemath/sagetrac-mirror/commit/51569d96fee90505298606630dc25c87f5d43edf)" to "[e2ee8a3231962e830de11b1fc94598c61fe0c9c1](https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1)".



---

archive/issue_events_084773.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/fwclarke",
    "created_at": "2014-10-25T15:43:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84773"
}
```



---

archive/issue_events_084774.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/fwclarke",
    "created_at": "2014-10-25T15:43:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84774"
}
```



---

archive/issue_comments_107086.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [@jdemeyer](#comment%3A11):\n\n> Why the separate branches for `D` absolute/relative?\n\nAssuming that you meant `C` rather than `D`, I've changed the code as suggested.  I don't know why this was done separately.  Perhaps the simpler approach didn't work when this ticket began four years ago.\n\nI've made one other change which should have been made before.  It solves a problem which arose in [http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/](http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/).",
    "created_at": "2014-10-25T15:43:16Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107086",
    "user": "https://trac.sagemath.org/admin/accounts/users/fwclarke"
}
```

<a id='comment:13'></a>
Replying to [@jdemeyer](#comment%3A11):

> Why the separate branches for `D` absolute/relative?

Assuming that you meant `C` rather than `D`, I've changed the code as suggested.  I don't know why this was done separately.  Perhaps the simpler approach didn't work when this ticket began four years ago.

I've made one other change which should have been made before.  It solves a problem which arose in [http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/](http://ask.sagemath.org/question/24173/homomorphisms-for-relative-number-fields/).



---

archive/issue_comments_107087.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2014-10-28T07:26:11Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107087",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_084775.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-28T07:26:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84775"
}
```



---

archive/issue_events_084776.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2014-10-28T07:26:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84776"
}
```



---

archive/issue_comments_107088.json:
```json
{
    "body": "**Changing branch** from \"[public/10843](https://github.com/sagemath/sagetrac-mirror/tree/public/10843)\" to \"[e2ee8a3231962e830de11b1fc94598c61fe0c9c1](https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1)\".",
    "created_at": "2014-10-29T10:38:48Z",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10843#issuecomment-107088",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/10843](https://github.com/sagemath/sagetrac-mirror/tree/public/10843)" to "[e2ee8a3231962e830de11b1fc94598c61fe0c9c1](https://github.com/sagemath/sagetrac-mirror/commit/e2ee8a3231962e830de11b1fc94598c61fe0c9c1)".



---

archive/issue_events_084777.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-10-29T10:38:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84777"
}
```



---

archive/issue_events_084778.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fb25c13f38ae7c3a84e90cbc4fb9123680824931",
    "created_at": "2014-10-29T10:38:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10843",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10843#event-84778"
}
```

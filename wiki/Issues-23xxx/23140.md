# Issue 23140: Gauss-Legendre Integrator

archive/issues_022903.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis code implements a method for doing Gauss-Legendre integration on a fast-callable polynomial. Designed with multi-precision in mind.\n\nComponent: **numerical**\n\nKeywords: **Gauss-Legendre Integration sd86.5**\n\nAuthor: **Nils Bruin, Alexandre Zotine**\n\nBranch: **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)**\n\nReviewer: **Aly Deines**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/23140_\n\n",
    "closed_at": "2017-06-11T09:13:24Z",
    "created_at": "2017-06-05T20:41:15Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20numerical",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Gauss-Legendre Integrator",
    "type": "issue",
    "updated_at": "2020-10-02T12:38:01Z",
    "url": "https://github.com/sagemath/sage/issues/23140",
    "user": "https://github.com/sagetrac-sasha-zotine"
}
```
<div id="comment:0"></div>

This code implements a method for doing Gauss-Legendre integration on a fast-callable polynomial. Designed with multi-precision in mind.

Component: **numerical**

Keywords: **Gauss-Legendre Integration sd86.5**

Author: **Nils Bruin, Alexandre Zotine**

Branch: **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)**

Reviewer: **Aly Deines**

_Issue created by migration from https://trac.sagemath.org/ticket/23140_





---

archive/issue_events_319918.json:
```json
{
    "actor": "https://github.com/sagetrac-sasha-zotine",
    "created_at": "2017-06-05T20:41:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319918"
}
```



---

archive/issue_events_319919.json:
```json
{
    "actor": "https://github.com/sagetrac-sasha-zotine",
    "created_at": "2017-06-05T20:41:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20numerical",
    "label_color": "0000ff",
    "label_name": "c: numerical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319919"
}
```



---

archive/issue_events_319920.json:
```json
{
    "actor": "https://github.com/sagetrac-sasha-zotine",
    "created_at": "2017-06-05T20:41:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319920"
}
```



---

archive/issue_events_319921.json:
```json
{
    "actor": "https://github.com/sagetrac-sasha-zotine",
    "created_at": "2017-06-05T20:41:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319921"
}
```



---

archive/issue_comments_346952.json:
```json
{
    "body": "Branch: **[u/nbruin/gauss_legendre_integrator](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/gauss_legendre_integrator)**",
    "created_at": "2017-06-05T23:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346952",
    "user": "https://github.com/nbruin"
}
```

Branch: **[u/nbruin/gauss_legendre_integrator](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/gauss_legendre_integrator)**



---

archive/issue_comments_346953.json:
```json
{
    "body": "Commit: **[`fa4495a`](https://github.com/sagemath/sagetrac-mirror/commit/fa4495a1ce973563a586538f773296035d9fbc83)**",
    "created_at": "2017-06-06T20:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346953",
    "user": "https://github.com/sagetrac-sasha-zotine"
}
```

Commit: **[`fa4495a`](https://github.com/sagemath/sagetrac-mirror/commit/fa4495a1ce973563a586538f773296035d9fbc83)**



---

archive/issue_comments_346954.json:
```json
{
    "body": "Changed keywords from **Gauss-Legendre Integration** to **Gauss-Legendre Integration sd86.5**",
    "created_at": "2017-06-06T20:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346954",
    "user": "https://github.com/sagetrac-sasha-zotine"
}
```

Changed keywords from **Gauss-Legendre Integration** to **Gauss-Legendre Integration sd86.5**



---

archive/issue_comments_346955.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa4495a1ce973563a586538f773296035d9fbc83\"><code>fa4495a</code></a></td><td><code>initial check-in of gauss-legendre integrator</code></td></tr></table>\n",
    "created_at": "2017-06-06T20:09:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346955",
    "user": "https://github.com/sagetrac-sasha-zotine"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa4495a1ce973563a586538f773296035d9fbc83"><code>fa4495a</code></a></td><td><code>initial check-in of gauss-legendre integrator</code></td></tr></table>




---

archive/issue_comments_346956.json:
```json
{
    "body": "Changed commit from **[`fa4495a`](https://github.com/sagemath/sagetrac-mirror/commit/fa4495a1ce973563a586538f773296035d9fbc83)** to **[`fec8f00`](https://github.com/sagemath/sagetrac-mirror/commit/fec8f0026f21bbc32216c440cd89a418a3d81f33)**",
    "created_at": "2017-06-07T04:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa4495a`](https://github.com/sagemath/sagetrac-mirror/commit/fa4495a1ce973563a586538f773296035d9fbc83)** to **[`fec8f00`](https://github.com/sagemath/sagetrac-mirror/commit/fec8f0026f21bbc32216c440cd89a418a3d81f33)**



---

archive/issue_comments_346957.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fec8f0026f21bbc32216c440cd89a418a3d81f33\"><code>fec8f00</code></a></td><td><code>Creation of a vectorized gauss_legendre integrator</code></td></tr></table>\n",
    "created_at": "2017-06-07T04:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346957",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fec8f0026f21bbc32216c440cd89a418a3d81f33"><code>fec8f00</code></a></td><td><code>Creation of a vectorized gauss_legendre integrator</code></td></tr></table>




---

archive/issue_comments_346958.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c\"><code>f128723</code></a></td><td><code>Creation of a vectorized gauss_legendre integrator</code></td></tr></table>\n",
    "created_at": "2017-06-07T05:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c"><code>f128723</code></a></td><td><code>Creation of a vectorized gauss_legendre integrator</code></td></tr></table>




---

archive/issue_comments_346959.json:
```json
{
    "body": "Changed commit from **[`fec8f00`](https://github.com/sagemath/sagetrac-mirror/commit/fec8f0026f21bbc32216c440cd89a418a3d81f33)** to **[`f128723`](https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c)**",
    "created_at": "2017-06-07T05:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346959",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fec8f00`](https://github.com/sagemath/sagetrac-mirror/commit/fec8f0026f21bbc32216c440cd89a418a3d81f33)** to **[`f128723`](https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c)**



---

archive/issue_comments_346960.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReady for review. Code is basically a translation of what is in mpmath. See for instance\n\n[https://github.com/fredrik-johansson/mpmath/blob/master/mpmath/calculus/quadrature.py#L203](https://github.com/fredrik-johansson/mpmath/blob/master/mpmath/calculus/quadrature.py#L203)\n\nfor comparison.\n\n(most computations are straightforward. It's particularly the error estimator that is tricky, and that is basically copied literally; modulo some log-base changes)",
    "created_at": "2017-06-07T05:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346960",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:5" align="right">comment:5</div>

Ready for review. Code is basically a translation of what is in mpmath. See for instance

[https://github.com/fredrik-johansson/mpmath/blob/master/mpmath/calculus/quadrature.py#L203](https://github.com/fredrik-johansson/mpmath/blob/master/mpmath/calculus/quadrature.py#L203)

for comparison.

(most computations are straightforward. It's particularly the error estimator that is tricky, and that is basically copied literally; modulo some log-base changes)



---

archive/issue_comments_346961.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d68683278e55e155745e9330e62f0a1617eb7e0d\"><code>d686832</code></a></td><td><code>Change to node for degree=1, based on bugfix in mpmath:</code></td></tr></table>\n",
    "created_at": "2017-06-07T05:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d68683278e55e155745e9330e62f0a1617eb7e0d"><code>d686832</code></a></td><td><code>Change to node for degree=1, based on bugfix in mpmath:</code></td></tr></table>




---

archive/issue_comments_346962.json:
```json
{
    "body": "Changed commit from **[`f128723`](https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c)** to **[`d686832`](https://github.com/sagemath/sagetrac-mirror/commit/d68683278e55e155745e9330e62f0a1617eb7e0d)**",
    "created_at": "2017-06-07T05:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f128723`](https://github.com/sagemath/sagetrac-mirror/commit/f1287234af088ddf7d631e75aa6a9581c09b860c)** to **[`d686832`](https://github.com/sagemath/sagetrac-mirror/commit/d68683278e55e155745e9330e62f0a1617eb7e0d)**



---

archive/issue_events_319922.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-07T05:18:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319922"
}
```



---

archive/issue_comments_346963.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor documentation completeness, here is an issue tracker for an issue concerning log bases in the error estimation routine: [https://github.com/fredrik-johansson/mpmath/pull/329](https://github.com/fredrik-johansson/mpmath/pull/329)",
    "created_at": "2017-06-07T05:18:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346963",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:7" align="right">comment:7</div>

For documentation completeness, here is an issue tracker for an issue concerning log bases in the error estimation routine: [https://github.com/fredrik-johansson/mpmath/pull/329](https://github.com/fredrik-johansson/mpmath/pull/329)



---

archive/issue_events_319923.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-07T05:18:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319923"
}
```



---

archive/issue_events_319924.json:
```json
{
    "actor": "https://github.com/nbruin",
    "created_at": "2017-06-07T05:18:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319924"
}
```



---

archive/issue_comments_346964.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nMinor comments:\n\n1. In Cython, you can use the libc math library instead of the Python math library. It suffices to replace `import math` by `cimport libc.math as math`.\n\n2. To ensure Python 3 compatibility, use `from `__future__` import absolute_import, division, print_function`.\n\n3. Keep in mind PEP 8 which says that assignments should have spaces: replace `Rout=RealField(prec)` by `Rout = RealField(prec)`.",
    "created_at": "2017-06-07T07:54:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346964",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Minor comments:

1. In Cython, you can use the libc math library instead of the Python math library. It suffices to replace `import math` by `cimport libc.math as math`.

2. To ensure Python 3 compatibility, use `from `__future__` import absolute_import, division, print_function`.

3. Keep in mind PEP 8 which says that assignments should have spaces: replace `Rout=RealField(prec)` by `Rout = RealField(prec)`.



---

archive/issue_comments_346965.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n4. You use `cdef int` in various places. Only do this when you know that the variable must always be small. If there any tiny chance that this will ever be larger than `2^31`, use `cdef long` or some other type instead. Even if you cannot support Gauss-Legendre integration in \"degree\" `>= 31` now, there is no reason to a priori assume that it will never be needed.\n\n5. In documentation, use `^` instead of `**`.\n\n(*) I find \"degree\" a confusing name. Is this standard in Gauss\u00ad\u2013Legendre integration theory? I would expect the degree to be one less than the number of nodes.",
    "created_at": "2017-06-07T07:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346965",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

4. You use `cdef int` in various places. Only do this when you know that the variable must always be small. If there any tiny chance that this will ever be larger than `2^31`, use `cdef long` or some other type instead. Even if you cannot support Gauss-Legendre integration in "degree" `>= 31` now, there is no reason to a priori assume that it will never be needed.

5. In documentation, use `^` instead of `**`.

(*) I find "degree" a confusing name. Is this standard in Gauss­–Legendre integration theory? I would expect the degree to be one less than the number of nodes.



---

archive/issue_comments_346966.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a\"><code>8c82320</code></a></td><td><code>Change to node for degree=1, based on bugfix in mpmath:</code></td></tr></table>\n",
    "created_at": "2017-06-07T14:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346966",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a"><code>8c82320</code></a></td><td><code>Change to node for degree=1, based on bugfix in mpmath:</code></td></tr></table>




---

archive/issue_comments_346967.json:
```json
{
    "body": "Changed commit from **[`d686832`](https://github.com/sagemath/sagetrac-mirror/commit/d68683278e55e155745e9330e62f0a1617eb7e0d)** to **[`8c82320`](https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a)**",
    "created_at": "2017-06-07T14:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346967",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d686832`](https://github.com/sagemath/sagetrac-mirror/commit/d68683278e55e155745e9330e62f0a1617eb7e0d)** to **[`8c82320`](https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a)**



---

archive/issue_comments_346968.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n(Pushed an amended branch because git had filled in a bogus author. cocalc projects and git mix badly)",
    "created_at": "2017-06-07T14:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346968",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:11" align="right">comment:11</div>

(Pushed an amended branch because git had filled in a bogus author. cocalc projects and git mix badly)



---

archive/issue_comments_346969.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@jdemeyer](#comment%3A9):\nReplying to [@jdemeyer](#comment%3A8):\n> Minor comments:\n> \n> 1. In Cython, you can use the libc math library instead of the Python math library. It suffices to replace `import math` by `cimport libc.math as math`.\n\nI tried and it generated errors for me (it got confused with complex numbers in a way that python's math doesn't). It's only used in a non-critical part (computing the initial value for newton iteration), so it doesn't need to be fast. The python library seems to work fine. \n\n> 2. To ensure Python 3 compatibility, use `from `__future__` import absolute_import, division, print_function`.\n\nThanks\n\n> 3. Keep in mind PEP 8 which says that assignments should have spaces: replace `Rout=RealField(prec)` by `Rout = RealField(prec)`.\n\nDone\n\n> 4. You use `cdef int` in various places. Only do this when you know that the variable must always be small. If there any tiny chance that this will ever be larger than `2^31`, use `cdef long` or some other type instead. Even if you cannot support Gauss-Legendre integration in \"degree\" `>= 31` now, there is no reason to a priori assume that it will never be needed.\n\nGood point.\n\n> 5. In documentation, use `^` instead of `**`.\n\nGood point\n \n> (*) I find \"degree\" a confusing name. Is this standard in Gauss\u00ad\u2013Legendre integration theory? I would expect the degree to be one less than the number of nodes.\n\nFrederic uses it in mpmath. He scales the parameter so that an increase roughly doubles the precision. I agree, though: it's much easier to document if you just give the degree of the legendre polynomials. It would be nice to use this routine as a drop-in replacement in sage's mpmath too.",
    "created_at": "2017-06-07T14:46:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346969",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@jdemeyer](#comment%3A9):
Replying to [@jdemeyer](#comment%3A8):
> Minor comments:
> 
> 1. In Cython, you can use the libc math library instead of the Python math library. It suffices to replace `import math` by `cimport libc.math as math`.

I tried and it generated errors for me (it got confused with complex numbers in a way that python's math doesn't). It's only used in a non-critical part (computing the initial value for newton iteration), so it doesn't need to be fast. The python library seems to work fine. 

> 2. To ensure Python 3 compatibility, use `from `__future__` import absolute_import, division, print_function`.

Thanks

> 3. Keep in mind PEP 8 which says that assignments should have spaces: replace `Rout=RealField(prec)` by `Rout = RealField(prec)`.

Done

> 4. You use `cdef int` in various places. Only do this when you know that the variable must always be small. If there any tiny chance that this will ever be larger than `2^31`, use `cdef long` or some other type instead. Even if you cannot support Gauss-Legendre integration in "degree" `>= 31` now, there is no reason to a priori assume that it will never be needed.

Good point.

> 5. In documentation, use `^` instead of `**`.

Good point
 
> (*) I find "degree" a confusing name. Is this standard in Gauss­–Legendre integration theory? I would expect the degree to be one less than the number of nodes.

Frederic uses it in mpmath. He scales the parameter so that an increase roughly doubles the precision. I agree, though: it's much easier to document if you just give the degree of the legendre polynomials. It would be nice to use this routine as a drop-in replacement in sage's mpmath too.



---

archive/issue_comments_346970.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490\"><code>a455f3e</code></a></td><td><code>some PEP8, reviewer comments; rationalized \"degree\" parameter for \"nodes\"</code></td></tr></table>\n",
    "created_at": "2017-06-07T14:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346970",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490"><code>a455f3e</code></a></td><td><code>some PEP8, reviewer comments; rationalized "degree" parameter for "nodes"</code></td></tr></table>




---

archive/issue_comments_346971.json:
```json
{
    "body": "Changed commit from **[`8c82320`](https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a)** to **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)**",
    "created_at": "2017-06-07T14:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346971",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c82320`](https://github.com/sagemath/sagetrac-mirror/commit/8c823208f6305337954d5c1b6f90f3ee655bcb6a)** to **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)**



---

archive/issue_comments_346972.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nIf you really really wanted to you could clean up a tiny bit to meet all PEP 8 standards, but nothing else needs work or to be changed.",
    "created_at": "2017-06-07T22:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346972",
    "user": "https://github.com/adeines"
}
```

<div id="comment:14" align="right">comment:14</div>

If you really really wanted to you could clean up a tiny bit to meet all PEP 8 standards, but nothing else needs work or to be changed.



---

archive/issue_events_319925.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2017-06-07T22:38:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319925"
}
```



---

archive/issue_events_319926.json:
```json
{
    "actor": "https://github.com/adeines",
    "created_at": "2017-06-07T22:38:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319926"
}
```



---

archive/issue_comments_346973.json:
```json
{
    "body": "Reviewer: **Aly Deines**",
    "created_at": "2017-06-07T22:38:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346973",
    "user": "https://github.com/adeines"
}
```

Reviewer: **Aly Deines**



---

archive/issue_comments_346974.json:
```json
{
    "body": "Changed branch from **[u/nbruin/gauss_legendre_integrator](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/gauss_legendre_integrator)** to **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)**",
    "created_at": "2017-06-11T09:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346974",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/nbruin/gauss_legendre_integrator](https://github.com/sagemath/sagetrac-mirror/tree/u/nbruin/gauss_legendre_integrator)** to **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)**



---

archive/issue_events_319927.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-11T09:13:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319927"
}
```



---

archive/issue_events_319928.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ad64e9dd4f1fe1b2b4b36ec449cca5b13333f3c7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-11T09:13:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/23140#event-319928"
}
```



---

archive/issue_comments_346975.json:
```json
{
    "body": "Changed commit from **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)** to none",
    "created_at": "2020-10-02T12:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346975",
    "user": "https://github.com/slel"
}
```

Changed commit from **[`a455f3e`](https://github.com/sagemath/sagetrac-mirror/commit/a455f3e4532f4b642543aaa88aa701b1b3b8d490)** to none



---

archive/issue_comments_346976.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nFollow-up at #30698 to add this to the documentation.\n\nI don't see it in the built documentation, web search engines\ndon't find \"Gauss-Legendre\" at doc.sagemath.org, and `search_doc`\ngives nothing for \"Gauss-Legendre\" or \"gauss_legendre\".\n\nIf you know how to do that, please post a branch at #30698.\nOtherwise I'll look into it.",
    "created_at": "2020-10-02T12:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/23140",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/23140#issuecomment-346976",
    "user": "https://github.com/slel"
}
```

<div id="comment:16" align="right">comment:16</div>

Follow-up at #30698 to add this to the documentation.

I don't see it in the built documentation, web search engines
don't find "Gauss-Legendre" at doc.sagemath.org, and `search_doc`
gives nothing for "Gauss-Legendre" or "gauss_legendre".

If you know how to do that, please post a branch at #30698.
Otherwise I'll look into it.
